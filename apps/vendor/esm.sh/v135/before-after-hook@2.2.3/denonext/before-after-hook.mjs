/* esm.sh - esbuild bundle(before-after-hook@2.2.3) denonext production */
var F=Object.create;var d=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var g=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),z=(e,r)=>{for(var n in r)d(e,n,{get:r[n],enumerable:!0})},v=(e,r,n,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of N(r))!j.call(e,o)&&o!==n&&d(e,o,{get:()=>r[o],enumerable:!(i=M(r,o))||i.enumerable});return e},f=(e,r,n)=>(v(e,r,"default"),n&&v(n,r,"default")),p=(e,r,n)=>(n=e!=null?F(O(e)):{},v(r||!e||!e.__esModule?d(n,"default",{value:e,enumerable:!0}):n,e));var x=g((X,H)=>{H.exports=y;function y(e,r,n,i){if(typeof n!="function")throw new Error("method for before hook must be a function");return i||(i={}),Array.isArray(r)?r.reverse().reduce(function(o,u){return y.bind(null,e,u,o,i)},n)():Promise.resolve().then(function(){return e.registry[r]?e.registry[r].reduce(function(o,u){return u.hook.bind(null,o,i)},n)():n(i)})}});var k=g((Y,h)=>{h.exports=B;function B(e,r,n,i){var o=i;e.registry[n]||(e.registry[n]=[]),r==="before"&&(i=function(u,t){return Promise.resolve().then(o.bind(null,t)).then(u.bind(null,t))}),r==="after"&&(i=function(u,t){var c;return Promise.resolve().then(u.bind(null,t)).then(function(R){return c=R,o(c,t)}).then(function(){return c})}),r==="error"&&(i=function(u,t){return Promise.resolve().then(u.bind(null,t)).catch(function(c){return o(c,t)})}),e.registry[n].push({hook:i,orig:o})}});var S=g((Z,C)=>{C.exports=G;function G(e,r,n){if(e.registry[r]){var i=e.registry[r].map(function(o){return o.orig}).indexOf(n);i!==-1&&e.registry[r].splice(i,1)}}});var b=g(($,s)=>{var P=x(),I=k(),J=S(),_=Function.bind,m=_.bind(_);function q(e,r,n){var i=m(J,null).apply(null,n?[r,n]:[r]);e.api={remove:i},e.remove=i,["before","error","after","wrap"].forEach(function(o){var u=n?[r,o,n]:[r,o];e[o]=e.api[o]=m(I,null).apply(null,u)})}function K(){var e="h",r={registry:{}},n=P.bind(null,r,e);return q(n,r,e),n}function A(){var e={registry:{}},r=P.bind(null,e);return q(r,e),r}var w=!1;function a(){return w||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),w=!0),A()}a.Singular=K.bind();a.Collection=A.bind();s.exports=a;s.exports.Hook=a;s.exports.Singular=a.Singular;s.exports.Collection=a.Collection});var l={};z(l,{Collection:()=>Q,Hook:()=>T,Singular:()=>L,default:()=>V});var E=p(b());f(l,p(b()));var{Singular:L,Collection:Q,Hook:T}=E,{default:D,...U}=E,V=D!==void 0?D:U;export{Q as Collection,T as Hook,L as Singular,V as default};
//# sourceMappingURL=before-after-hook.mjs.map