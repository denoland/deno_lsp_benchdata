/* esm.sh - esbuild bundle(chownr@2.0.0) denonext production */
import __Process$ from "node:process";
import * as __0$ from "node:fs";
import * as __1$ from "node:path";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"fs":return e(__0$);case"path":return e(__1$);default:throw new Error("module \""+n+"\" not found");}};
var p=Object.create;var N=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var v=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var P=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),U=(n,e)=>{for(var t in e)N(n,t,{get:e[t],enumerable:!0})},w=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of F(e))!L.call(n,r)&&r!==t&&N(n,r,{get:()=>e[r],enumerable:!(o=q(e,r))||o.enumerable});return n},a=(n,e,t)=>(w(n,e,"default"),t&&w(t,e,"default")),O=(n,e,t)=>(t=n!=null?p(K(n)):{},w(e||!n||!n.__esModule?N(t,"default",{value:n,enumerable:!0}):t,n));var i=P((Q,d)=>{"use strict";var s=v("fs"),l=v("path"),W=s.lchown?"lchown":"chown",V=s.lchownSync?"lchownSync":"chownSync",_=s.lchown&&!__Process$.version.match(/v1[1-9]+\./)&&!__Process$.version.match(/v10\.[6-9]/),T=(n,e,t)=>{try{return s[V](n,e,t)}catch(o){if(o.code!=="ENOENT")throw o}},Y=(n,e,t)=>{try{return s.chownSync(n,e,t)}catch(o){if(o.code!=="ENOENT")throw o}},j=_?(n,e,t,o)=>r=>{!r||r.code!=="EISDIR"?o(r):s.chown(n,e,t,o)}:(n,e,t,o)=>o,S=_?(n,e,t)=>{try{return T(n,e,t)}catch(o){if(o.code!=="EISDIR")throw o;Y(n,e,t)}}:(n,e,t)=>T(n,e,t),k=__Process$.version,I=(n,e,t)=>s.readdir(n,e,t),z=(n,e)=>s.readdirSync(n,e);/^v4\./.test(k)&&(I=(n,e,t)=>s.readdir(n,t));var E=(n,e,t,o)=>{s[W](n,e,t,j(n,e,t,r=>{o(r&&r.code!=="ENOENT"?r:null)}))},D=(n,e,t,o,r)=>{if(typeof e=="string")return s.lstat(l.resolve(n,e),(c,h)=>{if(c)return r(c.code!=="ENOENT"?c:null);h.name=e,D(n,h,t,o,r)});if(e.isDirectory())u(l.resolve(n,e.name),t,o,c=>{if(c)return r(c);let h=l.resolve(n,e.name);E(h,t,o,r)});else{let c=l.resolve(n,e.name);E(c,t,o,r)}},u=(n,e,t,o)=>{I(n,{withFileTypes:!0},(r,c)=>{if(r){if(r.code==="ENOENT")return o();if(r.code!=="ENOTDIR"&&r.code!=="ENOTSUP")return o(r)}if(r||!c.length)return E(n,e,t,o);let h=c.length,m=null,H=y=>{if(!m){if(y)return o(m=y);if(--h===0)return E(n,e,t,o)}};c.forEach(y=>D(n,y,e,t,H))})},A=(n,e,t,o)=>{if(typeof e=="string")try{let r=s.lstatSync(l.resolve(n,e));r.name=e,e=r}catch(r){if(r.code==="ENOENT")return;throw r}e.isDirectory()&&R(l.resolve(n,e.name),t,o),S(l.resolve(n,e.name),t,o)},R=(n,e,t)=>{let o;try{o=z(n,{withFileTypes:!0})}catch(r){if(r.code==="ENOENT")return;if(r.code==="ENOTDIR"||r.code==="ENOTSUP")return S(n,e,t);throw r}return o&&o.length&&o.forEach(r=>A(n,r,e,t)),S(n,e,t)};d.exports=u;u.sync=R});var f={};U(f,{default:()=>J,sync:()=>B});var C=O(i());a(f,O(i()));var{sync:B}=C,{default:x,...G}=C,J=x!==void 0?x:G;export{J as default,B as sync};
//# sourceMappingURL=chownr.mjs.map