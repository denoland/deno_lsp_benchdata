/* esm.sh - esbuild bundle(@octokit/oauth-methods@4.0.0) denonext production */
var m="4.0.0";import{oauthAuthorizationUrl as _}from"/v135/@octokit/oauth-authorization-url@6.0.2/denonext/oauth-authorization-url.mjs";import{request as k}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";import{RequestError as h}from"/v135/@octokit/request-error@5.0.1/denonext/request-error.mjs";function o(e){let n=e.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(n.baseUrl)?"https://github.com":n.baseUrl.replace("/api/v3","")}async function c(e,n,t){let r={baseUrl:o(e),headers:{accept:"application/json"},...t},a=await e(n,r);if("error"in a.data){let i=new h(`${a.data.error_description} (${a.data.error}, ${a.data.error_uri})`,400,{request:e.endpoint.merge(n,r),headers:a.headers});throw i.response=a,i}return a}function j({request:e=k,...n}){let t=o(e);return _({...n,baseUrl:t})}import{request as q}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";async function N(e){let n=e.request||q,t=await c(n,"POST /login/oauth/access_token",{client_id:e.clientId,client_secret:e.clientSecret,code:e.code,redirect_uri:e.redirectUrl}),r={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(e.clientType==="github-app"){if("refresh_token"in t.data){let a=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=u(a,t.data.expires_in),r.refreshTokenExpiresAt=u(a,t.data.refresh_token_expires_in)}delete r.scopes}return{...t,authentication:r}}function u(e,n){return new Date(e+n*1e3).toISOString()}import{request as T}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";async function G(e){let n=e.request||T,t={client_id:e.clientId};return"scopes"in e&&Array.isArray(e.scopes)&&(t.scope=e.scopes.join(" ")),c(n,"POST /login/device/code",t)}import{request as x}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";async function X(e){let n=e.request||x,t=await c(n,"POST /login/oauth/access_token",{client_id:e.clientId,device_code:e.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:e.clientType,clientId:e.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in e&&(r.clientSecret=e.clientSecret),e.clientType==="github-app"){if("refresh_token"in t.data){let a=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=d(a,t.data.expires_in),r.refreshTokenExpiresAt=d(a,t.data.refresh_token_expires_in)}delete r.scopes}return{...t,authentication:r}}function d(e,n){return new Date(e+n*1e3).toISOString()}import{request as S}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";import I from"/v135/btoa-lite@1.0.0/denonext/btoa-lite.mjs";async function te(e){let t=await(e.request||S)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${I(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token}),r={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),e.clientType==="github-app"&&delete r.scopes,{...t,authentication:r}}import{request as y}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";async function ce(e){let n=e.request||y,t=await c(n,"POST /login/oauth/access_token",{client_id:e.clientId,client_secret:e.clientSecret,grant_type:"refresh_token",refresh_token:e.refreshToken}),r=new Date(t.headers.date).getTime(),a={clientType:"github-app",clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:l(r,t.data.expires_in),refreshTokenExpiresAt:l(r,t.data.refresh_token_expires_in)};return{...t,authentication:a}}function l(e,n){return new Date(e+n*1e3).toISOString()}import{request as g}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";import b from"/v135/btoa-lite@1.0.0/denonext/btoa-lite.mjs";async function ue(e){let{request:n,clientType:t,clientId:r,clientSecret:a,token:i,...p}=e,s=await(n||g)("POST /applications/{client_id}/token/scoped",{headers:{authorization:`basic ${b(`${r}:${a}`)}`},client_id:r,access_token:i,...p}),f=Object.assign({clientType:t,clientId:r,clientSecret:a,token:s.data.token},s.data.expires_at?{expiresAt:s.data.expires_at}:{});return{...s,authentication:f}}import{request as A}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";import R from"/v135/btoa-lite@1.0.0/denonext/btoa-lite.mjs";async function fe(e){let n=e.request||A,t=R(`${e.clientId}:${e.clientSecret}`),r=await n("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:e.clientId,access_token:e.token}),a={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(a.expiresAt=r.data.expires_at),e.clientType==="github-app"&&delete a.scopes,{...r,authentication:a}}import{request as $}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";import w from"/v135/btoa-lite@1.0.0/denonext/btoa-lite.mjs";async function ke(e){let n=e.request||$,t=w(`${e.clientId}:${e.clientSecret}`);return n("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:e.clientId,access_token:e.token})}import{request as O}from"/v135/@octokit/request@8.1.6/denonext/request.mjs";import E from"/v135/btoa-lite@1.0.0/denonext/btoa-lite.mjs";async function Se(e){let n=e.request||O,t=E(`${e.clientId}:${e.clientSecret}`);return n("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:e.clientId,access_token:e.token})}export{m as VERSION,te as checkToken,G as createDeviceCode,Se as deleteAuthorization,ke as deleteToken,X as exchangeDeviceCode,N as exchangeWebFlowCode,j as getWebFlowAuthorizationUrl,ce as refreshToken,fe as resetToken,ue as scopeToken};
//# sourceMappingURL=oauth-methods.mjs.map