/* esm.sh - esbuild bundle(@opentelemetry/otlp-transformer@0.43.0) denonext production */
var S;(function(t){t[t.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",t[t.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",t[t.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",t[t.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",t[t.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",t[t.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(S||(S={}));var O=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function s(t){return Object.keys(t).map(function(e){return T(e,t[e])})}function T(t,e){return{key:t,value:N(e)}}function N(t){var e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(N)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(function(r){var n=O(r,2),o=n[0],i=n[1];return T(o,i)})}}:{}}import{hrTimeToNanoseconds as g}from"/v135/@opentelemetry/core@1.17.0/denonext/core.mjs";import*as x from"/v135/@opentelemetry/core@1.17.0/denonext/core.mjs";function C(t,e){var r,n=t.spanContext(),o=t.status,i=e?t.parentSpanId:t.parentSpanId!=null?x.hexToBase64(t.parentSpanId):void 0;return{traceId:e?n.traceId:x.hexToBase64(n.traceId),spanId:e?n.spanId:x.hexToBase64(n.spanId),parentSpanId:i,traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:g(t.startTime),endTimeUnixNano:g(t.endTime),attributes:s(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(D),droppedEventsCount:t.droppedEventsCount,status:{code:o.code,message:o.message},links:t.links.map(function(a){return V(a,e)}),droppedLinksCount:t.droppedLinksCount}}function V(t,e){var r;return{attributes:t.attributes?s(t.attributes):[],spanId:e?t.context.spanId:x.hexToBase64(t.context.spanId),traceId:e?t.context.traceId:x.hexToBase64(t.context.traceId),traceState:(r=t.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function D(t){return{attributes:t.attributes?s(t.attributes):[],name:t.name,timeUnixNano:g(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}var B=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function q(t,e){return{resourceSpans:G(t,e)}}function z(t){var e,r,n=new Map;try{for(var o=B(t),i=o.next();!i.done;i=o.next()){var a=i.value,u=n.get(a.resource);u||(u=new Map,n.set(a.resource,u));var p=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),c=u.get(p);c||(c=[],u.set(p,c)),c.push(a)}}catch(f){e={error:f}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}function G(t,e){for(var r=z(t),n=[],o=r.entries(),i=o.next();!i.done;){for(var a=j(i.value,2),u=a[0],p=a[1],c=[],f=p.values(),l=f.next();!l.done;){var v=l.value;if(v.length>0){var d=v[0].instrumentationLibrary,m=d.name,h=d.version,b=d.schemaUrl,A=v.map(function(E){return C(E,e)});c.push({scope:{name:m,version:h},spans:A,schemaUrl:b})}l=f.next()}var M={resource:{attributes:s(u.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};n.push(M),i=o.next()}return n}import{ValueType as U}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";import{hrTimeToNanoseconds as y}from"/v135/@opentelemetry/core@1.17.0/denonext/core.mjs";import{AggregationTemporality as _,DataPointType as I}from"/v135/@opentelemetry/sdk-metrics@1.17.0/denonext/sdk-metrics.mjs";function R(t){return{resource:{attributes:s(t.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:F(t.scopeMetrics)}}function F(t){return Array.from(t.map(function(e){return{scope:{name:e.scope.name,version:e.scope.version},metrics:e.metrics.map(function(r){return K(r)}),schemaUrl:e.scope.schemaUrl}}))}function K(t){var e={name:t.descriptor.name,description:t.descriptor.description,unit:t.descriptor.unit},r=Q(t.aggregationTemporality);switch(t.dataPointType){case I.SUM:e.sum={aggregationTemporality:r,isMonotonic:t.isMonotonic,dataPoints:L(t)};break;case I.GAUGE:e.gauge={dataPoints:L(t)};break;case I.HISTOGRAM:e.histogram={aggregationTemporality:r,dataPoints:X(t)};break;case I.EXPONENTIAL_HISTOGRAM:e.exponentialHistogram={aggregationTemporality:r,dataPoints:J(t)};break}return e}function H(t,e){var r={attributes:s(t.attributes),startTimeUnixNano:y(t.startTime),timeUnixNano:y(t.endTime)};switch(e){case U.INT:r.asInt=t.value;break;case U.DOUBLE:r.asDouble=t.value;break}return r}function L(t){return t.dataPoints.map(function(e){return H(e,t.descriptor.valueType)})}function X(t){return t.dataPoints.map(function(e){var r=e.value;return{attributes:s(e.attributes),bucketCounts:r.buckets.counts,explicitBounds:r.buckets.boundaries,count:r.count,sum:r.sum,min:r.min,max:r.max,startTimeUnixNano:y(e.startTime),timeUnixNano:y(e.endTime)}})}function J(t){return t.dataPoints.map(function(e){var r=e.value;return{attributes:s(e.attributes),count:r.count,min:r.min,max:r.max,sum:r.sum,positive:{offset:r.positive.offset,bucketCounts:r.positive.bucketCounts},negative:{offset:r.negative.offset,bucketCounts:r.negative.bucketCounts},scale:r.scale,zeroCount:r.zeroCount,startTimeUnixNano:y(e.startTime),timeUnixNano:y(e.endTime)}})}function Q(t){switch(t){case _.DELTA:return 1;case _.CUMULATIVE:return 2}}function W(t){return{resourceMetrics:t.map(function(e){return R(e)})}}import{hexToBase64 as Z,hrTimeToNanoseconds as P}from"/v135/@opentelemetry/core@1.17.0/denonext/core.mjs";var Y=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function $(t,e){return{resourceLogs:et(t,e)}}function tt(t){var e,r,n=new Map;try{for(var o=Y(t),i=o.next();!i.done;i=o.next()){var a=i.value,u=a.resource,p=a.instrumentationScope,c=p.name,f=p.version,l=f===void 0?"":f,v=p.schemaUrl,d=v===void 0?"":v,m=n.get(u);m||(m=new Map,n.set(u,m));var h=c+"@"+l+":"+d,b=m.get(h);b||(b=[],m.set(h,b)),b.push(a)}}catch(A){e={error:A}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}function et(t,e){var r=tt(t);return Array.from(r,function(n){var o=w(n,2),i=o[0],a=o[1];return{resource:{attributes:s(i.attributes),droppedAttributesCount:0},scopeLogs:Array.from(a,function(u){var p=w(u,2),c=p[1],f=c[0].instrumentationScope,l=f.name,v=f.version,d=f.schemaUrl;return{scope:{name:l,version:v},logRecords:c.map(function(m){return rt(m,e)}),schemaUrl:d}}),schemaUrl:void 0}})}function rt(t,e){var r,n,o,i,a;return{timeUnixNano:P(t.hrTime),observedTimeUnixNano:P(t.hrTimeObserved),severityNumber:t.severityNumber,severityText:t.severityText,body:N(t.body),attributes:nt(t.attributes),droppedAttributesCount:0,flags:(r=t.spanContext)===null||r===void 0?void 0:r.traceFlags,traceId:e?(n=t.spanContext)===null||n===void 0?void 0:n.traceId:k((o=t.spanContext)===null||o===void 0?void 0:o.traceId),spanId:e?(i=t.spanContext)===null||i===void 0?void 0:i.spanId:k((a=t.spanContext)===null||a===void 0?void 0:a.spanId)}}function k(t){if(t!==void 0)return Z(t)}function nt(t){return Object.keys(t).map(function(e){return T(e,t[e])})}export{S as ESpanKind,$ as createExportLogsServiceRequest,W as createExportMetricsServiceRequest,q as createExportTraceServiceRequest};
//# sourceMappingURL=otlp-transformer.mjs.map