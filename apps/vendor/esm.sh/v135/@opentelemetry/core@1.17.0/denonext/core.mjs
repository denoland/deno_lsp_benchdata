/* esm.sh - esbuild bundle(@opentelemetry/core@1.17.0) denonext production */
import __Process$ from "node:process";
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);
var br=Object.defineProperty;var Ur=(r,t)=>{for(var e in t)br(r,e,{get:t[e],enumerable:!0})};import{propagation as G}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";import{createContextKey as Gr}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var M=Gr("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Z(r){return r.setValue(M,!0)}function ee(r){return r.deleteValue(M)}function O(r){return r.getValue(M)===!0}var J="=",R=";",s=",",S="baggage",Q=180,$=4096,k=8192;var q={};Ur(q,{getKeyPairs:()=>U,parseKeyPairsIntoRecord:()=>Xr,parsePairKeyValue:()=>A,serializeKeyPairs:()=>b});import{baggageEntryMetadataFromString as Br}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var Dr=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(_){i={error:_}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return a};function b(r){return r.reduce(function(t,e){var n=""+t+(t!==""?s:"")+e;return n.length>k?t:n},"")}function U(r){return r.getAllEntries().map(function(t){var e=Dr(t,2),n=e[0],o=e[1],a=encodeURIComponent(n)+"="+encodeURIComponent(o.value);return o.metadata!==void 0&&(a+=R+o.metadata.toString()),a})}function A(r){var t=r.split(R);if(!(t.length<=0)){var e=t.shift();if(e){var n=e.indexOf(J);if(!(n<=0)){var o=decodeURIComponent(e.substring(0,n).trim()),a=decodeURIComponent(e.substring(n+1).trim()),i;return t.length>0&&(i=Br(t.join(R))),{key:o,value:a,metadata:i}}}}}function Xr(r){return typeof r!="string"||r.length===0?{}:r.split(s).map(function(t){return A(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,e){return t[e.key]=e.value,t},{})}var ue=function(){function r(){}return r.prototype.inject=function(t,e,n){var o=G.getBaggage(t);if(!(!o||O(t))){var a=U(o).filter(function(_){return _.length<=$}).slice(0,Q),i=b(a);i.length>0&&n.set(e,S,i)}},r.prototype.extract=function(t,e,n){var o=n.get(e,S),a=Array.isArray(o)?o.join(s):o;if(!a)return t;var i={};if(a.length===0)return t;var _=a.split(s);return _.forEach(function(E){var f=A(E);if(f){var p={value:f.value};f.metadata&&(p.metadata=f.metadata),i[f.key]=p}}),Object.entries(i).length===0?t:G.setBaggage(t,G.createBaggage(i))},r.prototype.fields=function(){return[S]},r}();var se=function(){function r(t,e){this._monotonicClock=e,this._epochMillis=t.now(),this._performanceMillis=e.now()}return r.prototype.now=function(){var t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t},r}();import{diag as rr}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var tr=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wr=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(_){i={error:_}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return a};function Oe(r){var t,e,n={};if(typeof r!="object"||r==null)return n;try{for(var o=tr(Object.entries(r)),a=o.next();!a.done;a=o.next()){var i=wr(a.value,2),_=i[0],E=i[1];if(!Vr(_)){rr.warn("Invalid attribute key: "+_);continue}if(!jr(E)){rr.warn("Invalid attribute value set for key: "+_);continue}Array.isArray(E)?n[_]=E.slice():n[_]=E}}catch(f){t={error:f}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n}function Vr(r){return typeof r=="string"&&r.length>0}function jr(r){return r==null?!0:Array.isArray(r)?Hr(r):er(r)}function Hr(r){var t,e,n;try{for(var o=tr(r),a=o.next();!a.done;a=o.next()){var i=a.value;if(i!=null){if(!n){if(er(i)){n=typeof i;continue}return!1}if(typeof i!==n)return!1}}}catch(_){t={error:_}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return!0}function er(r){switch(typeof r){case"number":case"boolean":case"string":return!0}return!1}import{diag as Kr}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";function nr(){return function(r){Kr.error(Fr(r))}}function Fr(r){return typeof r=="string"?r:JSON.stringify(Yr(r))}function Yr(r){for(var t={},e=r;e!==null;)Object.getOwnPropertyNames(e).forEach(function(n){if(!t[n]){var o=e[n];o&&(t[n]=String(o))}}),e=Object.getPrototypeOf(e);return t}var or=nr();function Pe(r){or=r}function ar(r){try{or(r)}catch{}}import{DiagLogLevel as T}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var L;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(L||(L={}));var P=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof __global$=="object"?__global$:{};var zr=",",Wr=["OTEL_SDK_DISABLED"];function Zr(r){return Wr.indexOf(r)>-1}var Jr=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Qr(r){return Jr.indexOf(r)>-1}var $r=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function kr(r){return $r.indexOf(r)>-1}var D=1/0,B=128,qr=128,rt=128,X={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:T.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:D,OTEL_ATTRIBUTE_COUNT_LIMIT:B,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:D,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:B,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:D,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:B,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:qr,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:rt,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:L.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function tt(r,t,e){if(!(typeof e[r]>"u")){var n=String(e[r]);t[r]=n.toLowerCase()==="true"}}function et(r,t,e,n,o){if(n===void 0&&(n=-1/0),o===void 0&&(o=1/0),typeof e[r]<"u"){var a=Number(e[r]);isNaN(a)||(a<n?t[r]=n:a>o?t[r]=o:t[r]=a)}}function nt(r,t,e,n){n===void 0&&(n=zr);var o=e[r];typeof o=="string"&&(t[r]=o.split(n).map(function(a){return a.trim()}))}var ot={ALL:T.ALL,VERBOSE:T.VERBOSE,DEBUG:T.DEBUG,INFO:T.INFO,WARN:T.WARN,ERROR:T.ERROR,NONE:T.NONE};function at(r,t,e){var n=e[r];if(typeof n=="string"){var o=ot[n.toUpperCase()];o!=null&&(t[r]=o)}}function m(r){var t={};for(var e in X){var n=e;switch(n){case"OTEL_LOG_LEVEL":at(n,t,r);break;default:if(Zr(n))tt(n,t,r);else if(Qr(n))et(n,t,r);else if(kr(n))nt(n,t,r);else{var o=r[n];typeof o<"u"&&o!==null&&(t[n]=String(o))}}}return t}function ge(){return typeof __Process$<"u"&&__Process$&&__Process$.env?m(__Process$.env):m(P)}function Me(){var r=m(P);return Object.assign({},X,r)}function Ue(r){for(var t=r.length,e="",n=0;n<t;n+=2){var o=r.substring(n,n+2),a=parseInt(o,16);e+=String.fromCharCode(a)}return btoa(e)}var it=8,_t=16,De=function(){function r(){this.generateTraceId=ir(_t),this.generateSpanId=ir(it)}return r}();var d=Array(32);function ir(r){return function(){for(var e=0;e<r*2;e++)d[e]=Math.floor(Math.random()*16)+48,d[e]>=58&&(d[e]+=39);return String.fromCharCode.apply(null,d.slice(0,r*2))}}var v=performance;var _r="1.17.0";import{TelemetrySdkLanguageValues as Et,SemanticResourceAttributes as I}from"/v135/@opentelemetry/semantic-conventions@1.17.0/denonext/semantic-conventions.mjs";var l,He=(l={},l[I.TELEMETRY_SDK_NAME]="opentelemetry",l[I.PROCESS_RUNTIME_NAME]="browser",l[I.TELEMETRY_SDK_LANGUAGE]=Et.WEBJS,l[I.TELEMETRY_SDK_VERSION]=_r,l);function Fe(r){}var Er=9,ft=6,Tt=Math.pow(10,ft),h=Math.pow(10,Er);function y(r){var t=r/1e3,e=Math.trunc(t),n=Math.round(r%1e3*Tt);return[e,n]}function fr(){var r=v.timeOrigin;if(typeof r!="number"){var t=v;r=t.timing&&t.timing.fetchStart}return r}function ut(r){var t=y(fr()),e=y(typeof r=="number"?r:v.now());return pt(t,e)}function We(r){if(Tr(r))return r;if(typeof r=="number")return r<fr()?ut(r):y(r);if(r instanceof Date)return y(r.getTime());throw TypeError("Invalid input type")}function Ze(r,t){var e=t[0]-r[0],n=t[1]-r[1];return n<0&&(e-=1,n+=h),[e,n]}function Je(r){var t=Er,e=""+"0".repeat(t)+r[1]+"Z",n=e.substr(e.length-t-1),o=new Date(r[0]*1e3).toISOString();return o.replace("000Z",n)}function Qe(r){return r[0]*h+r[1]}function $e(r){return r[0]*1e3+r[1]/1e6}function ke(r){return r[0]*1e6+r[1]/1e3}function Tr(r){return Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}function qe(r){return Tr(r)||typeof r=="number"||r instanceof Date}function pt(r,t){var e=[r[0]+t[0],r[1]+t[1]];return e[1]>=h&&(e[1]-=h,e[0]+=1),e}var ur;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(ur||(ur={}));import{diag as pr}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var st=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nn=function(){function r(t){t===void 0&&(t={});var e;this._propagators=(e=t.propagators)!==null&&e!==void 0?e:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,o){return n.concat(o)},[])))}return r.prototype.inject=function(t,e,n){var o,a;try{for(var i=st(this._propagators),_=i.next();!_.done;_=i.next()){var E=_.value;try{E.inject(t,e,n)}catch(f){pr.warn("Failed to inject with "+E.constructor.name+". Err: "+f.message)}}}catch(f){o={error:f}}finally{try{_&&!_.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}},r.prototype.extract=function(t,e,n){return this._propagators.reduce(function(o,a){try{return a.extract(o,e,n)}catch(i){pr.warn("Failed to inject with "+a.constructor.name+". Err: "+i.message)}return o},t)},r.prototype.fields=function(){return this._fields.slice()},r}();import{isSpanContextValid as Lt,trace as Ar,TraceFlags as Pt}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var w="[_0-9a-z-*/]",lt="[a-z]"+w+"{0,255}",ct="[a-z0-9]"+w+"{0,240}@[a-z]"+w+"{0,13}",Ot=new RegExp("^(?:"+lt+"|"+ct+")$"),Rt=/^[ -~]{0,255}[!-~]$/,St=/,|=/;function sr(r){return Ot.test(r)}function lr(r){return Rt.test(r)&&!St.test(r)}var cr=32,At=512,Or=",",Rr="=",Sr=function(){function r(t){this._internalState=new Map,t&&this._parse(t)}return r.prototype.set=function(t,e){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,e),n},r.prototype.unset=function(t){var e=this._clone();return e._internalState.delete(t),e},r.prototype.get=function(t){return this._internalState.get(t)},r.prototype.serialize=function(){var t=this;return this._keys().reduce(function(e,n){return e.push(n+Rr+t.get(n)),e},[]).join(Or)},r.prototype._parse=function(t){t.length>At||(this._internalState=t.split(Or).reverse().reduce(function(e,n){var o=n.trim(),a=o.indexOf(Rr);if(a!==-1){var i=o.slice(0,a),_=o.slice(a+1,n.length);sr(i)&&lr(_)&&e.set(i,_)}return e},new Map),this._internalState.size>cr&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,cr))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var t=new r;return t._internalState=new Map(this._internalState),t},r}();var V="traceparent",j="tracestate",mt="00",dt="(?!ff)[\\da-f]{2}",vt="(?![0]{32})[\\da-f]{32}",It="(?![0]{16})[\\da-f]{16}",ht="[\\da-f]{2}",yt=new RegExp("^\\s?("+dt+")-("+vt+")-("+It+")-("+ht+")(-.*)?\\s?$");function gt(r){var t=yt.exec(r);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var pn=function(){function r(){}return r.prototype.inject=function(t,e,n){var o=Ar.getSpanContext(t);if(!(!o||O(t)||!Lt(o))){var a=mt+"-"+o.traceId+"-"+o.spanId+"-0"+Number(o.traceFlags||Pt.NONE).toString(16);n.set(e,V,a),o.traceState&&n.set(e,j,o.traceState.serialize())}},r.prototype.extract=function(t,e,n){var o=n.get(e,V);if(!o)return t;var a=Array.isArray(o)?o[0]:o;if(typeof a!="string")return t;var i=gt(a);if(!i)return t;i.isRemote=!0;var _=n.get(e,j);if(_){var E=Array.isArray(_)?_.join(","):_;i.traceState=new Sr(typeof E=="string"?E:void 0)}return Ar.setSpanContext(t,i)},r.prototype.fields=function(){return[V,j]},r}();import{createContextKey as Nt}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var H=Nt("OpenTelemetry SDK Context Key RPC_METADATA"),Lr;(function(r){r.HTTP="http"})(Lr||(Lr={}));function cn(r,t){return r.setValue(H,t)}function On(r){return r.deleteValue(H)}function Rn(r){return r.getValue(H)}import{SamplingDecision as Ct}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var K=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:Ct.NOT_RECORD}},r.prototype.toString=function(){return"AlwaysOffSampler"},r}();import{SamplingDecision as xt}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var g=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:xt.RECORD_AND_SAMPLED}},r.prototype.toString=function(){return"AlwaysOnSampler"},r}();import{isSpanContextValid as Mt,TraceFlags as Pr,trace as bt}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var yn=function(){function r(t){var e,n,o,a;this._root=t.root,this._root||(ar(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new g),this._remoteParentSampled=(e=t.remoteParentSampled)!==null&&e!==void 0?e:new g,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new K,this._localParentSampled=(o=t.localParentSampled)!==null&&o!==void 0?o:new g,this._localParentNotSampled=(a=t.localParentNotSampled)!==null&&a!==void 0?a:new K}return r.prototype.shouldSample=function(t,e,n,o,a,i){var _=bt.getSpanContext(t);return!_||!Mt(_)?this._root.shouldSample(t,e,n,o,a,i):_.isRemote?_.traceFlags&Pr.SAMPLED?this._remoteParentSampled.shouldSample(t,e,n,o,a,i):this._remoteParentNotSampled.shouldSample(t,e,n,o,a,i):_.traceFlags&Pr.SAMPLED?this._localParentSampled.shouldSample(t,e,n,o,a,i):this._localParentNotSampled.shouldSample(t,e,n,o,a,i)},r.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},r}();import{SamplingDecision as mr,isValidTraceId as Ut}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var Cn=function(){function r(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return r.prototype.shouldSample=function(t,e){return{decision:Ut(e)&&this._accumulate(e)<this._upperBound?mr.RECORD_AND_SAMPLED:mr.NOT_RECORD}},r.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},r.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},r.prototype._accumulate=function(t){for(var e=0,n=0;n<t.length/8;n++){var o=n*8,a=parseInt(t.slice(o,o+8),16);e=(e^a)>>>0}return e},r}();var Gt="[object Object]",Dt="[object Null]",Bt="[object Undefined]",Xt=Function.prototype,dr=Xt.toString,wt=dr.call(Object),Vt=jt(Object.getPrototypeOf,Object),vr=Object.prototype,Ir=vr.hasOwnProperty,u=Symbol?Symbol.toStringTag:void 0,hr=vr.toString;function jt(r,t){return function(e){return r(t(e))}}function F(r){if(!Ht(r)||Kt(r)!==Gt)return!1;var t=Vt(r);if(t===null)return!0;var e=Ir.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&dr.call(e)===wt}function Ht(r){return r!=null&&typeof r=="object"}function Kt(r){return r==null?r===void 0?Bt:Dt:u&&u in Object(r)?Ft(r):Yt(r)}function Ft(r){var t=Ir.call(r,u),e=r[u],n=!1;try{r[u]=void 0,n=!0}catch{}var o=hr.call(r);return n&&(t?r[u]=e:delete r[u]),o}function Yt(r){return hr.call(r)}var zt=20;function Un(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=r.shift(),n=new WeakMap;r.length>0;)e=gr(e,r.shift(),0,n);return e}function Y(r){return C(r)?r.slice():r}function gr(r,t,e,n){e===void 0&&(e=0);var o;if(!(e>zt)){if(e++,N(r)||N(t)||Nr(t))o=Y(t);else if(C(r)){if(o=r.slice(),C(t))for(var a=0,i=t.length;a<i;a++)o.push(Y(t[a]));else if(c(t))for(var _=Object.keys(t),a=0,i=_.length;a<i;a++){var E=_[a];o[E]=Y(t[E])}}else if(c(r))if(c(t)){if(!Wt(r,t))return t;o=Object.assign({},r);for(var _=Object.keys(t),a=0,i=_.length;a<i;a++){var E=_[a],f=t[E];if(N(f))typeof f>"u"?delete o[E]:o[E]=f;else{var p=o[E],x=f;if(yr(r,E,n)||yr(t,E,n))delete o[E];else{if(c(p)&&c(x)){var z=n.get(p)||[],W=n.get(x)||[];z.push({obj:r,key:E}),W.push({obj:t,key:E}),n.set(p,z),n.set(x,W)}o[E]=gr(o[E],f,e,n)}}}}else o=t;return o}}function yr(r,t,e){for(var n=e.get(r[t])||[],o=0,a=n.length;o<a;o++){var i=n[o];if(i.key===t&&i.obj===r)return!0}return!1}function C(r){return Array.isArray(r)}function Nr(r){return typeof r=="function"}function c(r){return!N(r)&&!C(r)&&!Nr(r)&&typeof r=="object"}function N(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r>"u"||r instanceof Date||r instanceof RegExp||r===null}function Wt(r,t){return!(!F(r)||!F(t))}var Zt=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jt=function(r){Zt(t,r);function t(e){var n=r.call(this,e)||this;return Object.setPrototypeOf(n,t.prototype),n}return t}(Error);function Dn(r,t){var e,n=new Promise(function(a,i){e=setTimeout(function(){i(new Jt("Operation timed out."))},t)});return Promise.race([r,n]).then(function(o){return clearTimeout(e),o},function(o){throw clearTimeout(e),o})}var Qt=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function $t(r,t){return typeof t=="string"?r===t:!!r.match(t)}function Xn(r,t){var e,n;if(!t)return!1;try{for(var o=Qt(t),a=o.next();!a.done;a=o.next()){var i=a.value;if($t(r,i))return!0}}catch(_){e={error:_}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return!1}function Vn(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Cr=function(){function r(){var t=this;this._promise=new Promise(function(e,n){t._resolve=e,t._reject=n})}return Object.defineProperty(r.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),r.prototype.resolve=function(t){this._resolve(t)},r.prototype.reject=function(t){this._reject(t)},r}();var kt=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(_){i={error:_}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return a},qt=function(r,t,e){if(e||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))},Fn=function(){function r(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new Cr}return Object.defineProperty(r.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),r.prototype.call=function(){for(var t,e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,qt([this._that],kt(n),!1))).then(function(a){return e._deferred.resolve(a)},function(a){return e._deferred.reject(a)})}catch(a){this._deferred.reject(a)}}return this._deferred.promise},r}();import{context as xr}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";function Mr(r,t){return new Promise(function(e){xr.with(Z(xr.active()),function(){r.export(t,function(n){e(n)})})})}var Qn={_export:Mr};export{K as AlwaysOffSampler,g as AlwaysOnSampler,se as AnchoredClock,Fn as BindOnceFuture,nn as CompositePropagator,B as DEFAULT_ATTRIBUTE_COUNT_LIMIT,D as DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,X as DEFAULT_ENVIRONMENT,qr as DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,rt as DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,ur as ExportResultCode,yn as ParentBasedSampler,Lr as RPCType,De as RandomIdGenerator,He as SDK_INFO,V as TRACE_PARENT_HEADER,j as TRACE_STATE_HEADER,Jt as TimeoutError,Cn as TraceIdRatioBasedSampler,Sr as TraceState,L as TracesSamplerValues,_r as VERSION,ue as W3CBaggagePropagator,pn as W3CTraceContextPropagator,P as _globalThis,pt as addHrTimes,q as baggageUtils,Dn as callWithTimeout,On as deleteRPCMetadata,Me as getEnv,ge as getEnvWithoutDefaults,Rn as getRPCMetadata,fr as getTimeOrigin,ar as globalErrorHandler,Ue as hexToBase64,ut as hrTime,Ze as hrTimeDuration,ke as hrTimeToMicroseconds,$e as hrTimeToMilliseconds,Qe as hrTimeToNanoseconds,Je as hrTimeToTimeStamp,Qn as internal,Vr as isAttributeKey,jr as isAttributeValue,qe as isTimeInput,Tr as isTimeInputHrTime,O as isTracingSuppressed,Xn as isUrlIgnored,Vn as isWrapped,nr as loggingErrorHandler,Un as merge,y as millisToHrTime,v as otperformance,m as parseEnvironment,gt as parseTraceParent,Oe as sanitizeAttributes,Pe as setGlobalErrorHandler,cn as setRPCMetadata,Z as suppressTracing,We as timeInputToHrTime,Fe as unrefTimer,ee as unsuppressTracing,$t as urlMatches};
//# sourceMappingURL=core.mjs.map