/* esm.sh - esbuild bundle(@opentelemetry/sdk-trace-web@1.17.0) denonext production */
import{BasicTracerProvider as R}from"/v135/@opentelemetry/sdk-trace-base@1.17.0/denonext/sdk-trace-base.mjs";import{ROOT_CONTEXT as v}from"/v135/@opentelemetry/api@1.6.0/denonext/api.mjs";var D=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),o,i=[],u;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return i},y=function(t,r,e){if(e||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))},h=function(){function t(){this._enabled=!1,this._currentContext=v}return t.prototype._bindFunction=function(r,e){r===void 0&&(r=v);var n=this,o=function(){for(var i=this,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return n.with(r,function(){return e.apply(i,u)})};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),o},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(r,e){return r===void 0&&(r=this.active()),typeof e=="function"?this._bindFunction(r,e):e},t.prototype.disable=function(){return this._currentContext=v,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=v,this)},t.prototype.with=function(r,e,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var u=this._currentContext;this._currentContext=r||v;try{return e.call.apply(e,y([n],D(o),!1))}finally{this._currentContext=u}},t}();var A=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),F=function(t){A(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,e)||this;if(e.contextManager)throw"contextManager should be defined in register method not in constructor";if(e.propagator)throw"propagator should be defined in register method not in constructor";return n}return r.prototype.register=function(e){e===void 0&&(e={}),e.contextManager===void 0&&(e.contextManager=new h),e.contextManager&&e.contextManager.enable(),t.prototype.register.call(this,e)},r}(R);var a;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(a||(a={}));import{hrTimeToNanoseconds as _,timeInputToHrTime as c,urlMatches as x}from"/v135/@opentelemetry/core@1.17.0/denonext/core.mjs";import{SemanticAttributes as s}from"/v135/@opentelemetry/semantic-conventions@1.17.0/denonext/semantic-conventions.mjs";var N;function M(){return N||(N=document.createElement("a")),N}function C(t,r){return r in t}function l(t,r,e){if(C(e,r)&&typeof e[r]=="number")return t.addEvent(r,e[r]),t}function m(t,r){l(t,a.FETCH_START,r),l(t,a.DOMAIN_LOOKUP_START,r),l(t,a.DOMAIN_LOOKUP_END,r),l(t,a.CONNECT_START,r),C(r,"name")&&r.name.startsWith("https:")&&l(t,a.SECURE_CONNECTION_START,r),l(t,a.CONNECT_END,r),l(t,a.REQUEST_START,r),l(t,a.RESPONSE_START,r),l(t,a.RESPONSE_END,r);var e=r[a.ENCODED_BODY_SIZE];e!==void 0&&t.setAttribute(s.HTTP_RESPONSE_CONTENT_LENGTH,e);var n=r[a.DECODED_BODY_SIZE];n!==void 0&&e!==n&&t.setAttribute(s.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,n)}function L(t){return t.slice().sort(function(r,e){var n=r[a.FETCH_START],o=e[a.FETCH_START];return n>o?1:n<o?-1:0})}function X(t,r,e,n,o,i){o===void 0&&(o=new WeakSet);var u=O(t);t=u.toString();var d=I(t,r,e,n,o,i);if(d.length===0)return{mainRequest:void 0};if(d.length===1)return{mainRequest:d[0]};var f=L(d);if(u.origin!==location.origin&&f.length>1){var E=f[0],T=b(f,E[a.RESPONSE_END],e),p=E[a.RESPONSE_END],S=T[a.FETCH_START];return S<p&&(T=E,E=void 0),{corsPreFlightRequest:E,mainRequest:T}}else return{mainRequest:d[0]}}function b(t,r,e){for(var n=_(e),o=_(c(r)),i=t[1],u,d=t.length,f=1;f<d;f++){var E=t[f],T=_(c(E[a.FETCH_START])),p=_(c(E[a.RESPONSE_END])),S=n-p;T>=o&&(!u||S<u)&&(u=S,i=E)}return i}function I(t,r,e,n,o,i){var u=_(r),d=_(e),f=n.filter(function(E){var T=_(c(E[a.FETCH_START])),p=_(c(E[a.RESPONSE_END]));return E.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&E.name===t&&T>=u&&p<=d});return f.length>0&&(f=f.filter(function(E){return!o.has(E)})),f}function O(t){if(typeof URL=="function")return new URL(t,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);var r=M();return r.href=t,r}function Y(t){var r=O(t);return r.href}function w(t,r){if(t.nodeType===Node.DOCUMENT_NODE)return"/";var e=H(t,r);if(r&&e.indexOf("@id")>0)return e;var n="";return t.parentNode&&(n+=w(t.parentNode,!1)),n+=e,n}function U(t){if(!t.parentNode)return 0;var r=[t.nodeType];t.nodeType===Node.CDATA_SECTION_NODE&&r.push(Node.TEXT_NODE);var e=Array.from(t.parentNode.childNodes);return e=e.filter(function(n){var o=n.localName;return r.indexOf(n.nodeType)>=0&&o===t.localName}),e.length>=1?e.indexOf(t)+1:0}function H(t,r){var e=t.nodeType,n=U(t),o="";if(e===Node.ELEMENT_NODE){var i=t.getAttribute("id");if(r&&i)return'//*[@id="'+i+'"]';o=t.localName}else if(e===Node.TEXT_NODE||e===Node.CDATA_SECTION_NODE)o="text()";else if(e===Node.COMMENT_NODE)o="comment()";else return"";return o&&n>1?"/"+o+"["+n+"]":"/"+o}function Z(t,r){var e=r||[];(typeof e=="string"||e instanceof RegExp)&&(e=[e]);var n=O(t);return n.origin===location.origin?!0:e.some(function(o){return x(t,o)})}export*from"/v135/@opentelemetry/sdk-trace-base@1.17.0/denonext/sdk-trace-base.mjs";export{a as PerformanceTimingNames,h as StackContextManager,F as WebTracerProvider,l as addSpanNetworkEvent,m as addSpanNetworkEvents,w as getElementXPath,X as getResource,C as hasKey,Y as normalizeUrl,O as parseUrl,Z as shouldPropagateTraceHeaders,L as sortResources};
//# sourceMappingURL=sdk-trace-web.mjs.map