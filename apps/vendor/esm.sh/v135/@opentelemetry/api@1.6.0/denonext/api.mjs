/* esm.sh - esbuild bundle(@opentelemetry/api@1.6.0) denonext production */
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);
var nt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof __global$=="object"?__global$:{};var _="1.6.0";var ot=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Lt(t){var r=new Set([t]),e=new Set,n=t.match(ot);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(a.prerelease!=null)return function(p){return p===t};function o(u){return e.add(u),!1}function i(u){return r.add(u),!0}return function(p){if(r.has(p))return!0;if(e.has(p))return!1;var s=p.match(ot);if(!s)return o(p);var g={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};return g.prerelease!=null||a.major!==g.major?o(p):a.major===0?a.minor===g.minor&&a.patch<=g.patch?i(p):o(p):a.minor<=g.minor?i(p):o(p)}}var at=Lt(_);var Ut=_.split(".")[0],x=Symbol.for("opentelemetry.js.api."+Ut),E=nt;function v(t,r,e,n){var a;n===void 0&&(n=!1);var o=E[x]=(a=E[x])!==null&&a!==void 0?a:{version:_};if(!n&&o[t]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return e.error(i.stack||i.message),!1}if(o.version!==_){var i=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+_);return e.error(i.stack||i.message),!1}return o[t]=r,e.debug("@opentelemetry/api: Registered a global for "+t+" v"+_+"."),!0}function l(t){var r,e,n=(r=E[x])===null||r===void 0?void 0:r.version;if(!(!n||!at(n)))return(e=E[x])===null||e===void 0?void 0:e[t]}function m(t,r){r.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+_+".");var e=E[x];e&&delete e[t]}var jt=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,o=[],i;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(u){i={error:u}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return o},Xt=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},it=function(){function t(r){this._namespace=r.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return A("debug",this._namespace,r)},t.prototype.error=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return A("error",this._namespace,r)},t.prototype.info=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return A("info",this._namespace,r)},t.prototype.warn=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return A("warn",this._namespace,r)},t.prototype.verbose=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return A("verbose",this._namespace,r)},t}();function A(t,r,e){var n=l("diag");if(n)return e.unshift(r),n[t].apply(n,Xt([],jt(e),!1))}var c;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(c||(c={}));function ut(t,r){t<c.NONE?t=c.NONE:t>c.ALL&&(t=c.ALL),r=r||{};function e(n,a){var o=r[n];return typeof o=="function"&&t>=a?o.bind(r):function(){}}return{error:e("error",c.ERROR),warn:e("warn",c.WARN),info:e("info",c.INFO),debug:e("debug",c.DEBUG),verbose:e("verbose",c.VERBOSE)}}var kt=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,o=[],i;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(u){i={error:u}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return o},Kt=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},Ft="diag",f=function(){function t(){function r(a){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=l("diag");if(u)return u[a].apply(u,Kt([],kt(o),!1))}}var e=this,n=function(a,o){var i,u,p;if(o===void 0&&(o={logLevel:c.INFO}),a===e){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error((i=s.stack)!==null&&i!==void 0?i:s.message),!1}typeof o=="number"&&(o={logLevel:o});var g=l("diag"),rt=ut((u=o.logLevel)!==null&&u!==void 0?u:c.INFO,a);if(g&&!o.suppressOverrideMessage){var et=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+et),rt.warn("Current logger will overwrite one already registered from "+et)}return v("diag",rt,e,!0)};e.setLogger=n,e.disable=function(){m(Ft,e)},e.createComponentLogger=function(a){return new it(a)},e.verbose=r("verbose"),e.debug=r("debug"),e.info=r("info"),e.warn=r("warn"),e.error=r("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();var Yt=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,o=[],i;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(u){i={error:u}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return o},zt=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=function(){function t(r){this._entries=r?new Map(r):new Map}return t.prototype.getEntry=function(r){var e=this._entries.get(r);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(r){var e=Yt(r,2),n=e[0],a=e[1];return[n,a]})},t.prototype.setEntry=function(r,e){var n=new t(this._entries);return n._entries.set(r,e),n},t.prototype.removeEntry=function(r){var e=new t(this._entries);return e._entries.delete(r),e},t.prototype.removeEntries=function(){for(var r,e,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var o=new t(this._entries);try{for(var i=zt(n),u=i.next();!u.done;u=i.next()){var p=u.value;o._entries.delete(p)}}catch(s){r={error:s}}finally{try{u&&!u.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}return o},t.prototype.clear=function(){return new t},t}();var ct=Symbol("BaggageEntryMetadata");var Wt=f.instance();function ft(t){return t===void 0&&(t={}),new pt(new Map(Object.entries(t)))}function Ht(t){return typeof t!="string"&&(Wt.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:ct,toString:function(){return t}}}function b(t){return Symbol.for(t)}var $t=function(){function t(r){var e=this;e._currentContext=r?new Map(r):new Map,e.getValue=function(n){return e._currentContext.get(n)},e.setValue=function(n,a){var o=new t(e._currentContext);return o._currentContext.set(n,a),o},e.deleteValue=function(n){var a=new t(e._currentContext);return a._currentContext.delete(n),a}}return t}(),w=new $t;var D=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Qt=function(){function t(){function r(n){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(console){var i=console[n];if(typeof i!="function"&&(i=console.log),typeof i=="function")return i.apply(console,a)}}}for(var e=0;e<D.length;e++)this[D[e].n]=r(D[e].c)}return t}();var h=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qt=function(){function t(){}return t.prototype.createHistogram=function(r,e){return ar},t.prototype.createCounter=function(r,e){return or},t.prototype.createUpDownCounter=function(r,e){return ir},t.prototype.createObservableGauge=function(r,e){return pr},t.prototype.createObservableCounter=function(r,e){return ur},t.prototype.createObservableUpDownCounter=function(r,e){return cr},t.prototype.addBatchObservableCallback=function(r,e){},t.prototype.removeBatchObservableCallback=function(r){},t}();var G=function(){function t(){}return t}();var Jt=function(t){h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.add=function(e,n){},r}(G);var Zt=function(t){h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.add=function(e,n){},r}(G);var tr=function(t){h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.record=function(e,n){},r}(G);var V=function(){function t(){}return t.prototype.addCallback=function(r){},t.prototype.removeCallback=function(r){},t}();var rr=function(t){h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(V);var er=function(t){h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(V);var nr=function(t){h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(V);var B=new qt,or=new Jt,ar=new tr,ir=new Zt,ur=new rr,pr=new er,cr=new nr;function fr(){return B}var L;(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(L||(L={}));var U={get:function(t,r){if(t!=null)return t[r]},keys:function(t){return t==null?[]:Object.keys(t)}},j={set:function(t,r,e){t!=null&&(t[r]=e)}};var sr=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,o=[],i;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(u){i={error:u}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return o},lr=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},st=function(){function t(){}return t.prototype.active=function(){return w},t.prototype.with=function(r,e,n){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return e.call.apply(e,lr([n],sr(a),!1))},t.prototype.bind=function(r,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();var gr=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,o=[],i;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(u){i={error:u}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return o},vr=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},X="context",mr=new st,y=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(r){return v(X,r,f.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(r,e,n){for(var a,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(a=this._getContextManager()).with.apply(a,vr([r,e,n],gr(o),!1))},t.prototype.bind=function(r,e){return this._getContextManager().bind(r,e)},t.prototype._getContextManager=function(){return l(X)||mr},t.prototype.disable=function(){this._getContextManager().disable(),m(X,f.instance())},t}();var N;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(N||(N={}));var O="0000000000000000",P="00000000000000000000000000000000",k={traceId:P,spanId:O,traceFlags:N.NONE};var d=function(){function t(r){r===void 0&&(r=k),this._spanContext=r}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(r,e){return this},t.prototype.setAttributes=function(r){return this},t.prototype.addEvent=function(r,e){return this},t.prototype.setStatus=function(r){return this},t.prototype.updateName=function(r){return this},t.prototype.end=function(r){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(r,e){},t}();var K=b("OpenTelemetry Context Key SPAN");function S(t){return t.getValue(K)||void 0}function lt(){return S(y.getInstance().active())}function T(t,r){return t.setValue(K,r)}function gt(t){return t.deleteValue(K)}function vt(t,r){return T(t,new d(r))}function C(t){var r;return(r=S(t))===null||r===void 0?void 0:r.spanContext()}var _r=/^([0-9a-f]{32})$/i,yr=/^[0-9a-f]{16}$/i;function mt(t){return _r.test(t)&&t!==P}function _t(t){return yr.test(t)&&t!==O}function I(t){return mt(t.traceId)&&_t(t.spanId)}function yt(t){return new d(t)}var F=y.getInstance(),R=function(){function t(){}return t.prototype.startSpan=function(r,e,n){n===void 0&&(n=F.active());var a=!!e?.root;if(a)return new d;var o=n&&C(n);return dr(o)&&I(o)?new d(o):new d},t.prototype.startActiveSpan=function(r,e,n,a){var o,i,u;if(!(arguments.length<2)){arguments.length===2?u=e:arguments.length===3?(o=e,u=n):(o=e,i=n,u=a);var p=i??F.active(),s=this.startSpan(r,o,p),g=T(p,s);return F.with(g,u,void 0,s)}},t}();function dr(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var hr=new R,Y=function(){function t(r,e,n,a){this._provider=r,this.name=e,this.version=n,this.options=a}return t.prototype.startSpan=function(r,e,n){return this._getTracer().startSpan(r,e,n)},t.prototype.startActiveSpan=function(r,e,n,a){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var r=this._provider.getDelegateTracer(this.name,this.version,this.options);return r?(this._delegate=r,this._delegate):hr},t}();var dt=function(){function t(){}return t.prototype.getTracer=function(r,e,n){return new R},t}();var xr=new dt,M=function(){function t(){}return t.prototype.getTracer=function(r,e,n){var a;return(a=this.getDelegateTracer(r,e,n))!==null&&a!==void 0?a:new Y(this,r,e,n)},t.prototype.getDelegate=function(){var r;return(r=this._delegate)!==null&&r!==void 0?r:xr},t.prototype.setDelegate=function(r){this._delegate=r},t.prototype.getDelegateTracer=function(r,e,n){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(r,e,n)},t}();var z;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(z||(z={}));var W;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(W||(W={}));var H;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(H||(H={}));var $="[_0-9a-z-*/]",Er="[a-z]"+$+"{0,255}",Ar="[a-z0-9]"+$+"{0,240}@[a-z]"+$+"{0,13}",br=new RegExp("^(?:"+Er+"|"+Ar+")$"),Nr=/^[ -~]{0,255}[!-~]$/,Tr=/,|=/;function ht(t){return br.test(t)}function xt(t){return Nr.test(t)&&!Tr.test(t)}var Et=32,Ir=512,At=",",bt="=",Nt=function(){function t(r){this._internalState=new Map,r&&this._parse(r)}return t.prototype.set=function(r,e){var n=this._clone();return n._internalState.has(r)&&n._internalState.delete(r),n._internalState.set(r,e),n},t.prototype.unset=function(r){var e=this._clone();return e._internalState.delete(r),e},t.prototype.get=function(r){return this._internalState.get(r)},t.prototype.serialize=function(){var r=this;return this._keys().reduce(function(e,n){return e.push(n+bt+r.get(n)),e},[]).join(At)},t.prototype._parse=function(r){r.length>Ir||(this._internalState=r.split(At).reverse().reduce(function(e,n){var a=n.trim(),o=a.indexOf(bt);if(o!==-1){var i=a.slice(0,o),u=a.slice(o+1,n.length);ht(i)&&xt(u)&&e.set(i,u)}return e},new Map),this._internalState.size>Et&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Et))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var r=new t;return r._internalState=new Map(this._internalState),r},t}();function Or(t){return new Nt(t)}var Tt=y.getInstance();var It=f.instance();var Pr=function(){function t(){}return t.prototype.getMeter=function(r,e,n){return B},t}();var Ot=new Pr;var Q="metrics",Pt=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(r){return v(Q,r,f.instance())},t.prototype.getMeterProvider=function(){return l(Q)||Ot},t.prototype.getMeter=function(r,e,n){return this.getMeterProvider().getMeter(r,e,n)},t.prototype.disable=function(){m(Q,f.instance())},t}();var St=Pt.getInstance();var Ct=function(){function t(){}return t.prototype.inject=function(r,e){},t.prototype.extract=function(r,e){return r},t.prototype.fields=function(){return[]},t}();var q=b("OpenTelemetry Baggage Key");function J(t){return t.getValue(q)||void 0}function Rt(){return J(y.getInstance().active())}function Mt(t,r){return t.setValue(q,r)}function wt(t){return t.deleteValue(q)}var Z="propagation",Sr=new Ct,Dt=function(){function t(){this.createBaggage=ft,this.getBaggage=J,this.getActiveBaggage=Rt,this.setBaggage=Mt,this.deleteBaggage=wt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(r){return v(Z,r,f.instance())},t.prototype.inject=function(r,e,n){return n===void 0&&(n=j),this._getGlobalPropagator().inject(r,e,n)},t.prototype.extract=function(r,e,n){return n===void 0&&(n=U),this._getGlobalPropagator().extract(r,e,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){m(Z,f.instance())},t.prototype._getGlobalPropagator=function(){return l(Z)||Sr},t}();var Gt=Dt.getInstance();var tt="trace",Vt=function(){function t(){this._proxyTracerProvider=new M,this.wrapSpanContext=yt,this.isSpanContextValid=I,this.deleteSpan=gt,this.getSpan=S,this.getActiveSpan=lt,this.getSpanContext=C,this.setSpan=T,this.setSpanContext=vt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(r){var e=v(tt,this._proxyTracerProvider,f.instance());return e&&this._proxyTracerProvider.setDelegate(r),e},t.prototype.getTracerProvider=function(){return l(tt)||this._proxyTracerProvider},t.prototype.getTracer=function(r,e){return this.getTracerProvider().getTracer(r,e)},t.prototype.disable=function(){m(tt,f.instance()),this._proxyTracerProvider=new M},t}();var Bt=Vt.getInstance();var Pn={context:Tt,diag:It,metrics:St,propagation:Gt,trace:Bt};export{Qt as DiagConsoleLogger,c as DiagLogLevel,O as INVALID_SPANID,k as INVALID_SPAN_CONTEXT,P as INVALID_TRACEID,Y as ProxyTracer,M as ProxyTracerProvider,w as ROOT_CONTEXT,z as SamplingDecision,W as SpanKind,H as SpanStatusCode,N as TraceFlags,L as ValueType,Ht as baggageEntryMetadataFromString,Tt as context,b as createContextKey,fr as createNoopMeter,Or as createTraceState,Pn as default,U as defaultTextMapGetter,j as defaultTextMapSetter,It as diag,I as isSpanContextValid,_t as isValidSpanId,mt as isValidTraceId,St as metrics,Gt as propagation,Bt as trace};
//# sourceMappingURL=api.mjs.map