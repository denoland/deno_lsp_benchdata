/* esm.sh - esbuild bundle(tar@6.2.0) denonext production */
import __Process$ from "node:process";
import { Buffer as __Buffer$ } from "node:buffer";
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);
import * as __0$ from "/v135/minipass@5.0.0/denonext/minipass.mjs";
import * as __1$ from "node:fs";
import * as __2$ from "/v135/fs-minipass@2.1.0/denonext/fs-minipass.mjs";
import * as __3$ from "node:path";
import * as __4$ from "node:path";
import * as __5$ from "node:fs";
import * as __6$ from "/v135/fs-minipass@2.1.0/denonext/fs-minipass.mjs";
import * as __7$ from "node:path";
import * as __8$ from "node:path";
import * as __9$ from "/v135/fs-minipass@2.1.0/denonext/fs-minipass.mjs";
import * as __a$ from "node:path";
import * as __b$ from "/v135/minipass@5.0.0/denonext/minipass.mjs";
import * as __c$ from "/v135/minizlib@2.1.2/denonext/minizlib.mjs";
import * as __d$ from "/v135/yallist@4.0.0/denonext/yallist.mjs";
import * as __e$ from "node:fs";
import * as __f$ from "node:path";
import * as __10$ from "node:assert";
import * as __11$ from "node:fs";
import * as __12$ from "/v135/fs-minipass@2.1.0/denonext/fs-minipass.mjs";
import * as __13$ from "node:path";
import * as __14$ from "node:crypto";
import * as __15$ from "node:fs";
import * as __16$ from "/v135/fs-minipass@2.1.0/denonext/fs-minipass.mjs";
import * as __17$ from "node:path";
import * as __18$ from "node:events";
import * as __19$ from "/v135/yallist@4.0.0/denonext/yallist.mjs";
import * as __1a$ from "/v135/minizlib@2.1.2/denonext/minizlib.mjs";
import * as __1b$ from "node:process";
import * as __1c$ from "node:path";
import * as __1d$ from "node:fs";
import * as __1e$ from "/v135/minipass@5.0.0/denonext/minipass.mjs";
import * as __1f$ from "node:fs";
import * as __20$ from "node:path";
import * as __21$ from "/v135/mkdirp@1.0.4/denonext/mkdirp.mjs";
import * as __22$ from "node:fs";
import * as __23$ from "node:path";
import * as __24$ from "/v135/chownr@2.0.0/denonext/chownr.mjs";
import * as __25$ from "node:assert";
import * as __26$ from "node:path";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"minipass":return e(__0$);case"fs":return e(__1$);case"fs-minipass":return e(__2$);case"path":return e(__3$);case"minizlib":return e(__c$);case"yallist":return e(__d$);case"assert":return e(__10$);case"crypto":return e(__14$);case"events":return e(__18$);case"process":return e(__1b$);case"mkdirp":return e(__21$);case"chownr":return e(__24$);default:throw new Error("module \""+n+"\" not found");}};
var sn=Object.create;var rt=Object.defineProperty;var nn=Object.getOwnPropertyDescriptor;var rn=Object.getOwnPropertyNames;var hn=Object.getPrototypeOf,on=Object.prototype.hasOwnProperty;var f=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var S=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),an=(i,e)=>{for(var t in e)rt(i,t,{get:e[t],enumerable:!0})},nt=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of rn(e))!on.call(i,n)&&n!==t&&rt(i,n,{get:()=>e[n],enumerable:!(s=nn(e,n))||s.enumerable});return i},X=(i,e,t)=>(nt(i,e,"default"),t&&nt(t,e,"default")),oi=(i,e,t)=>(t=i!=null?sn(hn(i)):{},nt(e||!i||!i.__esModule?rt(t,"default",{value:i,enumerable:!0}):t,i));var ie=S((yh,li)=>{"use strict";var ai=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);li.exports=i=>i?Object.keys(i).map(e=>[ai.has(e)?ai.get(e):e,i[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var se=S((gh,ci)=>{var ln=__Process$.env.TESTING_TAR_FAKE_PLATFORM||__Process$.platform;ci.exports=ln!=="win32"?i=>i:i=>i&&i.replace(/\\/g,"/")});var Ee=S((Eh,ui)=>{"use strict";var{Minipass:cn}=f("minipass"),ht=se(),ot=Symbol("slurp");ui.exports=class extends cn{constructor(e,t,s){switch(super(),this.pause(),this.extended=t,this.globalExtended=s,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=ht(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=ht(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[ot](t),s&&this[ot](s,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let s=this.remain,n=this.blockRemain;return this.remain=Math.max(0,s-t),this.blockRemain=Math.max(0,n-t),this.ignore?!0:s>=t?super.write(e):super.write(e.slice(0,s))}[ot](e,t){for(let s in e)e[s]!==null&&e[s]!==void 0&&!(t&&s==="path")&&(this[s]=s==="path"||s==="linkpath"?ht(e[s]):e[s])}}});var at=S(ke=>{"use strict";ke.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);ke.code=new Map(Array.from(ke.name).map(i=>[i[1],i[0]]))});var pi=S((xh,fi)=>{"use strict";var un=(i,e)=>{if(Number.isSafeInteger(i))i<0?mn(i,e):dn(i,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},dn=(i,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=i&255,i=Math.floor(i/256)},mn=(i,e)=>{e[0]=255;var t=!1;i=i*-1;for(var s=e.length;s>1;s--){var n=i&255;i=Math.floor(i/256),t?e[s-1]=di(n):n===0?e[s-1]=0:(t=!0,e[s-1]=mi(n))}},fn=i=>{let e=i[0],t=e===128?wn(i.slice(1,i.length)):e===255?pn(i):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},pn=i=>{for(var e=i.length,t=0,s=!1,n=e-1;n>-1;n--){var r=i[n],h;s?h=di(r):r===0?h=r:(s=!0,h=mi(r)),h!==0&&(t-=h*Math.pow(256,e-n-1))}return t},wn=i=>{for(var e=i.length,t=0,s=e-1;s>-1;s--){var n=i[s];n!==0&&(t+=n*Math.pow(256,e-s-1))}return t},di=i=>(255^i)&255,mi=i=>(255^i)+1&255;fi.exports={encode:un,parse:fn}});var re=S((Rh,Si)=>{"use strict";var lt=at(),ne=f("path").posix,wi=pi(),ct=Symbol("slurp"),C=Symbol("type"),mt=class{constructor(e,t,s,n){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[C]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,__Buffer$.isBuffer(e)?this.decode(e,t||0,s,n):e&&this.set(e)}decode(e,t,s,n){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=J(e,t,100),this.mode=U(e,t+100,8),this.uid=U(e,t+108,8),this.gid=U(e,t+116,8),this.size=U(e,t+124,12),this.mtime=ut(e,t+136,12),this.cksum=U(e,t+148,12),this[ct](s),this[ct](n,!0),this[C]=J(e,t+156,1),this[C]===""&&(this[C]="0"),this[C]==="0"&&this.path.slice(-1)==="/"&&(this[C]="5"),this[C]==="5"&&(this.size=0),this.linkpath=J(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=J(e,t+265,32),this.gname=J(e,t+297,32),this.devmaj=U(e,t+329,8),this.devmin=U(e,t+337,8),e[t+475]!==0){let h=J(e,t+345,155);this.path=h+"/"+this.path}else{let h=J(e,t+345,130);h&&(this.path=h+"/"+this.path),this.atime=ut(e,t+476,12),this.ctime=ut(e,t+488,12)}let r=8*32;for(let h=t;h<t+148;h++)r+=e[h];for(let h=t+156;h<t+512;h++)r+=e[h];this.cksumValid=r===this.cksum,this.cksum===null&&r===8*32&&(this.nullBlock=!0)}[ct](e,t){for(let s in e)e[s]!==null&&e[s]!==void 0&&!(t&&s==="path")&&(this[s]=e[s])}encode(e,t){if(e||(e=this.block=__Buffer$.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let s=this.ctime||this.atime?130:155,n=Sn(this.path||"",s),r=n[0],h=n[1];this.needPax=n[2],this.needPax=Q(e,t,100,r)||this.needPax,this.needPax=H(e,t+100,8,this.mode)||this.needPax,this.needPax=H(e,t+108,8,this.uid)||this.needPax,this.needPax=H(e,t+116,8,this.gid)||this.needPax,this.needPax=H(e,t+124,12,this.size)||this.needPax,this.needPax=dt(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[C].charCodeAt(0),this.needPax=Q(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=Q(e,t+265,32,this.uname)||this.needPax,this.needPax=Q(e,t+297,32,this.gname)||this.needPax,this.needPax=H(e,t+329,8,this.devmaj)||this.needPax,this.needPax=H(e,t+337,8,this.devmin)||this.needPax,this.needPax=Q(e,t+345,s,h)||this.needPax,e[t+475]!==0?this.needPax=Q(e,t+345,155,h)||this.needPax:(this.needPax=Q(e,t+345,130,h)||this.needPax,this.needPax=dt(e,t+476,12,this.atime)||this.needPax,this.needPax=dt(e,t+488,12,this.ctime)||this.needPax);let o=8*32;for(let l=t;l<t+148;l++)o+=e[l];for(let l=t+156;l<t+512;l++)o+=e[l];return this.cksum=o,H(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return lt.name.get(this[C])||this[C]}get typeKey(){return this[C]}set type(e){lt.code.has(e)?this[C]=lt.code.get(e):this[C]=e}},Sn=(i,e)=>{let s=i,n="",r,h=ne.parse(i).root||".";if(__Buffer$.byteLength(s)<100)r=[s,n,!1];else{n=ne.dirname(s),s=ne.basename(s);do __Buffer$.byteLength(s)<=100&&__Buffer$.byteLength(n)<=e?r=[s,n,!1]:__Buffer$.byteLength(s)>100&&__Buffer$.byteLength(n)<=e?r=[s.slice(0,99),n,!0]:(s=ne.join(ne.basename(n),s),n=ne.dirname(n));while(n!==h&&!r);r||(r=[i.slice(0,99),"",!0])}return r},J=(i,e,t)=>i.slice(e,e+t).toString("utf8").replace(/\0.*/,""),ut=(i,e,t)=>yn(U(i,e,t)),yn=i=>i===null?null:new Date(i*1e3),U=(i,e,t)=>i[e]&128?wi.parse(i.slice(e,e+t)):bn(i,e,t),gn=i=>isNaN(i)?null:i,bn=(i,e,t)=>gn(parseInt(i.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),En={12:8589934591,8:2097151},H=(i,e,t,s)=>s===null?!1:s>En[t]||s<0?(wi.encode(s,i.slice(e,e+t)),!0):(kn(i,e,t,s),!1),kn=(i,e,t,s)=>i.write(xn(s,t),e,t,"ascii"),xn=(i,e)=>Rn(Math.floor(i).toString(8),e),Rn=(i,e)=>(i.length===e-1?i:new Array(e-i.length-1).join("0")+i+" ")+"\0",dt=(i,e,t,s)=>s===null?!1:H(i,e,t,s.getTime()/1e3),Cn=new Array(156).join("\0"),Q=(i,e,t,s)=>s===null?!1:(i.write(s+Cn,e,t,"utf8"),s.length!==__Buffer$.byteLength(s)||s.length>t);Si.exports=mt});var xe=S((Ch,yi)=>{"use strict";var Pn=re(),Tn=f("path"),ce=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=__Buffer$.byteLength(e),s=512*Math.ceil(1+t/512),n=__Buffer$.allocUnsafe(s);for(let r=0;r<512;r++)n[r]=0;new Pn({path:("PaxHeader/"+Tn.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(n),n.write(e,512,t,"utf8");for(let r=t+512;r<n.length;r++)n[r]=0;return n}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],s=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+`
`,n=__Buffer$.byteLength(s),r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=Math.pow(10,r)&&(r+=1),r+n+s}};ce.parse=(i,e,t)=>new ce(Nn(vn(i),e),t);var Nn=(i,e)=>e?Object.keys(i).reduce((t,s)=>(t[s]=i[s],t),e):i,vn=i=>i.replace(/\n$/,"").split(`
`).reduce(An,Object.create(null)),An=(i,e)=>{let t=parseInt(e,10);if(t!==__Buffer$.byteLength(e)+1)return i;e=e.slice((t+" ").length);let s=e.split("="),n=s.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!n)return i;let r=s.join("=");return i[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(r*1e3):/^[0-9]+$/.test(r)?+r:r,i};yi.exports=ce});var he=S((Ph,gi)=>{gi.exports=i=>{let e=i.length-1,t=-1;for(;e>-1&&i.charAt(e)==="/";)t=e,e--;return t===-1?i:i.slice(0,t)}});var Re=S((Th,bi)=>{"use strict";bi.exports=i=>class extends i{warn(e,t,s={}){this.file&&(s.file=this.file),this.cwd&&(s.cwd=this.cwd),s.code=t instanceof Error&&t.code||e,s.tarCode=e,!this.strict&&s.recoverable!==!1?(t instanceof Error&&(s=Object.assign(t,s),t=t.message),this.emit("warn",s.tarCode,t,s)):t instanceof Error?this.emit("error",Object.assign(t,s)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),s))}}});var pt=S((vh,Ei)=>{"use strict";var Ce=["|","<",">","?",":"],ft=Ce.map(i=>String.fromCharCode(61440+i.charCodeAt(0))),zn=new Map(Ce.map((i,e)=>[i,ft[e]])),On=new Map(ft.map((i,e)=>[i,Ce[e]]));Ei.exports={encode:i=>Ce.reduce((e,t)=>e.split(t).join(zn.get(t)),i),decode:i=>ft.reduce((e,t)=>e.split(t).join(On.get(t)),i)}});var wt=S((Ah,xi)=>{var{isAbsolute:Dn,parse:ki}=f("path").win32;xi.exports=i=>{let e="",t=ki(i);for(;Dn(i)||t.root;){let s=i.charAt(0)==="/"&&i.slice(0,4)!=="//?/"?"/":t.root;i=i.slice(s.length),e+=s,t=ki(i)}return[e,i]}});var Ci=S((zh,Ri)=>{"use strict";Ri.exports=(i,e,t)=>(i&=4095,t&&(i=(i|384)&-19),e&&(i&256&&(i|=64),i&32&&(i|=8),i&4&&(i|=1)),i)});var Pt=S((qh,Ii)=>{"use strict";var{Minipass:Oi}=f("minipass"),Di=xe(),qi=re(),q=f("fs"),Pi=f("path"),D=se(),qn=he(),Fi=(i,e)=>e?(i=D(i).replace(/^\.(\/|$)/,""),qn(e)+"/"+i):D(i),Fn=16*1024*1024,Ti=Symbol("process"),Ni=Symbol("file"),vi=Symbol("directory"),yt=Symbol("symlink"),Ai=Symbol("hardlink"),ue=Symbol("header"),Pe=Symbol("read"),gt=Symbol("lstat"),Te=Symbol("onlstat"),bt=Symbol("onread"),Et=Symbol("onreadlink"),kt=Symbol("openfile"),xt=Symbol("onopenfile"),W=Symbol("close"),Ne=Symbol("mode"),Rt=Symbol("awaitDrain"),St=Symbol("ondrain"),F=Symbol("prefix"),zi=Symbol("hadError"),Li=Re(),Ln=pt(),Mi=wt(),_i=Ci(),ve=Li(class extends Oi{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=D(e),this.portable=!!t.portable,this.myuid=__Process$.getuid&&__Process$.getuid()||0,this.myuser=__Process$.env.USER||"",this.maxReadSize=t.maxReadSize||Fn,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=D(t.cwd||__Process$.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?D(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let s=!1;if(!this.preservePaths){let[n,r]=Mi(this.path);n&&(this.path=r,s=n)}this.win32=!!t.win32||__Process$.platform==="win32",this.win32&&(this.path=Ln.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=D(t.absolute||Pi.resolve(this.cwd,e)),this.path===""&&(this.path="./"),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.statCache.has(this.absolute)?this[Te](this.statCache.get(this.absolute)):this[gt]()}emit(e,...t){return e==="error"&&(this[zi]=!0),super.emit(e,...t)}[gt](){q.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Te](t)})}[Te](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=_n(e),this.emit("stat",e),this[Ti]()}[Ti](){switch(this.type){case"File":return this[Ni]();case"Directory":return this[vi]();case"SymbolicLink":return this[yt]();default:return this.end()}}[Ne](e){return _i(e,this.type==="Directory",this.portable)}[F](e){return Fi(e,this.prefix)}[ue](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new qi({path:this[F](this.path),linkpath:this.type==="Link"?this[F](this.linkpath):this.linkpath,mode:this[Ne](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Di({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[F](this.path),linkpath:this.type==="Link"?this[F](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[vi](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[ue](),this.end()}[yt](){q.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Et](t)})}[Et](e){this.linkpath=D(e),this[ue](),this.end()}[Ai](e){this.type="Link",this.linkpath=D(Pi.relative(this.cwd,e)),this.stat.size=0,this[ue](),this.end()}[Ni](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[Ai](t)}this.linkCache.set(e,this.absolute)}if(this[ue](),this.stat.size===0)return this.end();this[kt]()}[kt](){q.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[xt](t)})}[xt](e){if(this.fd=e,this[zi])return this[W]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=__Buffer$.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Pe]()}[Pe](){let{fd:e,buf:t,offset:s,length:n,pos:r}=this;q.read(e,t,s,n,r,(h,o)=>{if(h)return this[W](()=>this.emit("error",h));this[bt](o)})}[W](e){q.close(this.fd,e)}[bt](e){if(e<=0&&this.remain>0){let n=new Error("encountered unexpected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[W](()=>this.emit("error",n))}if(e>this.remain){let n=new Error("did not encounter expected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[W](()=>this.emit("error",n))}if(e===this.remain)for(let n=e;n<this.length&&e<this.blockRemain;n++)this.buf[n+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[St]():this[Rt](()=>this[St]())}[Rt](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[St](){if(!this.remain)return this.blockRemain&&super.write(__Buffer$.alloc(this.blockRemain)),this[W](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=__Buffer$.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Pe]()}}),Ct=class extends ve{[gt](){this[Te](q.lstatSync(this.absolute))}[yt](){this[Et](q.readlinkSync(this.absolute))}[kt](){this[xt](q.openSync(this.absolute,"r"))}[Pe](){let e=!0;try{let{fd:t,buf:s,offset:n,length:r,pos:h}=this,o=q.readSync(t,s,n,r,h);this[bt](o),e=!1}finally{if(e)try{this[W](()=>{})}catch{}}}[Rt](e){e()}[W](e){q.closeSync(this.fd),e()}},Mn=Li(class extends Oi{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=D(e.path),this.mode=this[Ne](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=D(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let s=!1;if(!this.preservePaths){let[n,r]=Mi(this.path);n&&(this.path=r,s=n)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new qi({path:this[F](this.path),linkpath:this.type==="Link"?this[F](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new Di({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[F](this.path),linkpath:this.type==="Link"?this[F](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[F](e){return Fi(e,this.prefix)}[Ne](e){return _i(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(__Buffer$.alloc(this.blockRemain)),super.end()}});ve.Sync=Ct;ve.Tar=Mn;var _n=i=>i.isFile()?"File":i.isDirectory()?"Directory":i.isSymbolicLink()?"SymbolicLink":"Unsupported";Ii.exports=ve});var _e=S((Lh,Vi)=>{"use strict";var Le=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:In}=f("minipass"),Bi=f("minizlib"),Bn=Ee(),Ft=Pt(),Un=Ft.Sync,Hn=Ft.Tar,Wn=f("yallist"),Ui=__Buffer$.alloc(1024),Oe=Symbol("onStat"),Ae=Symbol("ended"),L=Symbol("queue"),oe=Symbol("current"),Z=Symbol("process"),ze=Symbol("processing"),Hi=Symbol("processJob"),M=Symbol("jobs"),Tt=Symbol("jobDone"),De=Symbol("addFSEntry"),Wi=Symbol("addTarEntry"),zt=Symbol("stat"),Ot=Symbol("readdir"),qe=Symbol("onreaddir"),Fe=Symbol("pipe"),Yi=Symbol("entry"),Nt=Symbol("entryOpt"),Dt=Symbol("writeEntryClass"),Ki=Symbol("write"),vt=Symbol("ondrain"),Me=f("fs"),Gi=f("path"),Yn=Re(),At=se(),Lt=Yn(class extends In{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||__Process$.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=At(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Dt]=Ft,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new Bi.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new Bi.BrotliCompress(e.brotli)),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[vt]()),this.on("resume",t=>this.zip.resume())}else this.on("drain",this[vt]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[L]=new Wn,this[M]=0,this.jobs=+e.jobs||4,this[ze]=!1,this[Ae]=!1}[Ki](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Ae]=!0,this[Z](),this}write(e){if(this[Ae])throw new Error("write after end");return e instanceof Bn?this[Wi](e):this[De](e),this.flowing}[Wi](e){let t=At(Gi.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let s=new Le(e.path,t,!1);s.entry=new Hn(e,this[Nt](s)),s.entry.on("end",n=>this[Tt](s)),this[M]+=1,this[L].push(s)}this[Z]()}[De](e){let t=At(Gi.resolve(this.cwd,e));this[L].push(new Le(e,t)),this[Z]()}[zt](e){e.pending=!0,this[M]+=1;let t=this.follow?"stat":"lstat";Me[t](e.absolute,(s,n)=>{e.pending=!1,this[M]-=1,s?this.emit("error",s):this[Oe](e,n)})}[Oe](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[Z]()}[Ot](e){e.pending=!0,this[M]+=1,Me.readdir(e.absolute,(t,s)=>{if(e.pending=!1,this[M]-=1,t)return this.emit("error",t);this[qe](e,s)})}[qe](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[Z]()}[Z](){if(!this[ze]){this[ze]=!0;for(let e=this[L].head;e!==null&&this[M]<this.jobs;e=e.next)if(this[Hi](e.value),e.value.ignore){let t=e.next;this[L].removeNode(e),e.next=t}this[ze]=!1,this[Ae]&&!this[L].length&&this[M]===0&&(this.zip?this.zip.end(Ui):(super.write(Ui),super.end()))}}get[oe](){return this[L]&&this[L].head&&this[L].head.value}[Tt](e){this[L].shift(),this[M]-=1,this[Z]()}[Hi](e){if(!e.pending){if(e.entry){e===this[oe]&&!e.piped&&this[Fe](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Oe](e,this.statCache.get(e.absolute)):this[zt](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[qe](e,this.readdirCache.get(e.absolute)):this[Ot](e),!e.readdir))){if(e.entry=this[Yi](e),!e.entry){e.ignore=!0;return}e===this[oe]&&!e.piped&&this[Fe](e)}}}[Nt](e){return{onwarn:(t,s,n)=>this.warn(t,s,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Yi](e){this[M]+=1;try{return new this[Dt](e.path,this[Nt](e)).on("end",()=>this[Tt](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[vt](){this[oe]&&this[oe].entry&&this[oe].entry.resume()}[Fe](e){e.piped=!0,e.readdir&&e.readdir.forEach(n=>{let r=e.path,h=r==="./"?"":r.replace(/\/*$/,"/");this[De](h+n)});let t=e.entry,s=this.zip;s?t.on("data",n=>{s.write(n)||t.pause()}):t.on("data",n=>{super.write(n)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),qt=class extends Lt{constructor(e){super(e),this[Dt]=Un}pause(){}resume(){}[zt](e){let t=this.follow?"statSync":"lstatSync";this[Oe](e,Me[t](e.absolute))}[Ot](e,t){this[qe](e,Me.readdirSync(e.absolute))}[Fe](e){let t=e.entry,s=this.zip;e.readdir&&e.readdir.forEach(n=>{let r=e.path,h=r==="./"?"":r.replace(/\/*$/,"/");this[De](h+n)}),s?t.on("data",n=>{s.write(n)}):t.on("data",n=>{super[Ki](n)})}};Lt.Sync=qt;Vi.exports=Lt});var Ge=S((_h,ss)=>{"use strict";var Gn=Re(),$i=re(),Kn=f("events"),Vn=f("yallist"),$n=1024*1024,Xn=Ee(),Xi=xe(),Ji=f("minizlib"),{nextTick:Jn}=f("process"),Mt=__Buffer$.from([31,139]),N=Symbol("state"),j=Symbol("writeEntry"),_=Symbol("readEntry"),_t=Symbol("nextEntry"),Qi=Symbol("processEntry"),v=Symbol("extendedHeader"),de=Symbol("globalExtendedHeader"),Y=Symbol("meta"),Zi=Symbol("emitMeta"),y=Symbol("buffer"),I=Symbol("queue"),G=Symbol("ended"),ji=Symbol("emittedEnd"),ee=Symbol("emit"),k=Symbol("unzip"),Ie=Symbol("consumeChunk"),Be=Symbol("consumeChunkSub"),It=Symbol("consumeBody"),es=Symbol("consumeMeta"),ts=Symbol("consumeHeader"),Ue=Symbol("consuming"),Bt=Symbol("bufferConcat"),Ut=Symbol("maybeEnd"),me=Symbol("writing"),K=Symbol("aborted"),He=Symbol("onDone"),te=Symbol("sawValidEntry"),We=Symbol("sawNullBlock"),Ye=Symbol("sawEOF"),is=Symbol("closeStream"),Qn=i=>!0;ss.exports=Gn(class extends Kn{constructor(e){e=e||{},super(e),this.file=e.file||"",this[te]=null,this.on(He,s=>{(this[N]==="begin"||this[te]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(He,e.ondone):this.on(He,s=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||$n,this.filter=typeof e.filter=="function"?e.filter:Qn;let t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:t?void 0:!1,this.writable=!0,this.readable=!1,this[I]=new Vn,this[y]=null,this[_]=null,this[j]=null,this[N]="begin",this[Y]="",this[v]=null,this[de]=null,this[G]=!1,this[k]=null,this[K]=!1,this[We]=!1,this[Ye]=!1,this.on("end",()=>this[is]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[ts](e,t){this[te]===null&&(this[te]=!1);let s;try{s=new $i(e,t,this[v],this[de])}catch(n){return this.warn("TAR_ENTRY_INVALID",n)}if(s.nullBlock)this[We]?(this[Ye]=!0,this[N]==="begin"&&(this[N]="header"),this[ee]("eof")):(this[We]=!0,this[ee]("nullBlock"));else if(this[We]=!1,!s.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:s});else if(!s.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:s});else{let n=s.type;if(/^(Symbolic)?Link$/.test(n)&&!s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:s});else if(!/^(Symbolic)?Link$/.test(n)&&s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:s});else{let r=this[j]=new Xn(s,this[v],this[de]);if(!this[te])if(r.remain){let h=()=>{r.invalid||(this[te]=!0)};r.on("end",h)}else this[te]=!0;r.meta?r.size>this.maxMetaEntrySize?(r.ignore=!0,this[ee]("ignoredEntry",r),this[N]="ignore",r.resume()):r.size>0&&(this[Y]="",r.on("data",h=>this[Y]+=h),this[N]="meta"):(this[v]=null,r.ignore=r.ignore||!this.filter(r.path,r),r.ignore?(this[ee]("ignoredEntry",r),this[N]=r.remain?"ignore":"header",r.resume()):(r.remain?this[N]="body":(this[N]="header",r.end()),this[_]?this[I].push(r):(this[I].push(r),this[_t]())))}}}[is](){Jn(()=>this.emit("close"))}[Qi](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[_]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",s=>this[_t]()),t=!1)):(this[_]=null,t=!1),t}[_t](){do;while(this[Qi](this[I].shift()));if(!this[I].length){let e=this[_];!e||e.flowing||e.size===e.remain?this[me]||this.emit("drain"):e.once("drain",s=>this.emit("drain"))}}[It](e,t){let s=this[j],n=s.blockRemain,r=n>=e.length&&t===0?e:e.slice(t,t+n);return s.write(r),s.blockRemain||(this[N]="header",this[j]=null,s.end()),r.length}[es](e,t){let s=this[j],n=this[It](e,t);return this[j]||this[Zi](s),n}[ee](e,t,s){!this[I].length&&!this[_]?this.emit(e,t,s):this[I].push([e,t,s])}[Zi](e){switch(this[ee]("meta",this[Y]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[v]=Xi.parse(this[Y],this[v],!1);break;case"GlobalExtendedHeader":this[de]=Xi.parse(this[Y],this[de],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[v]=this[v]||Object.create(null),this[v].path=this[Y].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[v]=this[v]||Object.create(null),this[v].linkpath=this[Y].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[K]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[K])return;if((this[k]===null||this.brotli===void 0&&this[k]===!1)&&e){if(this[y]&&(e=__Buffer$.concat([this[y],e]),this[y]=null),e.length<Mt.length)return this[y]=e,!0;for(let r=0;this[k]===null&&r<Mt.length;r++)e[r]!==Mt[r]&&(this[k]=!1);let n=this.brotli===void 0;if(this[k]===!1&&n)if(e.length<512)if(this[G])this.brotli=!0;else return this[y]=e,!0;else try{new $i(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[k]===null||this[k]===!1&&this.brotli){let r=this[G];this[G]=!1,this[k]=this[k]===null?new Ji.Unzip:new Ji.BrotliDecompress,this[k].on("data",o=>this[Ie](o)),this[k].on("error",o=>this.abort(o)),this[k].on("end",o=>{this[G]=!0,this[Ie]()}),this[me]=!0;let h=this[k][r?"end":"write"](e);return this[me]=!1,h}}this[me]=!0,this[k]?this[k].write(e):this[Ie](e),this[me]=!1;let s=this[I].length?!1:this[_]?this[_].flowing:!0;return!s&&!this[I].length&&this[_].once("drain",n=>this.emit("drain")),s}[Bt](e){e&&!this[K]&&(this[y]=this[y]?__Buffer$.concat([this[y],e]):e)}[Ut](){if(this[G]&&!this[ji]&&!this[K]&&!this[Ue]){this[ji]=!0;let e=this[j];if(e&&e.blockRemain){let t=this[y]?this[y].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[y]&&e.write(this[y]),e.end()}this[ee](He)}}[Ie](e){if(this[Ue])this[Bt](e);else if(!e&&!this[y])this[Ut]();else{if(this[Ue]=!0,this[y]){this[Bt](e);let t=this[y];this[y]=null,this[Be](t)}else this[Be](e);for(;this[y]&&this[y].length>=512&&!this[K]&&!this[Ye];){let t=this[y];this[y]=null,this[Be](t)}this[Ue]=!1}(!this[y]||this[G])&&this[Ut]()}[Be](e){let t=0,s=e.length;for(;t+512<=s&&!this[K]&&!this[Ye];)switch(this[N]){case"begin":case"header":this[ts](e,t),t+=512;break;case"ignore":case"body":t+=this[It](e,t);break;case"meta":t+=this[es](e,t);break;default:throw new Error("invalid state: "+this[N])}t<s&&(this[y]?this[y]=__Buffer$.concat([e.slice(t),this[y]]):this[y]=e.slice(t))}end(e){this[K]||(this[k]?this[k].end(e):(this[G]=!0,this.brotli===void 0&&(e=e||__Buffer$.alloc(0)),this.write(e)))}})});var Ke=S((Ih,os)=>{"use strict";var Zn=ie(),rs=Ge(),ae=f("fs"),jn=f("fs-minipass"),ns=f("path"),Ht=he();os.exports=(i,e,t)=>{typeof i=="function"?(t=i,e=null,i={}):Array.isArray(i)&&(e=i,i={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let s=Zn(i);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&tr(s,e),s.noResume||er(s),s.file&&s.sync?ir(s):s.file?sr(s,t):hs(s)};var er=i=>{let e=i.onentry;i.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},tr=(i,e)=>{let t=new Map(e.map(r=>[Ht(r),!0])),s=i.filter,n=(r,h)=>{let o=h||ns.parse(r).root||".",l=r===o?!1:t.has(r)?t.get(r):n(ns.dirname(r),o);return t.set(r,l),l};i.filter=s?(r,h)=>s(r,h)&&n(Ht(r)):r=>n(Ht(r))},ir=i=>{let e=hs(i),t=i.file,s=!0,n;try{let r=ae.statSync(t),h=i.maxReadSize||16*1024*1024;if(r.size<h)e.end(ae.readFileSync(t));else{let o=0,l=__Buffer$.allocUnsafe(h);for(n=ae.openSync(t,"r");o<r.size;){let a=ae.readSync(n,l,0,h,o);o+=a,e.write(l.slice(0,a))}e.end()}s=!1}finally{if(s&&n)try{ae.closeSync(n)}catch{}}},sr=(i,e)=>{let t=new rs(i),s=i.maxReadSize||16*1024*1024,n=i.file,r=new Promise((h,o)=>{t.on("error",o),t.on("end",h),ae.stat(n,(l,a)=>{if(l)o(l);else{let c=new jn.ReadStream(n,{readSize:s,size:a.size});c.on("error",o),c.pipe(t)}})});return e?r.then(e,e):r},hs=i=>new rs(i)});var ms=S((Bh,ds)=>{"use strict";var nr=ie(),Ve=_e(),as=f("fs-minipass"),ls=Ke(),cs=f("path");ds.exports=(i,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(i)&&(e=i,i={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let s=nr(i);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return s.file&&s.sync?rr(s,e):s.file?hr(s,e,t):s.sync?or(s,e):ar(s,e)};var rr=(i,e)=>{let t=new Ve.Sync(i),s=new as.WriteStreamSync(i.file,{mode:i.mode||438});t.pipe(s),us(t,e)},hr=(i,e,t)=>{let s=new Ve(i),n=new as.WriteStream(i.file,{mode:i.mode||438});s.pipe(n);let r=new Promise((h,o)=>{n.on("error",o),n.on("close",h),s.on("error",o)});return Wt(s,e),t?r.then(t,t):r},us=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?ls({file:cs.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:s=>i.add(s)}):i.add(t)}),i.end()},Wt=(i,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return ls({file:cs.resolve(i.cwd,t.slice(1)),noResume:!0,onentry:s=>i.add(s)}).then(s=>Wt(i,e));i.add(t)}i.end()},or=(i,e)=>{let t=new Ve.Sync(i);return us(t,e),t},ar=(i,e)=>{let t=new Ve(i);return Wt(t,e),t}});var Yt=S((Uh,bs)=>{"use strict";var lr=ie(),fs=_e(),P=f("fs"),ps=f("fs-minipass"),ws=Ke(),Ss=f("path"),ys=re();bs.exports=(i,e,t)=>{let s=lr(i);if(!s.file)throw new TypeError("file is required");if(s.gzip||s.brotli||s.file.endsWith(".br")||s.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),s.sync?cr(s,e):dr(s,e,t)};var cr=(i,e)=>{let t=new fs.Sync(i),s=!0,n,r;try{try{n=P.openSync(i.file,"r+")}catch(l){if(l.code==="ENOENT")n=P.openSync(i.file,"w+");else throw l}let h=P.fstatSync(n),o=__Buffer$.alloc(512);e:for(r=0;r<h.size;r+=512){for(let c=0,u=0;c<512;c+=u){if(u=P.readSync(n,o,c,o.length-c,r+c),r===0&&o[0]===31&&o[1]===139)throw new Error("cannot append to compressed archives");if(!u)break e}let l=new ys(o);if(!l.cksumValid)break;let a=512*Math.ceil(l.size/512);if(r+a+512>h.size)break;r+=a,i.mtimeCache&&i.mtimeCache.set(l.path,l.mtime)}s=!1,ur(i,t,r,n,e)}finally{if(s)try{P.closeSync(n)}catch{}}},ur=(i,e,t,s,n)=>{let r=new ps.WriteStreamSync(i.file,{fd:s,start:t});e.pipe(r),mr(e,n)},dr=(i,e,t)=>{e=Array.from(e);let s=new fs(i),n=(h,o,l)=>{let a=(p,x)=>{p?P.close(h,g=>l(p)):l(null,x)},c=0;if(o===0)return a(null,0);let u=0,d=__Buffer$.alloc(512),m=(p,x)=>{if(p)return a(p);if(u+=x,u<512&&x)return P.read(h,d,u,d.length-u,c+u,m);if(c===0&&d[0]===31&&d[1]===139)return a(new Error("cannot append to compressed archives"));if(u<512)return a(null,c);let g=new ys(d);if(!g.cksumValid)return a(null,c);let b=512*Math.ceil(g.size/512);if(c+b+512>o||(c+=b+512,c>=o))return a(null,c);i.mtimeCache&&i.mtimeCache.set(g.path,g.mtime),u=0,P.read(h,d,0,512,c,m)};P.read(h,d,0,512,c,m)},r=new Promise((h,o)=>{s.on("error",o);let l="r+",a=(c,u)=>{if(c&&c.code==="ENOENT"&&l==="r+")return l="w+",P.open(i.file,l,a);if(c)return o(c);P.fstat(u,(d,m)=>{if(d)return P.close(u,()=>o(d));n(u,m.size,(p,x)=>{if(p)return o(p);let g=new ps.WriteStream(i.file,{fd:u,start:x});s.pipe(g),g.on("error",o),g.on("close",h),gs(s,e)})})};P.open(i.file,l,a)});return t?r.then(t,t):r},mr=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?ws({file:Ss.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:s=>i.add(s)}):i.add(t)}),i.end()},gs=(i,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return ws({file:Ss.resolve(i.cwd,t.slice(1)),noResume:!0,onentry:s=>i.add(s)}).then(s=>gs(i,e));i.add(t)}i.end()}});var ks=S((Hh,Es)=>{"use strict";var fr=ie(),pr=Yt();Es.exports=(i,e,t)=>{let s=fr(i);if(!s.file)throw new TypeError("file is required");if(s.gzip||s.brotli||s.file.endsWith(".br")||s.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),wr(s),pr(s,e,t)};var wr=i=>{let e=i.filter;i.mtimeCache||(i.mtimeCache=new Map),i.filter=e?(t,s)=>e(t,s)&&!(i.mtimeCache.get(t)>s.mtime):(t,s)=>!(i.mtimeCache.get(t)>s.mtime)}});var Ps=S((Wh,Gt)=>{"use strict";var xs=f("mkdirp"),A=f("fs"),$e=f("path"),Rs=f("chownr"),O=se(),Xe=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},Je=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},Qe=(i,e)=>i.get(O(e)),fe=(i,e,t)=>i.set(O(e),t),Sr=(i,e)=>{A.stat(i,(t,s)=>{(t||!s.isDirectory())&&(t=new Je(i,t&&t.code||"ENOTDIR")),e(t)})};Gt.exports=(i,e,t)=>{i=O(i);let s=e.umask,n=e.mode|448,r=(n&s)!==0,h=e.uid,o=e.gid,l=typeof h=="number"&&typeof o=="number"&&(h!==e.processUid||o!==e.processGid),a=e.preserve,c=e.unlink,u=e.cache,d=O(e.cwd),m=(g,b)=>{g?t(g):(fe(u,i,!0),b&&l?Rs(b,h,o,ri=>m(ri)):r?A.chmod(i,n,t):t())};if(u&&Qe(u,i)===!0)return m();if(i===d)return Sr(i,m);if(a)return xs(i,{mode:n}).then(g=>m(null,g),m);let x=O($e.relative(d,i)).split("/");Ze(d,x,n,u,c,d,null,m)};var Ze=(i,e,t,s,n,r,h,o)=>{if(!e.length)return o(null,h);let l=e.shift(),a=O($e.resolve(i+"/"+l));if(Qe(s,a))return Ze(a,e,t,s,n,r,h,o);A.mkdir(a,t,Cs(a,e,t,s,n,r,h,o))},Cs=(i,e,t,s,n,r,h,o)=>l=>{l?A.lstat(i,(a,c)=>{if(a)a.path=a.path&&O(a.path),o(a);else if(c.isDirectory())Ze(i,e,t,s,n,r,h,o);else if(n)A.unlink(i,u=>{if(u)return o(u);A.mkdir(i,t,Cs(i,e,t,s,n,r,h,o))});else{if(c.isSymbolicLink())return o(new Xe(i,i+"/"+e.join("/")));o(l)}}):(h=h||i,Ze(i,e,t,s,n,r,h,o))},yr=i=>{let e=!1,t="ENOTDIR";try{e=A.statSync(i).isDirectory()}catch(s){t=s.code}finally{if(!e)throw new Je(i,t)}};Gt.exports.sync=(i,e)=>{i=O(i);let t=e.umask,s=e.mode|448,n=(s&t)!==0,r=e.uid,h=e.gid,o=typeof r=="number"&&typeof h=="number"&&(r!==e.processUid||h!==e.processGid),l=e.preserve,a=e.unlink,c=e.cache,u=O(e.cwd),d=g=>{fe(c,i,!0),g&&o&&Rs.sync(g,r,h),n&&A.chmodSync(i,s)};if(c&&Qe(c,i)===!0)return d();if(i===u)return yr(u),d();if(l)return d(xs.sync(i,s));let p=O($e.relative(u,i)).split("/"),x=null;for(let g=p.shift(),b=u;g&&(b+="/"+g);g=p.shift())if(b=O($e.resolve(b)),!Qe(c,b))try{A.mkdirSync(b,s),x=x||b,fe(c,b,!0)}catch{let hi=A.lstatSync(b);if(hi.isDirectory()){fe(c,b,!0);continue}else if(a){A.unlinkSync(b),A.mkdirSync(b,s),x=x||b,fe(c,b,!0);continue}else if(hi.isSymbolicLink())return new Xe(b,b+"/"+p.join("/"))}return d(x)}});var Vt=S((Yh,Ts)=>{var Kt=Object.create(null),{hasOwnProperty:gr}=Object.prototype;Ts.exports=i=>(gr.call(Kt,i)||(Kt[i]=i.normalize("NFD")),Kt[i])});var zs=S((Gh,As)=>{var Ns=f("assert"),br=Vt(),Er=he(),{join:vs}=f("path"),kr=__Process$.env.TESTING_TAR_FAKE_PLATFORM||__Process$.platform,xr=kr==="win32";As.exports=()=>{let i=new Map,e=new Map,t=a=>a.split("/").slice(0,-1).reduce((u,d)=>(u.length&&(d=vs(u[u.length-1],d)),u.push(d||"/"),u),[]),s=new Set,n=a=>{let c=e.get(a);if(!c)throw new Error("function does not have any path reservations");return{paths:c.paths.map(u=>i.get(u)),dirs:[...c.dirs].map(u=>i.get(u))}},r=a=>{let{paths:c,dirs:u}=n(a);return c.every(d=>d[0]===a)&&u.every(d=>d[0]instanceof Set&&d[0].has(a))},h=a=>s.has(a)||!r(a)?!1:(s.add(a),a(()=>o(a)),!0),o=a=>{if(!s.has(a))return!1;let{paths:c,dirs:u}=e.get(a),d=new Set;return c.forEach(m=>{let p=i.get(m);Ns.equal(p[0],a),p.length===1?i.delete(m):(p.shift(),typeof p[0]=="function"?d.add(p[0]):p[0].forEach(x=>d.add(x)))}),u.forEach(m=>{let p=i.get(m);Ns(p[0]instanceof Set),p[0].size===1&&p.length===1?i.delete(m):p[0].size===1?(p.shift(),d.add(p[0])):p[0].delete(a)}),s.delete(a),d.forEach(m=>h(m)),!0};return{check:r,reserve:(a,c)=>{a=xr?["win32 parallelization disabled"]:a.map(d=>Er(vs(br(d))).toLowerCase());let u=new Set(a.map(d=>t(d)).reduce((d,m)=>d.concat(m)));return e.set(c,{dirs:u,paths:a}),a.forEach(d=>{let m=i.get(d);m?m.push(c):i.set(d,[c])}),u.forEach(d=>{let m=i.get(d);m?m[m.length-1]instanceof Set?m[m.length-1].add(c):m.push(new Set([c])):i.set(d,[new Set([c])])}),h(c)}}}});var qs=S((Kh,Ds)=>{var Rr=__Process$.env.__FAKE_PLATFORM__||__Process$.platform,Cr=Rr==="win32",Pr=__global$.__FAKE_TESTING_FS__||f("fs"),{O_CREAT:Tr,O_TRUNC:Nr,O_WRONLY:vr,UV_FS_O_FILEMAP:Os=0}=Pr.constants,Ar=Cr&&!!Os,zr=512*1024,Or=Os|Nr|Tr|vr;Ds.exports=Ar?i=>i<zr?Or:"w":()=>"w"});var ii=S((Vh,$s)=>{"use strict";var Dr=f("assert"),qr=Ge(),w=f("fs"),Fr=f("fs-minipass"),B=f("path"),Gs=Ps(),Fs=pt(),Lr=zs(),Mr=wt(),T=se(),_r=he(),Ir=Vt(),Ls=Symbol("onEntry"),Jt=Symbol("checkFs"),Ms=Symbol("checkFs2"),tt=Symbol("pruneCache"),Qt=Symbol("isReusable"),z=Symbol("makeFs"),Zt=Symbol("file"),jt=Symbol("directory"),it=Symbol("link"),_s=Symbol("symlink"),Is=Symbol("hardlink"),Bs=Symbol("unsupported"),Us=Symbol("checkPath"),V=Symbol("mkdir"),R=Symbol("onError"),je=Symbol("pending"),Hs=Symbol("pend"),le=Symbol("unpend"),$t=Symbol("ended"),Xt=Symbol("maybeClose"),ei=Symbol("skip"),pe=Symbol("doChown"),we=Symbol("uid"),Se=Symbol("gid"),ye=Symbol("checkedCwd"),Ks=f("crypto"),Vs=qs(),Br=__Process$.env.TESTING_TAR_FAKE_PLATFORM||__Process$.platform,ge=Br==="win32",Ur=(i,e)=>{if(!ge)return w.unlink(i,e);let t=i+".DELETE."+Ks.randomBytes(16).toString("hex");w.rename(i,t,s=>{if(s)return e(s);w.unlink(t,e)})},Hr=i=>{if(!ge)return w.unlinkSync(i);let e=i+".DELETE."+Ks.randomBytes(16).toString("hex");w.renameSync(i,e),w.unlinkSync(e)},Ws=(i,e,t)=>i===i>>>0?i:e===e>>>0?e:t,Ys=i=>_r(T(Ir(i))).toLowerCase(),Wr=(i,e)=>{e=Ys(e);for(let t of i.keys()){let s=Ys(t);(s===e||s.indexOf(e+"/")===0)&&i.delete(t)}},Yr=i=>{for(let e of i.keys())i.delete(e)},be=class extends qr{constructor(e){if(e||(e={}),e.ondone=t=>{this[$t]=!0,this[Xt]()},super(e),this[ye]=!1,this.reservations=Lr(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[je]=0,this[$t]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=__Process$.getuid&&__Process$.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&__Process$.getuid?__Process$.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&__Process$.getgid?__Process$.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||ge,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=T(B.resolve(e.cwd||__Process$.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:__Process$.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[Ls](t))}warn(e,t,s={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(s.recoverable=!1),super.warn(e,t,s)}[Xt](){this[$t]&&this[je]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[Us](e){if(this.strip){let t=T(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),e.type==="Link"){let s=T(e.linkpath).split("/");if(s.length>=this.strip)e.linkpath=s.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let t=T(e.path),s=t.split("/");if(s.includes("..")||ge&&/^[a-z]:\.\.$/i.test(s[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[n,r]=Mr(t);n&&(e.path=r,this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:e,path:t}))}if(B.isAbsolute(e.path)?e.absolute=T(B.resolve(e.path)):e.absolute=T(B.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:T(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:t}=B.win32.parse(e.absolute);e.absolute=t+Fs.encode(e.absolute.slice(t.length));let{root:s}=B.win32.parse(e.path);e.path=s+Fs.encode(e.path.slice(s.length))}return!0}[Ls](e){if(!this[Us](e))return e.resume();switch(Dr.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Jt](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Bs](e)}}[R](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[le](),t.resume())}[V](e,t,s){Gs(T(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},s)}[pe](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[we](e){return Ws(this.uid,e.uid,this.processUid)}[Se](e){return Ws(this.gid,e.gid,this.processGid)}[Zt](e,t){let s=e.mode&4095||this.fmode,n=new Fr.WriteStream(e.absolute,{flags:Vs(e.size),mode:s,autoClose:!1});n.on("error",l=>{n.fd&&w.close(n.fd,()=>{}),n.write=()=>!0,this[R](l,e),t()});let r=1,h=l=>{if(l){n.fd&&w.close(n.fd,()=>{}),this[R](l,e),t();return}--r===0&&w.close(n.fd,a=>{a?this[R](a,e):this[le](),t()})};n.on("finish",l=>{let a=e.absolute,c=n.fd;if(e.mtime&&!this.noMtime){r++;let u=e.atime||new Date,d=e.mtime;w.futimes(c,u,d,m=>m?w.utimes(a,u,d,p=>h(p&&m)):h())}if(this[pe](e)){r++;let u=this[we](e),d=this[Se](e);w.fchown(c,u,d,m=>m?w.chown(a,u,d,p=>h(p&&m)):h())}h()});let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",l=>{this[R](l,e),t()}),e.pipe(o)),o.pipe(n)}[jt](e,t){let s=e.mode&4095||this.dmode;this[V](e.absolute,s,n=>{if(n){this[R](n,e),t();return}let r=1,h=o=>{--r===0&&(t(),this[le](),e.resume())};e.mtime&&!this.noMtime&&(r++,w.utimes(e.absolute,e.atime||new Date,e.mtime,h)),this[pe](e)&&(r++,w.chown(e.absolute,this[we](e),this[Se](e),h)),h()})}[Bs](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[_s](e,t){this[it](e,e.linkpath,"symlink",t)}[Is](e,t){let s=T(B.resolve(this.cwd,e.linkpath));this[it](e,s,"link",t)}[Hs](){this[je]++}[le](){this[je]--,this[Xt]()}[ei](e){this[le](),e.resume()}[Qt](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!ge}[Jt](e){this[Hs]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,s=>this[Ms](e,s))}[tt](e){e.type==="SymbolicLink"?Yr(this.dirCache):e.type!=="Directory"&&Wr(this.dirCache,e.absolute)}[Ms](e,t){this[tt](e);let s=o=>{this[tt](e),t(o)},n=()=>{this[V](this.cwd,this.dmode,o=>{if(o){this[R](o,e),s();return}this[ye]=!0,r()})},r=()=>{if(e.absolute!==this.cwd){let o=T(B.dirname(e.absolute));if(o!==this.cwd)return this[V](o,this.dmode,l=>{if(l){this[R](l,e),s();return}h()})}h()},h=()=>{w.lstat(e.absolute,(o,l)=>{if(l&&(this.keep||this.newer&&l.mtime>e.mtime)){this[ei](e),s();return}if(o||this[Qt](e,l))return this[z](null,e,s);if(l.isDirectory()){if(e.type==="Directory"){let a=!this.noChmod&&e.mode&&(l.mode&4095)!==e.mode,c=u=>this[z](u,e,s);return a?w.chmod(e.absolute,e.mode,c):c()}if(e.absolute!==this.cwd)return w.rmdir(e.absolute,a=>this[z](a,e,s))}if(e.absolute===this.cwd)return this[z](null,e,s);Ur(e.absolute,a=>this[z](a,e,s))})};this[ye]?r():n()}[z](e,t,s){if(e){this[R](e,t),s();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Zt](t,s);case"Link":return this[Is](t,s);case"SymbolicLink":return this[_s](t,s);case"Directory":case"GNUDumpDir":return this[jt](t,s)}}[it](e,t,s,n){w[s](t,e.absolute,r=>{r?this[R](r,e):(this[le](),e.resume()),n()})}},et=i=>{try{return[null,i()]}catch(e){return[e,null]}},ti=class extends be{[z](e,t){return super[z](e,t,()=>{})}[Jt](e){if(this[tt](e),!this[ye]){let r=this[V](this.cwd,this.dmode);if(r)return this[R](r,e);this[ye]=!0}if(e.absolute!==this.cwd){let r=T(B.dirname(e.absolute));if(r!==this.cwd){let h=this[V](r,this.dmode);if(h)return this[R](h,e)}}let[t,s]=et(()=>w.lstatSync(e.absolute));if(s&&(this.keep||this.newer&&s.mtime>e.mtime))return this[ei](e);if(t||this[Qt](e,s))return this[z](null,e);if(s.isDirectory()){if(e.type==="Directory"){let h=!this.noChmod&&e.mode&&(s.mode&4095)!==e.mode,[o]=h?et(()=>{w.chmodSync(e.absolute,e.mode)}):[];return this[z](o,e)}let[r]=et(()=>w.rmdirSync(e.absolute));this[z](r,e)}let[n]=e.absolute===this.cwd?[]:et(()=>Hr(e.absolute));this[z](n,e)}[Zt](e,t){let s=e.mode&4095||this.fmode,n=o=>{let l;try{w.closeSync(r)}catch(a){l=a}(o||l)&&this[R](o||l,e),t()},r;try{r=w.openSync(e.absolute,Vs(e.size),s)}catch(o){return n(o)}let h=this.transform&&this.transform(e)||e;h!==e&&(h.on("error",o=>this[R](o,e)),e.pipe(h)),h.on("data",o=>{try{w.writeSync(r,o,0,o.length)}catch(l){n(l)}}),h.on("end",o=>{let l=null;if(e.mtime&&!this.noMtime){let a=e.atime||new Date,c=e.mtime;try{w.futimesSync(r,a,c)}catch(u){try{w.utimesSync(e.absolute,a,c)}catch{l=u}}}if(this[pe](e)){let a=this[we](e),c=this[Se](e);try{w.fchownSync(r,a,c)}catch(u){try{w.chownSync(e.absolute,a,c)}catch{l=l||u}}}n(l)})}[jt](e,t){let s=e.mode&4095||this.dmode,n=this[V](e.absolute,s);if(n){this[R](n,e),t();return}if(e.mtime&&!this.noMtime)try{w.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[pe](e))try{w.chownSync(e.absolute,this[we](e),this[Se](e))}catch{}t(),e.resume()}[V](e,t){try{return Gs.sync(T(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(s){return s}}[it](e,t,s,n){try{w[s+"Sync"](t,e.absolute),n(),e.resume()}catch(r){return this[R](r,e)}}};be.Sync=ti;$s.exports=be});var js=S(($h,Zs)=>{"use strict";var Gr=ie(),st=ii(),Js=f("fs"),Qs=f("fs-minipass"),Xs=f("path"),si=he();Zs.exports=(i,e,t)=>{typeof i=="function"?(t=i,e=null,i={}):Array.isArray(i)&&(e=i,i={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let s=Gr(i);if(s.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!s.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&Kr(s,e),s.file&&s.sync?Vr(s):s.file?$r(s,t):s.sync?Xr(s):Jr(s)};var Kr=(i,e)=>{let t=new Map(e.map(r=>[si(r),!0])),s=i.filter,n=(r,h)=>{let o=h||Xs.parse(r).root||".",l=r===o?!1:t.has(r)?t.get(r):n(Xs.dirname(r),o);return t.set(r,l),l};i.filter=s?(r,h)=>s(r,h)&&n(si(r)):r=>n(si(r))},Vr=i=>{let e=new st.Sync(i),t=i.file,s=Js.statSync(t),n=i.maxReadSize||16*1024*1024;new Qs.ReadStreamSync(t,{readSize:n,size:s.size}).pipe(e)},$r=(i,e)=>{let t=new st(i),s=i.maxReadSize||16*1024*1024,n=i.file,r=new Promise((h,o)=>{t.on("error",o),t.on("close",h),Js.stat(n,(l,a)=>{if(l)o(l);else{let c=new Qs.ReadStream(n,{readSize:s,size:a.size});c.on("error",o),c.pipe(t)}})});return e?r.then(e,e):r},Xr=i=>new st.Sync(i),Jr=i=>new st(i)});var ni=S(E=>{"use strict";E.c=E.create=ms();E.r=E.replace=Yt();E.t=E.list=Ke();E.u=E.update=ks();E.x=E.extract=js();E.Pack=_e();E.Unpack=ii();E.Parse=Ge();E.ReadEntry=Ee();E.WriteEntry=Pt();E.Header=re();E.Pax=xe();E.types=at()});var $={};an($,{Header:()=>dh,Pack:()=>oh,Parse:()=>lh,Pax:()=>mh,ReadEntry:()=>ch,Unpack:()=>ah,WriteEntry:()=>uh,c:()=>Qr,create:()=>Zr,default:()=>wh,extract:()=>hh,list:()=>ih,r:()=>jr,replace:()=>eh,t:()=>th,types:()=>fh,u:()=>sh,update:()=>nh,x:()=>rh});var tn=oi(ni());X($,oi(ni()));var{c:Qr,create:Zr,r:jr,replace:eh,t:th,list:ih,u:sh,update:nh,x:rh,extract:hh,Pack:oh,Unpack:ah,Parse:lh,ReadEntry:ch,WriteEntry:uh,Header:dh,Pax:mh,types:fh}=tn,{default:en,...ph}=tn,wh=en!==void 0?en:ph;export{dh as Header,oh as Pack,lh as Parse,mh as Pax,ch as ReadEntry,ah as Unpack,uh as WriteEntry,Qr as c,Zr as create,wh as default,hh as extract,ih as list,jr as r,eh as replace,th as t,fh as types,sh as u,nh as update,rh as x};
//# sourceMappingURL=tar.mjs.map