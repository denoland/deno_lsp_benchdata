/* esm.sh - esbuild bundle(lru-cache@6.0.0) denonext production */
import * as __0$ from "/v135/yallist@4.0.0/denonext/yallist.mjs";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"yallist":return e(__0$);default:throw new Error("module \""+n+"\" not found");}};
var C=Object.create;var S=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var X=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var q=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),R=(s,t)=>{for(var e in t)S(s,e,{get:t[e],enumerable:!0})},A=(s,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of M(t))!U.call(s,r)&&r!==e&&S(s,r,{get:()=>t[r],enumerable:!(n=H(t,r))||n.enumerable});return s},w=(s,t,e)=>(A(s,t,"default"),e&&A(e,t,"default")),D=(s,t,e)=>(e=s!=null?C(P(s)):{},A(t||!s||!s.__esModule?S(e,"default",{value:s,enumerable:!0}):e,s));var O=q((J,N)=>{"use strict";var W=X("yallist"),l=Symbol("max"),u=Symbol("length"),v=Symbol("lengthCalculator"),b=Symbol("allowStale"),c=Symbol("maxAge"),o=Symbol("dispose"),L=Symbol("noDisposeOnSet"),i=Symbol("lruList"),h=Symbol("cache"),G=Symbol("updateAgeOnGet"),E=()=>1,_=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let e=this[l]=t.max||1/0,n=t.length||E;if(this[v]=typeof n!="function"?E:n,this[b]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[c]=t.maxAge||0,this[o]=t.dispose,this[L]=t.noDisposeOnSet||!1,this[G]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[l]=t||1/0,y(this)}get max(){return this[l]}set allowStale(t){this[b]=!!t}get allowStale(){return this[b]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[c]=t,y(this)}get maxAge(){return this[c]}set lengthCalculator(t){typeof t!="function"&&(t=E),t!==this[v]&&(this[v]=t,this[u]=0,this[i].forEach(e=>{e.length=this[v](e.value,e.key),this[u]+=e.length})),y(this)}get lengthCalculator(){return this[v]}get length(){return this[u]}get itemCount(){return this[i].length}rforEach(t,e){e=e||this;for(let n=this[i].tail;n!==null;){let r=n.prev;k(this,t,n,e),n=r}}forEach(t,e){e=e||this;for(let n=this[i].head;n!==null;){let r=n.next;k(this,t,n,e),n=r}}keys(){return this[i].toArray().map(t=>t.key)}values(){return this[i].toArray().map(t=>t.value)}reset(){this[o]&&this[i]&&this[i].length&&this[i].forEach(t=>this[o](t.key,t.value)),this[h]=new Map,this[i]=new W,this[u]=0}dump(){return this[i].map(t=>d(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[i]}set(t,e,n){if(n=n||this[c],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let r=n?Date.now():0,a=this[v](e,t);if(this[h].has(t)){if(a>this[l])return x(this,this[h].get(t)),!1;let g=this[h].get(t).value;return this[o]&&(this[L]||this[o](t,g.value)),g.now=r,g.maxAge=n,g.value=e,this[u]+=a-g.length,g.length=a,this.get(t),y(this),!0}let m=new T(t,e,a,r,n);return m.length>this[l]?(this[o]&&this[o](t,e),!1):(this[u]+=m.length,this[i].unshift(m),this[h].set(t,this[i].head),y(this),!0)}has(t){if(!this[h].has(t))return!1;let e=this[h].get(t).value;return!d(this,e)}get(t){return p(this,t,!0)}peek(t){return p(this,t,!1)}pop(){let t=this[i].tail;return t?(x(this,t),t.value):null}del(t){x(this,this[h].get(t))}load(t){this.reset();let e=Date.now();for(let n=t.length-1;n>=0;n--){let r=t[n],a=r.e||0;if(a===0)this.set(r.k,r.v);else{let m=a-e;m>0&&this.set(r.k,r.v,m)}}}prune(){this[h].forEach((t,e)=>p(this,e,!1))}},p=(s,t,e)=>{let n=s[h].get(t);if(n){let r=n.value;if(d(s,r)){if(x(s,n),!s[b])return}else e&&(s[G]&&(n.value.now=Date.now()),s[i].unshiftNode(n));return r.value}},d=(s,t)=>{if(!t||!t.maxAge&&!s[c])return!1;let e=Date.now()-t.now;return t.maxAge?e>t.maxAge:s[c]&&e>s[c]},y=s=>{if(s[u]>s[l])for(let t=s[i].tail;s[u]>s[l]&&t!==null;){let e=t.prev;x(s,t),t=e}},x=(s,t)=>{if(t){let e=t.value;s[o]&&s[o](e.key,e.value),s[u]-=e.length,s[h].delete(e.key),s[i].removeNode(t)}},T=class{constructor(t,e,n,r,a){this.key=t,this.value=e,this.length=n,this.now=r,this.maxAge=a||0}},k=(s,t,e,n)=>{let r=e.value;d(s,r)&&(x(s,e),s[b]||(r=void 0)),r&&t.call(n,r.value,r.key,s)};N.exports=_});var f={};R(f,{default:()=>z});var Y=D(O());w(f,D(O()));var{default:I,...j}=Y,z=I!==void 0?I:j;export{z as default};
//# sourceMappingURL=lru-cache.mjs.map