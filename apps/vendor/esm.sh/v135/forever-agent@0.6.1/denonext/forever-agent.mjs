/* esm.sh - esbuild bundle(forever-agent@0.6.1) denonext production */
import * as __0$ from "node:util";
import * as __1$ from "node:http";
import * as __2$ from "node:net";
import * as __3$ from "node:tls";
import * as __4$ from "node:https";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"util":return e(__0$);case"http":return e(__1$);case"net":return e(__2$);case"tls":return e(__3$);case"https":return e(__4$);default:throw new Error("module \""+n+"\" not found");}};
var x=Object.create;var S=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var u=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),M=(t,e)=>{for(var r in e)S(t,r,{get:e[r],enumerable:!0})},d=(t,e,r,f)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of C(e))!L.call(t,s)&&s!==r&&S(t,s,{get:()=>e[s],enumerable:!(f=A(e,s))||f.enumerable});return t},c=(t,e,r)=>(d(t,e,"default"),r&&d(r,e,"default")),h=(t,e,r)=>(r=t!=null?x(R(t)):{},d(e||!t||!t.__esModule?S(r,"default",{value:t,enumerable:!0}):r,t));var a=b((D,q)=>{q.exports=i;i.SSL=l;var y=u("util"),k=u("http").Agent,N=u("net"),j=u("tls"),m=u("https").Agent;function g(t,e){var r="";return typeof t=="string"?r=t+":"+e:r=t.host+":"+t.port+":"+(t.localAddress?t.localAddress+":":":"),r}function i(t){var e=this;e.options=t||{},e.requests={},e.sockets={},e.freeSockets={},e.maxSockets=e.options.maxSockets||k.defaultMaxSockets,e.minSockets=e.options.minSockets||i.defaultMinSockets,e.on("free",function(r,f,s){var o=g(f,s);if(e.requests[o]&&e.requests[o].length)e.requests[o].shift().onSocket(r);else if(e.sockets[o].length<e.minSockets){e.freeSockets[o]||(e.freeSockets[o]=[]),e.freeSockets[o].push(r);var p=function(){r.destroy()};r._onIdleError=p,r.on("error",p)}else r.destroy()})}y.inherits(i,k);i.defaultMinSockets=5;i.prototype.createConnection=N.createConnection;i.prototype.addRequestNoreuse=k.prototype.addRequest;i.prototype.addRequest=function(t,e,r){var f=g(e,r);if(typeof e!="string"){var s=e;r=s.port,e=s.host}if(this.freeSockets[f]&&this.freeSockets[f].length>0&&!t.useChunkedEncodingByDefault){var o=this.freeSockets[f].pop();o.removeListener("error",o._onIdleError),delete o._onIdleError,t._reusedSocket=!0,t.onSocket(o)}else this.addRequestNoreuse(t,e,r)};i.prototype.removeSocket=function(t,e,r,f){if(this.sockets[e]){var s=this.sockets[e].indexOf(t);s!==-1&&this.sockets[e].splice(s,1)}else this.sockets[e]&&this.sockets[e].length===0&&(delete this.sockets[e],delete this.requests[e]);if(this.freeSockets[e]){var s=this.freeSockets[e].indexOf(t);s!==-1&&(this.freeSockets[e].splice(s,1),this.freeSockets[e].length===0&&delete this.freeSockets[e])}this.requests[e]&&this.requests[e].length&&this.createSocket(e,r,f).emit("free")};function l(t){i.call(this,t)}y.inherits(l,i);l.prototype.createConnection=E;l.prototype.addRequestNoreuse=m.prototype.addRequest;function E(t,e,r){return typeof t=="object"?r=t:typeof e=="object"?r=e:typeof r=="object"?r=r:r={},typeof t=="number"&&(r.port=t),typeof e=="string"&&(r.host=e),j.connect(r)}});var n={};M(n,{default:()=>O,defaultMinSockets:()=>F});var _=h(a());c(n,h(a()));var{defaultMinSockets:F}=_,{default:v,...I}=_,O=v!==void 0?v:I;export{O as default,F as defaultMinSockets};
//# sourceMappingURL=forever-agent.mjs.map