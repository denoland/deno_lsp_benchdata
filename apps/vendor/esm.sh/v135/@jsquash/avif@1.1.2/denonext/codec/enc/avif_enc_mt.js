/* esm.sh - esbuild bundle(@jsquash/avif@1.1.2/codec/enc/avif_enc_mt) denonext production */
import __Process$ from "node:process";
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);
var Si=function(){var Fe=import.meta.url;return function(i){i=i||{};function se(){return g.buffer!=b&&W(g.buffer),Qe}function O(){return g.buffer!=b&&W(g.buffer),Je}function Z(){return g.buffer!=b&&W(g.buffer),Ze}function je(){return g.buffer!=b&&W(g.buffer),er}function c(){return g.buffer!=b&&W(g.buffer),rr}function h(){return g.buffer!=b&&W(g.buffer),nr}function Jr(){return g.buffer!=b&&W(g.buffer),tr}function ue(){return g.buffer!=b&&W(g.buffer),ir}var i=typeof i<"u"?i:{},he,ge;i.ready=new Promise(function(e,r){he=e,ge=r});var ee={},H;for(H in i)i.hasOwnProperty(H)&&(ee[H]=i[H]);var Ue=[],Zr="./this.program",He=function(e,r){throw r},re=!1,B=!1,Ee=!1,en=!1;re=typeof window=="object",B=typeof importScripts=="function",Ee=typeof __Process$=="object"&&typeof __Process$.versions=="object"&&typeof __Process$.versions.node=="string",en=!re&&!Ee&&!B;var p=i.ENVIRONMENT_IS_PTHREAD||!1,L="";function Be(e){return i.locateFile?i.locateFile(e,L):L+e}var rn,nn,ye,tn;(re||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),Fe&&(L=Fe),L.indexOf("blob:")!==0?L=L.substr(0,L.lastIndexOf("/")+1):L="",rn=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(ye=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),nn=function(e,r,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){r(t.response);return}n()},t.onerror=n,t.send(null)},tn=function(e){document.title=e});var $e=i.print||console.log.bind(console),T=i.printErr||console.warn.bind(console);for(H in ee)ee.hasOwnProperty(H)&&(i[H]=ee[H]);ee=null,i.arguments&&(Ue=i.arguments),i.thisProgram&&(Zr=i.thisProgram),i.quit&&(He=i.quit);function ne(e){ne.shown||(ne.shown={}),ne.shown[e]||(ne.shown[e]=1,T(e))}var Ge=0,an=function(e){Ge=e},on=function(){return Ge},Oi=Atomics.load,ki=Atomics.store,Ri=Atomics.compareExchange,te;i.wasmBinary&&(te=i.wasmBinary);var Ve=i.noExitRuntime||!0;typeof WebAssembly!="object"&&X("no native wasm support detected");var g,qe,Te=!1,Ae;function Ke(e,r){e||X("Assertion failed: "+r)}function Xe(e,r,n){for(var t=r+n,a="";!(r>=t);){var o=e[r++];if(!o)return a;if(!(o&128)){a+=String.fromCharCode(o);continue}var s=e[r++]&63;if((o&224)==192){a+=String.fromCharCode((o&31)<<6|s);continue}var u=e[r++]&63;if((o&240)==224?o=(o&15)<<12|s<<6|u:o=(o&7)<<18|s<<12|u<<6|e[r++]&63,o<65536)a+=String.fromCharCode(o);else{var f=o-65536;a+=String.fromCharCode(55296|f>>10,56320|f&1023)}}return a}function $(e,r){return e?Xe(O(),e,r):""}function sn(e,r,n,t){if(!(t>0))return 0;for(var a=n,o=n+t-1,s=0;s<e.length;++s){var u=e.charCodeAt(s);if(u>=55296&&u<=57343){var f=e.charCodeAt(++s);u=65536+((u&1023)<<10)|f&1023}if(u<=127){if(n>=o)break;r[n++]=u}else if(u<=2047){if(n+1>=o)break;r[n++]=192|u>>6,r[n++]=128|u&63}else if(u<=65535){if(n+2>=o)break;r[n++]=224|u>>12,r[n++]=128|u>>6&63,r[n++]=128|u&63}else{if(n+3>=o)break;r[n++]=240|u>>18,r[n++]=128|u>>12&63,r[n++]=128|u>>6&63,r[n++]=128|u&63}}return r[n]=0,n-a}function ze(e,r,n){return sn(e,O(),r,n)}function Ye(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);t>=55296&&t<=57343&&(t=65536+((t&1023)<<10)|e.charCodeAt(++n)&1023),t<=127?++r:t<=2047?r+=2:t<=65535?r+=3:r+=4}return r}function un(e,r){for(var n="",t=0;!(t>=r/2);++t){var a=Z()[e+t*2>>1];if(a==0)break;n+=String.fromCharCode(a)}return n}function fn(e,r,n){if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var t=r,a=n<e.length*2?n/2:e.length,o=0;o<a;++o){var s=e.charCodeAt(o);Z()[r>>1]=s,r+=2}return Z()[r>>1]=0,r-t}function cn(e){return e.length*2}function ln(e,r){for(var n=0,t="";!(n>=r/4);){var a=c()[e+n*4>>2];if(a==0)break;if(++n,a>=65536){var o=a-65536;t+=String.fromCharCode(55296|o>>10,56320|o&1023)}else t+=String.fromCharCode(a)}return t}function dn(e,r,n){if(n===void 0&&(n=2147483647),n<4)return 0;for(var t=r,a=t+n-4,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343){var u=e.charCodeAt(++o);s=65536+((s&1023)<<10)|u&1023}if(c()[r>>2]=s,r+=4,r+4>a)break}return c()[r>>2]=0,r-t}function _n(e){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);t>=55296&&t<=57343&&++n,r+=4}return r}function vn(e,r){return e%r>0&&(e+=r-e%r),e}var b,Qe,Je,Ze,er,rr,nr,tr,ir;p&&(b=i.buffer);function W(e){b=e,i.HEAP8=Qe=new Int8Array(e),i.HEAP16=Ze=new Int16Array(e),i.HEAP32=rr=new Int32Array(e),i.HEAPU8=Je=new Uint8Array(e),i.HEAPU16=er=new Uint16Array(e),i.HEAPU32=nr=new Uint32Array(e),i.HEAPF32=tr=new Float32Array(e),i.HEAPF64=ir=new Float64Array(e)}var ar=i.INITIAL_MEMORY||16777216;if(p)g=i.wasmMemory,b=i.buffer;else if(i.wasmMemory)g=i.wasmMemory;else if(g=new WebAssembly.Memory({initial:ar/65536,maximum:32768,shared:!0}),!(g.buffer instanceof SharedArrayBuffer))throw T("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Ee&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");g&&(b=g.buffer),ar=b.byteLength,W(b);var C,or=[],sr=[],pn=[],ur=[],mn=!1,hn=!1;function gn(){if(!p){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Tn(i.preRun.shift());we(or)}}function fr(){mn=!0,!p&&we(sr)}function En(){p||(hn=!0)}function yn(){if(!p){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)bn(i.postRun.shift());we(ur)}}function Tn(e){or.unshift(e)}function An(e){sr.unshift(e)}function bn(e){ur.unshift(e)}var q=0,be=null,ie=null;function wn(e){Ke(!p,"addRunDependency cannot be used in a pthread worker"),q++,i.monitorRunDependencies&&i.monitorRunDependencies(q)}function Cn(e){if(q--,i.monitorRunDependencies&&i.monitorRunDependencies(q),q==0&&(be!==null&&(clearInterval(be),be=null),ie)){var r=ie;ie=null,r()}}i.preloadedImages={},i.preloadedAudios={};function X(e){i.onAbort&&i.onAbort(e),p&&console.error("Pthread aborting at "+new Error().stack),e+="",T(e),Te=!0,Ae=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var r=new WebAssembly.RuntimeError(e);throw ge(r),r}var Sn="data:application/octet-stream;base64,";function cr(e){return e.startsWith(Sn)}if(i.locateFile){var I="avif_enc_mt.wasm";cr(I)||(I=Be(I))}else var I=new URL("avif_enc_mt.wasm",import.meta.url).toString();function lr(e){try{if(e==I&&te)return new Uint8Array(te);if(ye)return ye(e);throw"both async and sync fetching of the wasm failed"}catch(r){X(r)}}function On(){return!te&&(re||B)&&typeof fetch=="function"?fetch(I,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+I+"'";return e.arrayBuffer()}).catch(function(){return lr(I)}):Promise.resolve().then(function(){return lr(I)})}function kn(){var e={a:ai};function r(s,u){var f=s.exports;if(i.asm=f,C=i.asm.ja,An(i.asm.fa),l.tlsInitFunctions.push(i.asm.ia),qe=u,!p){var d=l.unusedWorkers.length;l.unusedWorkers.forEach(function(_){l.loadWasmModuleToWorker(_,function(){--d||Cn("wasm-instantiate")})})}}p||wn("wasm-instantiate");function n(s){r(s.instance,s.module)}function t(s){return On().then(function(u){var f=WebAssembly.instantiate(u,e);return f}).then(s,function(u){T("failed to asynchronously prepare wasm: "+u),X(u)})}function a(){return!te&&typeof WebAssembly.instantiateStreaming=="function"&&!cr(I)&&typeof fetch=="function"?fetch(I,{credentials:"same-origin"}).then(function(s){var u=WebAssembly.instantiateStreaming(s,e);return u.then(n,function(f){return T("wasm streaming compile failed: "+f),T("falling back to ArrayBuffer instantiation"),t(n)})}):t(n)}if(i.instantiateWasm)try{var o=i.instantiateWasm(e,r);return o}catch(s){return T("Module.instantiateWasm callback failed with error: "+s),!1}return a().catch(ge),{}}var dr={601116:function(){throw"Canceled!"},601134:function(e,r){setTimeout(function(){Br(e,r)},0)}};function Rn(){l.initRuntime()}function we(e){for(;e.length>0;){var r=e.shift();if(typeof r=="function"){r(i);continue}var n=r.func;typeof n=="number"?r.arg===void 0?C.get(n)():C.get(n)(r.arg):n(r.arg===void 0?null:r.arg)}}var z={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function Ce(e,r){if(e<=0||e>se().length||e&!0||r<0)return-28;if(r==0)return 0;r>=2147483647&&(r=1/0);var n=Atomics.load(c(),Q>>2),t=0;if(n==e){var a=Atomics.compareExchange(c(),Q>>2,n,0);if(a==n&&(--r,t=1,r<=0))return 1}var o=Atomics.notify(c(),e>>2,r);if(o>=0)return o+t;throw"Atomics.notify returned an unexpected value "+o}i._emscripten_futex_wake=Ce;function Pn(e){if(p)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";c()[e+12>>2]=0;var r=l.pthreads[e];r.worker.terminate(),l.freeThreadData(r),l.runningWorkers.splice(l.runningWorkers.indexOf(r.worker),1),r.worker.pthread=void 0}function Nn(e){if(p)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";var r=l.pthreads[e];r.worker.postMessage({cmd:"cancel"})}function _r(e){if(p)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var r=l.pthreads[e];if(r){c()[e+12>>2]=0;var n=r.worker;l.returnWorkerToPool(n)}}var l={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var e=navigator.hardwareConcurrency,r=0;r<e;++r)l.allocateUnusedWorker()},initRuntime:function(){for(var e=j(228),r=0;r<228/4;++r)h()[e/4+r]=0;c()[e+12>>2]=e;var n=e+152;c()[n>>2]=n;for(var t=j(512),r=0;r<128;++r)h()[t/4+r]=0;Atomics.store(h(),e+100>>2,t),Atomics.store(h(),e+40>>2,e),De(e,!B,1),Ur(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;l.threadExitHandlers.length>0;)l.threadExitHandlers.pop()();p&&V()&&Vr()},runExitHandlersAndDeinitThread:function(e,r){Atomics.store(h(),e+56>>2,1),Atomics.store(h(),e+60>>2,0),l.runExitHandlers(),Atomics.store(h(),e+4>>2,r),Atomics.store(h(),e+0>>2,1),Ce(e+0,2147483647),De(0,0,0)},setExitStatus:function(e){Ae=e},threadExit:function(e){var r=V();r&&(l.runExitHandlersAndDeinitThread(r,e),p&&postMessage({cmd:"exit"}))},threadCancel:function(){l.runExitHandlersAndDeinitThread(V(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in l.pthreads){var r=l.pthreads[e];r&&r.worker&&l.returnWorkerToPool(r.worker)}l.pthreads={};for(var n=0;n<l.unusedWorkers.length;++n){var t=l.unusedWorkers[n];t.terminate()}l.unusedWorkers=[];for(var n=0;n<l.runningWorkers.length;++n){var t=l.runningWorkers[n],r=t.pthread;l.freeThreadData(r),t.terminate()}l.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var r=c()[e.threadInfoStruct+100>>2];c()[e.threadInfoStruct+100>>2]=0,R(r),R(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&R(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){l.runWithoutMainThreadQueuedCalls(function(){delete l.pthreads[e.pthread.threadInfoStruct],l.unusedWorkers.push(e),l.runningWorkers.splice(l.runningWorkers.indexOf(e),1),l.freeThreadData(e.pthread),e.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(e){c()[Yr>>2]=0;try{e()}finally{c()[Yr>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in l.tlsInitFunctions)l.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(e,r){e.onmessage=function(n){var t=n.data,a=t.cmd;if(e.pthread&&(l.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),t.targetThread&&t.targetThread!=V()){var o=l.pthreads[t.targetThread];o?o.worker.postMessage(n.data,t.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+t.targetThread+", but that thread no longer exists!"),l.currentProxiedOperationCallerThread=void 0;return}if(a==="processQueuedMainThreadWork")_e();else if(a==="spawnThread")Mr(n.data);else if(a==="cleanupThread")_r(t.thread);else if(a==="killThread")Pn(t.thread);else if(a==="cancelThread")Nn(t.thread);else if(a==="loaded")e.loaded=!0,r&&r(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if(a==="print")$e("Thread "+t.threadId+": "+t.text);else if(a==="printErr")T("Thread "+t.threadId+": "+t.text);else if(a==="alert")alert("Thread "+t.threadId+": "+t.text);else if(a==="exit"){var s=e.pthread&&Atomics.load(h(),e.pthread.threadInfoStruct+64>>2);s&&l.returnWorkerToPool(e)}else if(a==="exitProcess")try{wi(t.returnCode)}catch(u){if(u instanceof me)return;throw u}else a==="cancelDone"?l.returnWorkerToPool(e):a==="objectTransfer"?l.receiveObjectTransfer(n.data):n.data.target==="setimmediate"?e.postMessage(n.data):T("worker sent an unknown command "+a);l.currentProxiedOperationCallerThread=void 0},e.onerror=function(n){T("pthread sent an error! "+n.filename+":"+n.lineno+": "+n.message)},e.postMessage({cmd:"load",urlOrBlob:i.mainScriptUrlOrBlob,wasmMemory:g,wasmModule:qe})},allocateUnusedWorker:function(){if(!i.locateFile){l.unusedWorkers.push(new Worker(new URL("avif_enc_mt.worker.js",import.meta.url)));return}var e=Be("avif_enc_mt.worker.js");l.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return l.unusedWorkers.length==0&&(l.allocateUnusedWorker(),l.loadWasmModuleToWorker(l.unusedWorkers[0])),l.unusedWorkers.pop()},busySpinWait:function(e){for(var r=performance.now()+e;performance.now()<r;);}};function xn(e,r){Kr(e,r),P(e)}i.establishStackSpace=xn;function In(e,r){return C.get(e)(r)}i.invokeEntryPoint=In;var Ln=0;function Se(){return Ve||Ln>0}i.keepRuntimeAlive=Se;function Wn(e,r,n,t){X("Assertion failed: "+$(e)+", at: "+[r?$(r):"unknown filename",n,t?$(t):"unknown function"])}var Oe;p?Oe=function(){return performance.now()-i.__performance_now_clock_drift}:Oe=function(){return performance.now()};function vr(e,r){l.threadExitHandlers.push(function(){C.get(e)(r)})}function Dn(e,r){return vr(e,r)}var M={mappings:{},buffers:[null,[],[]],printChar:function(e,r){var n=M.buffers[e];r===0||r===10?((e===1?$e:T)(Xe(n,0)),n.length=0):n.push(r)},varargs:void 0,get:function(){M.varargs+=4;var e=c()[M.varargs-4>>2];return e},getStr:function(e){var r=$(e);return r},get64:function(e,r){return e}};function pr(e,r,n){return p?G(1,1,e,r,n):(M.varargs=n,0)}function mr(e,r,n){return p?G(2,1,e,r,n):(M.varargs=n,0)}function hr(e,r,n){if(p)return G(3,1,e,r,n);M.varargs=n}var fe={};function gr(e){for(;e.length;){var r=e.pop(),n=e.pop();n(r)}}function ce(e){return this.fromWireType(h()[e>>2])}var Y={},K={},le={},Mn=48,Fn=57;function jn(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=Mn&&r<=Fn?"_"+e:e}function Un(e,r){return e=jn(e),function(){return r.apply(this,arguments)}}function ke(e,r){var n=Un(r,function(t){this.name=r,this.message=t;var a=new Error(t).stack;a!==void 0&&(this.stack=this.toString()+`
`+a.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var Er=void 0;function yr(e){throw new Er(e)}function Tr(e,r,n){e.forEach(function(u){le[u]=r});function t(u){var f=n(u);f.length!==e.length&&yr("Mismatched type converter count");for(var d=0;d<e.length;++d)F(e[d],f[d])}var a=new Array(r.length),o=[],s=0;r.forEach(function(u,f){K.hasOwnProperty(u)?a[f]=K[u]:(o.push(u),Y.hasOwnProperty(u)||(Y[u]=[]),Y[u].push(function(){a[f]=K[u],++s,s===o.length&&t(a)}))}),o.length===0&&t(a)}function Hn(e){var r=fe[e];delete fe[e];var n=r.rawConstructor,t=r.rawDestructor,a=r.fields,o=a.map(function(s){return s.getterReturnType}).concat(a.map(function(s){return s.setterArgumentType}));Tr([e],o,function(s){var u={};return a.forEach(function(f,d){var _=f.fieldName,m=s[d],w=f.getter,y=f.getterContext,U=s[d+a.length],A=f.setter,J=f.setterContext;u[_]={read:function(oe){return m.fromWireType(w(y,oe))},write:function(oe,Ci){var Qr=[];A(J,oe,U.toWireType(Qr,Ci)),gr(Qr)}}}),[{name:r.name,fromWireType:function(f){var d={};for(var _ in u)d[_]=u[_].read(f);return t(f),d},toWireType:function(f,d){for(var _ in u)if(!(_ in d))throw new TypeError('Missing field:  "'+_+'"');var m=n();for(_ in u)u[_].write(m,d[_]);return f!==null&&f.push(t,m),m},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:t}]})}function Bn(e,r,n,t,a){}function Re(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function $n(){for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);Ar=e}var Ar=void 0;function S(e){for(var r="",n=e;O()[n];)r+=Ar[O()[n++]];return r}var br=void 0;function k(e){throw new br(e)}function F(e,r,n){if(n=n||{},!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=r.name;if(e||k('type "'+t+'" must have a positive integer typeid pointer'),K.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;k("Cannot register type '"+t+"' twice")}if(K[e]=r,delete le[e],Y.hasOwnProperty(e)){var a=Y[e];delete Y[e],a.forEach(function(o){o()})}}function Gn(e,r,n,t,a){var o=Re(n);r=S(r),F(e,{name:r,fromWireType:function(s){return!!s},toWireType:function(s,u){return u?t:a},argPackAdvance:8,readValueFromPointer:function(s){var u;if(n===1)u=se();else if(n===2)u=Z();else if(n===4)u=c();else throw new TypeError("Unknown boolean type size: "+r);return this.fromWireType(u[s>>o])},destructorFunction:null})}var Pe=[],N=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function wr(e){e>4&&--N[e].refcount===0&&(N[e]=void 0,Pe.push(e))}function Vn(){for(var e=0,r=5;r<N.length;++r)N[r]!==void 0&&++e;return e}function qn(){for(var e=5;e<N.length;++e)if(N[e]!==void 0)return N[e];return null}function Kn(){i.count_emval_handles=Vn,i.get_first_emval=qn}function de(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var r=Pe.length?Pe.pop():N.length;return N[r]={refcount:1,value:e},r}}}function Xn(e,r){r=S(r),F(e,{name:r,fromWireType:function(n){var t=N[n].value;return wr(n),t},toWireType:function(n,t){return de(t)},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:null})}function Ne(e){if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e}function zn(e,r){switch(r){case 2:return function(n){return this.fromWireType(Jr()[n>>2])};case 3:return function(n){return this.fromWireType(ue()[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Yn(e,r,n){var t=Re(n);r=S(r),F(e,{name:r,fromWireType:function(a){return a},toWireType:function(a,o){if(typeof o!="number"&&typeof o!="boolean")throw new TypeError('Cannot convert "'+Ne(o)+'" to '+this.name);return o},argPackAdvance:8,readValueFromPointer:zn(r,t),destructorFunction:null})}function Qn(e,r,n,t,a){var o=r.length;o<2&&k("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=r[1]!==null&&n!==null,u=!1,f=1;f<r.length;++f)if(r[f]!==null&&r[f].destructorFunction===void 0){u=!0;break}var d=r[0].name!=="void",_=o-2,m=new Array(_),w=[],y=[];return function(){arguments.length!==_&&k("function "+e+" called with "+arguments.length+" arguments, expected "+_+" args!"),y.length=0;var U;w.length=s?2:1,w[0]=a,s&&(U=r[1].toWireType(y,this),w[1]=U);for(var A=0;A<_;++A)m[A]=r[A+2].toWireType(y,arguments[A]),w.push(m[A]);var J=t.apply(null,w);if(u)gr(y);else for(var A=s?1:2;A<r.length;A++){var oe=A===1?U:m[A-2];r[A].destructorFunction!==null&&r[A].destructorFunction(oe)}if(d)return r[0].fromWireType(J)}}function Jn(e,r,n){if(e[r].overloadTable===void 0){var t=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||k("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[r].overloadTable+")!"),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[t.argCount]=t}}function Zn(e,r,n){i.hasOwnProperty(e)?((n===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[n]!==void 0)&&k("Cannot register public name '"+e+"' twice"),Jn(i,e,e),i.hasOwnProperty(n)&&k("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[e].overloadTable[n]=r):(i[e]=r,n!==void 0&&(i[e].numArguments=n))}function et(e,r){for(var n=[],t=0;t<e;t++)n.push(c()[(r>>2)+t]);return n}function rt(e,r,n){i.hasOwnProperty(e)||yr("Replacing nonexistant public symbol"),i[e].overloadTable!==void 0&&n!==void 0?i[e].overloadTable[n]=r:(i[e]=r,i[e].argCount=n)}function nt(e,r,n){var t=i["dynCall_"+e];return n&&n.length?t.apply(null,[r].concat(n)):t.call(null,r)}function tt(e,r,n){return e.includes("j")?nt(e,r,n):C.get(r).apply(null,n)}function it(e,r){var n=[];return function(){n.length=arguments.length;for(var t=0;t<arguments.length;t++)n[t]=arguments[t];return tt(e,r,n)}}function ae(e,r){e=S(e);function n(){return e.includes("j")?it(e,r):C.get(r)}var t=n();return typeof t!="function"&&k("unknown function pointer with signature "+e+": "+r),t}var Cr=void 0;function Sr(e){var r=jr(e),n=S(r);return R(r),n}function at(e,r){var n=[],t={};function a(o){if(!t[o]&&!K[o]){if(le[o]){le[o].forEach(a);return}n.push(o),t[o]=!0}}throw r.forEach(a),new Cr(e+": "+n.map(Sr).join([", "]))}function ot(e,r,n,t,a,o){var s=et(r,n);e=S(e),a=ae(t,a),Zn(e,function(){at("Cannot call "+e+" due to unbound types",s)},r-1),Tr([],s,function(u){var f=[u[0],null].concat(u.slice(1));return rt(e,Qn(e,f,null,a,o),r-1),[]})}function st(e,r,n){switch(r){case 0:return n?function(a){return se()[a]}:function(a){return O()[a]};case 1:return n?function(a){return Z()[a>>1]}:function(a){return je()[a>>1]};case 2:return n?function(a){return c()[a>>2]}:function(a){return h()[a>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function ut(e,r,n,t,a){r=S(r),a===-1&&(a=4294967295);var o=Re(n),s=function(d){return d};if(t===0){var u=32-8*n;s=function(d){return d<<u>>>u}}var f=r.includes("unsigned");F(e,{name:r,fromWireType:s,toWireType:function(d,_){if(typeof _!="number"&&typeof _!="boolean")throw new TypeError('Cannot convert "'+Ne(_)+'" to '+this.name);if(_<t||_>a)throw new TypeError('Passing a number "'+Ne(_)+'" from JS side to C/C++ side to an argument of type "'+r+'", which is outside the valid range ['+t+", "+a+"]!");return f?_>>>0:_|0},argPackAdvance:8,readValueFromPointer:st(r,o,t!==0),destructorFunction:null})}function ft(e,r,n){var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=t[r];function o(s){s=s>>2;var u=h(),f=u[s],d=u[s+1];return new a(b,d,f)}n=S(n),F(e,{name:n,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function ct(e,r){r=S(r);var n=r==="std::string";F(e,{name:r,fromWireType:function(t){var a=h()[t>>2],o;if(n)for(var s=t+4,u=0;u<=a;++u){var f=t+4+u;if(u==a||O()[f]==0){var d=f-s,_=$(s,d);o===void 0?o=_:(o+="\0",o+=_),s=f+1}}else{for(var m=new Array(a),u=0;u<a;++u)m[u]=String.fromCharCode(O()[t+4+u]);o=m.join("")}return R(t),o},toWireType:function(t,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var o,s=typeof a=="string";s||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||k("Cannot pass non-string to std::string"),n&&s?o=function(){return Ye(a)}:o=function(){return a.length};var u=o(),f=j(4+u+1);if(h()[f>>2]=u,n&&s)ze(a,f+4,u+1);else if(s)for(var d=0;d<u;++d){var _=a.charCodeAt(d);_>255&&(R(f),k("String has UTF-16 code units that do not fit in 8 bits")),O()[f+4+d]=_}else for(var d=0;d<u;++d)O()[f+4+d]=a[d];return t!==null&&t.push(R,f),f},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:function(t){R(t)}})}function lt(e,r,n){n=S(n);var t,a,o,s,u;r===2?(t=un,a=fn,s=cn,o=function(){return je()},u=1):r===4&&(t=ln,a=dn,s=_n,o=function(){return h()},u=2),F(e,{name:n,fromWireType:function(f){for(var d=h()[f>>2],_=o(),m,w=f+4,y=0;y<=d;++y){var U=f+4+y*r;if(y==d||_[U>>u]==0){var A=U-w,J=t(w,A);m===void 0?m=J:(m+="\0",m+=J),w=U+r}}return R(f),m},toWireType:function(f,d){typeof d!="string"&&k("Cannot pass non-string to C++ string type "+n);var _=s(d),m=j(4+_+r);return h()[m>>2]=_>>u,a(d,m+4,_+r),f!==null&&f.push(R,m),m},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:function(f){R(f)}})}function dt(e,r,n,t,a,o){fe[e]={name:S(r),rawConstructor:ae(n,t),rawDestructor:ae(a,o),fields:[]}}function _t(e,r,n,t,a,o,s,u,f,d){fe[e].fields.push({fieldName:S(r),getterReturnType:n,getter:ae(t,a),getterContext:o,setterArgumentType:s,setter:ae(u,f),setterContext:d})}function vt(e,r){r=S(r),F(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:function(){},toWireType:function(n,t){}})}function pt(e,r){if(e==r)postMessage({cmd:"processQueuedMainThreadWork"});else if(p)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=l.pthreads[e],t=n&&n.worker;if(!t)return;t.postMessage({cmd:"processThreadQueue"})}return 1}var mt={};function ht(e){var r=mt[e];return r===void 0?S(e):r}function Or(){if(typeof globalThis=="object")return globalThis;function e(r){r.$$$embind_global$$$=r;var n=typeof $$$embind_global$$$=="object"&&r.$$$embind_global$$$===r;return n||delete r.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof __global$=="object"&&e(__global$)?$$$embind_global$$$=__global$:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function gt(e){return e===0?de(Or()):(e=ht(e),de(Or()[e]))}function Et(e){e>4&&(N[e].refcount+=1)}function yt(e,r){var n=K[e];return n===void 0&&k(r+" has unknown type "+Sr(e)),n}function Tt(e){var r=new Array(e+1);return function(n,t,a){r[0]=n;for(var o=0;o<e;++o){var s=yt(c()[(t>>2)+o],"parameter "+o);r[o+1]=s.readValueFromPointer(a),a+=s.argPackAdvance}var u=new(n.bind.apply(n,r));return de(u)}}var kr={};function At(e){return e||k("Cannot use deleted val. handle = "+e),N[e].value}function bt(e,r,n,t){e=At(e);var a=kr[r];return a||(a=Tt(r),kr[r]=a),a(e,n,t)}function wt(){X()}var xe=[];function Ct(e,r){xe.length=0;var n;for(r>>=2;n=O()[e++];){var t=n<105;t&&r&1&&r++,xe.push(t?ue()[r++>>1]:c()[r]),++r}return xe}function St(e,r,n){var t=Ct(r,n);return dr[e].apply(null,t)}function Rr(){B||ne("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Ot(e,r){}function Pr(e,r,n){if(e<=0||e>se().length||e&!0)return-28;if(re){if(Atomics.load(c(),e>>2)!=r)return-6;for(var a=performance.now(),o=a+n,s=Atomics.exchange(c(),Q>>2,e);;){if(a=performance.now(),a>o)return s=Atomics.exchange(c(),Q>>2,0),-73;if(s=Atomics.exchange(c(),Q>>2,0),s==0)break;if(_e(),Atomics.load(c(),e>>2)!=r)return-6;s=Atomics.exchange(c(),Q>>2,e)}return 0}else{var t=Atomics.wait(c(),e>>2,r,n);if(t==="timed-out")return-73;if(t==="not-equal")return-6;if(t==="ok")return 0;throw"Atomics.wait returned an unexpected value "+t}}function kt(e,r){throw D(e,r||1),"longjmp"}function Rt(e,r){return kt(e,r)}function Pt(e,r,n){O().copyWithin(e,r,r+n)}function Nt(){return navigator.hardwareConcurrency}function G(e,r){for(var n=arguments.length-2,t=x(),a=n,o=ve(a*8),s=o>>3,u=0;u<n;u++){var f=arguments[2+u];ue()[s+u]=f}var d=Gr(e,a,o,r);return P(t),d}var Ie=[];function xt(e,r,n){Ie.length=r;for(var t=n>>3,a=0;a<r;a++)Ie[a]=ue()[t+a];var o=e<0,s=o?dr[-e-1]:ii[e];return s.apply(null,Ie)}function It(e){try{return g.grow(e-b.byteLength+65535>>>16),W(g.buffer),1}catch{}}function Lt(e){var r=O().length;if(e=e>>>0,e<=r)return!1;var n=2147483648;if(e>n)return!1;for(var t=1;t<=4;t*=2){var a=r*(1+.2/t);a=Math.min(a,e+100663296);var o=Math.min(n,vn(Math.max(e,a),65536)),s=It(o);if(s)return!0}return!1}var v={inEventHandler:0,removeAllEventListeners:function(){for(var e=v.eventHandlers.length-1;e>=0;--e)v._removeHandler(e);v.eventHandlers=[],v.deferredCalls=[]},registerRemoveEventListeners:function(){v.removeEventListenersRegistered||(pn.push(v.removeAllEventListeners),v.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,r,n){function t(s,u){if(s.length!=u.length)return!1;for(var f in s)if(s[f]!=u[f])return!1;return!0}for(var a in v.deferredCalls){var o=v.deferredCalls[a];if(o.targetFunction==e&&t(o.argsList,n))return}v.deferredCalls.push({targetFunction:e,precedence:r,argsList:n}),v.deferredCalls.sort(function(s,u){return s.precedence<u.precedence})},removeDeferredCalls:function(e){for(var r=0;r<v.deferredCalls.length;++r)v.deferredCalls[r].targetFunction==e&&(v.deferredCalls.splice(r,1),--r)},canPerformEventHandlerRequests:function(){return v.inEventHandler&&v.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(v.canPerformEventHandlerRequests())for(var e=0;e<v.deferredCalls.length;++e){var r=v.deferredCalls[e];v.deferredCalls.splice(e,1),--e,r.targetFunction.apply(null,r.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,r){for(var n=0;n<v.eventHandlers.length;++n)v.eventHandlers[n].target==e&&(!r||r==v.eventHandlers[n].eventTypeString)&&v._removeHandler(n--)},_removeHandler:function(e){var r=v.eventHandlers[e];r.target.removeEventListener(r.eventTypeString,r.eventListenerFunc,r.useCapture),v.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var r=function(a){++v.inEventHandler,v.currentEventHandler=e,v.runDeferredCalls(),e.handlerFunc(a),v.runDeferredCalls(),--v.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=r,e.target.addEventListener(e.eventTypeString,r,e.useCapture),v.eventHandlers.push(e),v.registerRemoveEventListeners();else for(var n=0;n<v.eventHandlers.length;++n)v.eventHandlers[n].target==e.target&&v.eventHandlers[n].eventTypeString==e.eventTypeString&&v._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,r,n,t,a){var o=x(),s=ve(12);c()[s>>2]=n,c()[s+4>>2]=t,c()[s+8>>2]=a,We(0,e,637534208,r,t,s),P(o)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return l.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Wt(e){var r=Ye(e)+1,n=j(r);return ze(e,n,r),n}function Dt(e,r,n,t){var a=x(),o=ve(12),s=0;r&&(s=Wt(r)),c()[o>>2]=s,c()[o+4>>2]=n,c()[o+8>>2]=t,We(0,e,657457152,0,s,o),P(a)}function Mt(e,r,n,t){r=r?$(r):"",Dt(e,r,n,t)}function Ft(e){return e>2?$(e):e}var jt=[0,typeof document<"u"?document:0,typeof window<"u"?window:0];function Ut(e){e=Ft(e);var r=jt[e]||(typeof document<"u"?document.querySelector(e):void 0);return r}function Le(e){return Ut(e)}function Nr(e,r,n){var t=Le(e);if(!t)return-4;if(t.canvasSharedPtr&&(c()[t.canvasSharedPtr>>2]=r,c()[t.canvasSharedPtr+4>>2]=n),t.offscreenCanvas||!t.controlTransferredOffscreen){t.offscreenCanvas&&(t=t.offscreenCanvas);var a=!1;if(t.GLctxObject&&t.GLctxObject.GLctx){var o=t.GLctxObject.GLctx.getParameter(2978);a=o[0]===0&&o[1]===0&&o[2]===t.width&&o[3]===t.height}t.width=r,t.height=n,a&&t.GLctxObject.GLctx.viewport(0,0,r,n)}else if(t.canvasSharedPtr){var s=c()[t.canvasSharedPtr+8>>2];return Mt(s,e,r,n),1}else return-4;return 0}function xr(e,r,n){return p?G(4,1,e,r,n):Nr(e,r,n)}function Ht(e,r,n){var t=Le(e);return t?Nr(e,r,n):xr(e,r,n)}function Bt(e){}function $t(e){var r=e.getExtension("ANGLE_instanced_arrays");if(r)return e.vertexAttribDivisor=function(n,t){r.vertexAttribDivisorANGLE(n,t)},e.drawArraysInstanced=function(n,t,a,o){r.drawArraysInstancedANGLE(n,t,a,o)},e.drawElementsInstanced=function(n,t,a,o,s){r.drawElementsInstancedANGLE(n,t,a,o,s)},1}function Gt(e){var r=e.getExtension("OES_vertex_array_object");if(r)return e.createVertexArray=function(){return r.createVertexArrayOES()},e.deleteVertexArray=function(n){r.deleteVertexArrayOES(n)},e.bindVertexArray=function(n){r.bindVertexArrayOES(n)},e.isVertexArray=function(n){return r.isVertexArrayOES(n)},1}function Vt(e){var r=e.getExtension("WEBGL_draw_buffers");if(r)return e.drawBuffers=function(n,t){r.drawBuffersWEBGL(n,t)},1}function qt(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var E={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(r){E.lastError||(E.lastError=r)},getNewId:function(e){for(var r=E.counter++,n=e.length;n<r;n++)e[n]=null;return r},getSource:function(e,r,n,t){for(var a="",o=0;o<r;++o){var s=t?c()[t+o*4>>2]:-1;a+=$(c()[n+o*4>>2],s<0?void 0:s)}return a},createContext:function(e,r){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(a,o){var s=e.getContextSafariWebGL2Fixed(a,o);return a=="webgl"==s instanceof WebGLRenderingContext?s:null});var n=e.getContext("webgl",r);if(!n)return 0;var t=E.registerContext(n,r);return t},registerContext:function(e,r){var n=j(8);c()[n+4>>2]=V();var t={handle:n,attributes:r,version:r.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=t),E.contexts[n]=t,(typeof r.enableExtensionsByDefault>"u"||r.enableExtensionsByDefault)&&E.initExtensions(t),n},makeContextCurrent:function(e){return E.currentContext=E.contexts[e],i.ctx=Fr=E.currentContext&&E.currentContext.GLctx,!(e&&!Fr)},getContext:function(e){return E.contexts[e]},deleteContext:function(e){E.currentContext===E.contexts[e]&&(E.currentContext=null),typeof v=="object"&&v.removeAllHandlersOnTarget(E.contexts[e].GLctx.canvas),E.contexts[e]&&E.contexts[e].GLctx.canvas&&(E.contexts[e].GLctx.canvas.GLctxObject=void 0),R(E.contexts[e].handle),E.contexts[e]=null},initExtensions:function(e){if(e||(e=E.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var r=e.GLctx;$t(r),Gt(r),Vt(r),r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query"),qt(r);var n=r.getSupportedExtensions()||[];n.forEach(function(t){!t.includes("lose_context")&&!t.includes("debug")&&r.getExtension(t)})}}},Kt=["default","low-power","high-performance"];function Xt(e,r){var n=r>>2,t=c()[n+6],a={alpha:!!c()[n+0],depth:!!c()[n+1],stencil:!!c()[n+2],antialias:!!c()[n+3],premultipliedAlpha:!!c()[n+4],preserveDrawingBuffer:!!c()[n+5],powerPreference:Kt[t],failIfMajorPerformanceCaveat:!!c()[n+7],majorVersion:c()[n+8],minorVersion:c()[n+9],enableExtensionsByDefault:c()[n+10],explicitSwapControl:c()[n+11],proxyContextToMainThread:c()[n+12],renderViaOffscreenBackBuffer:c()[n+13]},o=Le(e);if(!o||a.explicitSwapControl)return 0;var s=E.createContext(o,a);return s}function zt(e,r){return Xt(e,r)}function Ir(e){return p?G(5,1,e):0}function Lr(e,r,n,t){if(p)return G(6,1,e,r,n,t);var a=M.getStreamFromFD(e),o=M.doReadv(a,r,n);return c()[t>>2]=o,0}function Wr(e,r,n,t,a){if(p)return G(7,1,e,r,n,t,a)}function Dr(e,r,n,t){if(p)return G(8,1,e,r,n,t);for(var a=0,o=0;o<n;o++){for(var s=c()[r+o*8>>2],u=c()[r+(o*8+4)>>2],f=0;f<u;f++)M.printChar(e,O()[s+f]);a+=u}return c()[t>>2]=a,0}function Yt(){return on()}function Qt(e){var r=l.threadExitHandlers.pop();e&&r()}function Mr(e){if(p)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var r=l.getNewWorker();if(!r)return 6;if(r.pthread!==void 0)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";l.runningWorkers.push(r);for(var n=j(128*4),t=0;t<128;++t)c()[n+t*4>>2]=0;var a=e.stackBase+e.stackSize,o=l.pthreads[e.pthread_ptr]={worker:r,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},s=o.threadInfoStruct>>2;Atomics.store(h(),s+16,e.detached),Atomics.store(h(),s+25,n),Atomics.store(h(),s+10,o.threadInfoStruct),Atomics.store(h(),s+20,e.stackSize),Atomics.store(h(),s+19,a),Atomics.store(h(),s+26,e.stackSize),Atomics.store(h(),s+28,a),Atomics.store(h(),s+29,e.detached);var u=qr(),f=u+40;Atomics.store(h(),s+43,f),r.pthread=o;var d={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};return r.runPthread=function(){d.time=performance.now(),r.postMessage(d,e.transferList)},r.loaded&&(r.runPthread(),delete r.runPthread),0}function Jt(e,r,n,t){if(typeof SharedArrayBuffer>"u")return T("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return T("pthread_create called with a null thread pointer!"),28;var a=[],o=0;if(p&&(a.length===0||o))return $r(687865856,e,r,n,t);if(o)return o;var s=0,u=0,f=0;r&&r!=-1?(s=c()[r>>2],s+=81920,u=c()[r+8>>2],f=c()[r+12>>2]!==0):s=2097152;var d=u==0;d?u=Xr(16,s):(u-=s,Ke(u>0));for(var _=j(228),m=0;m<57;++m)h()[(_>>2)+m]=0;c()[e>>2]=_,c()[_+12>>2]=_;var w=_+152;c()[w>>2]=w;var y={stackBase:u,stackSize:s,allocatedOwnStack:d,detached:f,startRoutine:n,pthread_ptr:_,arg:t,transferList:a};return p?(y.cmd="spawnThread",postMessage(y,a),0):Mr(y)}function Zt(){if(p){var e=V();if(e){var r=Atomics.load(h(),e+56>>2);if(!r){var n=Atomics.load(h(),e+0>>2);if(n==2)throw"Canceled!"}}}}function ei(e,r,n){if(!e)return T("pthread_join attempted on a null thread pointer!"),z.ESRCH;if(p&&V()==e)return T("PThread "+e+" is attempting to join to itself!"),z.EDEADLK;if(!p&&Hr()==e)return T("Main thread "+e+" is attempting to join to itself!"),z.EDEADLK;var t=c()[e+12>>2];if(t!==e)return T("pthread_join attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),z.ESRCH;var a=Atomics.load(h(),e+64>>2);if(a)return T("Attempted to join thread "+e+", which was already detached!"),z.EINVAL;for(n&&Rr();;){var o=Atomics.load(h(),e+0>>2);if(o==1){var s=Atomics.load(h(),e+4>>2);return r&&(c()[r>>2]=s),Atomics.store(h(),e+64>>2,1),p?postMessage({cmd:"cleanupThread",thread:e}):_r(e),0}if(!n)return z.EBUSY;Zt(),p||_e(),Pr(e+0,o,p?100:1)}}function ri(e,r){return ei(e,r,!0)}function ni(e){an(e)}function ti(e){var r=Date.now()/1e3|0;return e&&(c()[e>>2]=r),r}p||l.initMainThreadBlock(),Er=i.InternalError=ke(Error,"InternalError"),$n(),br=i.BindingError=ke(Error,"BindingError"),Kn(),Cr=i.UnboundTypeError=ke(Error,"UnboundTypeError");var Fr,ii=[null,pr,mr,hr,xr,Ir,Lr,Wr,Dr],ai={k:Wn,C:Dn,y:pr,X:mr,Y:hr,F:Hn,I:Bn,aa:Gn,$:Xn,z:Yn,E:ot,j:ut,g:ft,A:ct,r:lt,K:dt,h:_t,ba:vt,T:pt,p:wr,_:gt,D:Et,Q:bt,i:wt,w:St,O:Rr,v:Ot,l:Pr,m:Ce,o:Oe,e:Rt,M:Pt,ea:Nt,P:xt,N:Lt,R:Ht,u:Bt,S:zt,x:Ir,W:Lr,H:Wr,Z:Dr,c:Yt,L:Rn,q:Ti,s:Ai,t:Ei,J:yi,G:bi,n:mi,f:gi,d:hi,a:g||i.wasmMemory,U:Qt,V:vr,B:Jt,ca:ri,b:ni,da:ti},Pi=kn(),oi=i.___wasm_call_ctors=function(){return(oi=i.___wasm_call_ctors=i.asm.fa).apply(null,arguments)},j=i._malloc=function(){return(j=i._malloc=i.asm.ga).apply(null,arguments)},R=i._free=function(){return(R=i._free=i.asm.ha).apply(null,arguments)},si=i._emscripten_tls_init=function(){return(si=i._emscripten_tls_init=i.asm.ia).apply(null,arguments)},jr=i.___getTypeName=function(){return(jr=i.___getTypeName=i.asm.ka).apply(null,arguments)},ui=i.___embind_register_native_and_builtin_types=function(){return(ui=i.___embind_register_native_and_builtin_types=i.asm.la).apply(null,arguments)},fi=i._emscripten_current_thread_process_queued_calls=function(){return(fi=i._emscripten_current_thread_process_queued_calls=i.asm.ma).apply(null,arguments)},Ur=i._emscripten_register_main_browser_thread_id=function(){return(Ur=i._emscripten_register_main_browser_thread_id=i.asm.na).apply(null,arguments)},Hr=i._emscripten_main_browser_thread_id=function(){return(Hr=i._emscripten_main_browser_thread_id=i.asm.oa).apply(null,arguments)},Br=i.__emscripten_do_dispatch_to_thread=function(){return(Br=i.__emscripten_do_dispatch_to_thread=i.asm.pa).apply(null,arguments)},$r=i._emscripten_sync_run_in_main_thread_4=function(){return($r=i._emscripten_sync_run_in_main_thread_4=i.asm.qa).apply(null,arguments)},_e=i._emscripten_main_thread_process_queued_calls=function(){return(_e=i._emscripten_main_thread_process_queued_calls=i.asm.ra).apply(null,arguments)},Gr=i._emscripten_run_in_main_runtime_thread_js=function(){return(Gr=i._emscripten_run_in_main_runtime_thread_js=i.asm.sa).apply(null,arguments)},We=i.__emscripten_call_on_thread=function(){return(We=i.__emscripten_call_on_thread=i.asm.ta).apply(null,arguments)},De=i.__emscripten_thread_init=function(){return(De=i.__emscripten_thread_init=i.asm.ua).apply(null,arguments)},V=i._pthread_self=function(){return(V=i._pthread_self=i.asm.va).apply(null,arguments)},Vr=i.___pthread_tsd_run_dtors=function(){return(Vr=i.___pthread_tsd_run_dtors=i.asm.wa).apply(null,arguments)},qr=i._emscripten_get_global_libc=function(){return(qr=i._emscripten_get_global_libc=i.asm.xa).apply(null,arguments)},x=i.stackSave=function(){return(x=i.stackSave=i.asm.ya).apply(null,arguments)},P=i.stackRestore=function(){return(P=i.stackRestore=i.asm.za).apply(null,arguments)},ve=i.stackAlloc=function(){return(ve=i.stackAlloc=i.asm.Aa).apply(null,arguments)},Kr=i._emscripten_stack_set_limits=function(){return(Kr=i._emscripten_stack_set_limits=i.asm.Ba).apply(null,arguments)},D=i._setThrew=function(){return(D=i._setThrew=i.asm.Ca).apply(null,arguments)},Xr=i._memalign=function(){return(Xr=i._memalign=i.asm.Da).apply(null,arguments)},ci=i.dynCall_jiiiiiiiii=function(){return(ci=i.dynCall_jiiiiiiiii=i.asm.Ea).apply(null,arguments)},zr=i.dynCall_ijiii=function(){return(zr=i.dynCall_ijiii=i.asm.Fa).apply(null,arguments)},li=i.dynCall_jiji=function(){return(li=i.dynCall_jiji=i.asm.Ga).apply(null,arguments)},di=i.dynCall_jiiiiiiii=function(){return(di=i.dynCall_jiiiiiiii=i.asm.Ha).apply(null,arguments)},_i=i.dynCall_jiiiiii=function(){return(_i=i.dynCall_jiiiiii=i.asm.Ia).apply(null,arguments)},vi=i.dynCall_jiiiii=function(){return(vi=i.dynCall_jiiiii=i.asm.Ja).apply(null,arguments)},pi=i.dynCall_iiijii=function(){return(pi=i.dynCall_iiijii=i.asm.Ka).apply(null,arguments)},Yr=i.__emscripten_allow_main_runtime_queued_calls=600960,Q=i.__emscripten_main_thread_futex=897316;function mi(e,r){var n=x();try{C.get(e)(r)}catch(t){if(P(n),t!==t+0&&t!=="longjmp")throw t;D(1,0)}}function hi(e,r,n,t,a){var o=x();try{C.get(e)(r,n,t,a)}catch(s){if(P(o),s!==s+0&&s!=="longjmp")throw s;D(1,0)}}function gi(e,r,n){var t=x();try{C.get(e)(r,n)}catch(a){if(P(t),a!==a+0&&a!=="longjmp")throw a;D(1,0)}}function Ei(e,r,n,t,a,o,s,u,f,d){var _=x();try{return C.get(e)(r,n,t,a,o,s,u,f,d)}catch(m){if(P(_),m!==m+0&&m!=="longjmp")throw m;D(1,0)}}function yi(e,r,n,t,a,o,s,u,f,d,_,m){var w=x();try{return C.get(e)(r,n,t,a,o,s,u,f,d,_,m)}catch(y){if(P(w),y!==y+0&&y!=="longjmp")throw y;D(1,0)}}function Ti(e,r,n,t,a){var o=x();try{return C.get(e)(r,n,t,a)}catch(s){if(P(o),s!==s+0&&s!=="longjmp")throw s;D(1,0)}}function Ai(e,r,n,t,a,o,s,u,f){var d=x();try{return C.get(e)(r,n,t,a,o,s,u,f)}catch(_){if(P(d),_!==_+0&&_!=="longjmp")throw _;D(1,0)}}function bi(e,r,n,t,a,o){var s=x();try{return zr(e,r,n,t,a,o)}catch(u){if(P(s),u!==u+0&&u!=="longjmp")throw u;D(1,0)}}i.PThread=l,i.PThread=l,i.wasmMemory=g,i.ExitStatus=me;var pe;function me(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ie=function e(){pe||Me(),pe||(ie=e)};function Me(e){if(e=e||Ue,q>0)return;if(p){he(i),fr(),postMessage({cmd:"loaded"});return}if(gn(),q>0)return;function r(){pe||(pe=!0,i.calledRun=!0,!Te&&(fr(),he(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),yn()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),r()},1)):r()}i.run=Me;function wi(e,r){if(Ae=e,!(r&&Se()&&e===0)){if(!r&&p)throw postMessage({cmd:"exitProcess",returnCode:e}),new me(e);Se()||(l.terminateAllThreads(),En(),i.onExit&&i.onExit(e),Te=!0),He(e,new me(e))}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return p&&(Ve=!1,l.initWorker()),Me(),i.ready}}(),Ni=Si;export{Ni as default};
//# sourceMappingURL=avif_enc_mt.js.map