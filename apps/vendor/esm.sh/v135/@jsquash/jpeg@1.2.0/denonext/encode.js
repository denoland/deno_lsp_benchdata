/* esm.sh - esbuild bundle(@jsquash/jpeg@1.2.0/encode) denonext production */
import __Process$ from "node:process";
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);
var xn=(()=>{var A=import.meta.url;return function(a={}){var a=typeof a<"u"?a:{},k,$;a.ready=new Promise(function(r,e){k=r,$=e});var B=globalThis.ServiceWorkerGlobalScope!==void 0,Jr=B&&typeof self<"u"&&caches.default!==void 0;Jr&&(globalThis.ImageData||(globalThis.ImageData=class{constructor(e,n,t){this.data=e,this.width=n,this.height=t}}),import.meta.url===void 0&&(import.meta.url="https://localhost"),self.location===void 0&&(self.location={href:""}));var pr=Object.assign({},a),Kr=[],gr="./this.program",hr=(r,e)=>{throw e},_r=typeof window=="object",q=typeof importScripts=="function",zn=typeof __Process$=="object"&&typeof __Process$.versions=="object"&&typeof __Process$.versions.node=="string",T="";function Yr(r){return a.locateFile?a.locateFile(r,T):T+r}var Zr,Qr,er,re;(_r||q)&&(q?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),A&&(T=A),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",Zr=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),e.responseText},q&&(er=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),Qr=(r,e,n)=>{var t=new XMLHttpRequest;t.open("GET",r,!0),t.responseType="arraybuffer",t.onload=()=>{if(t.status==200||t.status==0&&t.response){e(t.response);return}n()},t.onerror=n,t.send(null)},re=r=>document.title=r);var ee=a.print||console.log.bind(console),j=a.printErr||console.warn.bind(console);Object.assign(a,pr),pr=null,a.arguments&&(Kr=a.arguments),a.thisProgram&&(gr=a.thisProgram),a.quit&&(hr=a.quit);var D;a.wasmBinary&&(D=a.wasmBinary);var ne=a.noExitRuntime||!0;typeof WebAssembly!="object"&&X("no native wasm support detected");var G,nr=!1,tr;function mr(r,e,n){for(var t=e+n,i="";!(e>=t);){var o=r[e++];if(!o)return i;if(!(o&128)){i+=String.fromCharCode(o);continue}var f=r[e++]&63;if((o&224)==192){i+=String.fromCharCode((o&31)<<6|f);continue}var u=r[e++]&63;if((o&240)==224?o=(o&15)<<12|f<<6|u:o=(o&7)<<18|f<<12|u<<6|r[e++]&63,o<65536)i+=String.fromCharCode(o);else{var s=o-65536;i+=String.fromCharCode(55296|s>>10,56320|s&1023)}}return i}function yr(r,e){return r?mr(h,r,e):""}function te(r,e,n,t){if(!(t>0))return 0;for(var i=n,o=n+t-1,f=0;f<r.length;++f){var u=r.charCodeAt(f);if(u>=55296&&u<=57343){var s=r.charCodeAt(++f);u=65536+((u&1023)<<10)|s&1023}if(u<=127){if(n>=o)break;e[n++]=u}else if(u<=2047){if(n+1>=o)break;e[n++]=192|u>>6,e[n++]=128|u&63}else if(u<=65535){if(n+2>=o)break;e[n++]=224|u>>12,e[n++]=128|u>>6&63,e[n++]=128|u&63}else{if(n+3>=o)break;e[n++]=240|u>>18,e[n++]=128|u>>12&63,e[n++]=128|u>>6&63,e[n++]=128|u&63}}return e[n]=0,n-i}function ie(r,e,n){return te(r,h,e,n)}function ae(r){for(var e=0,n=0;n<r.length;++n){var t=r.charCodeAt(n);t<=127?e++:t<=2047?e+=2:t>=55296&&t<=57343?(e+=4,++n):e+=3}return e}var C,h,I,ir,_,d,br,wr;function Ar(){var r=G.buffer;a.HEAP8=C=new Int8Array(r),a.HEAP16=I=new Int16Array(r),a.HEAP32=_=new Int32Array(r),a.HEAPU8=h=new Uint8Array(r),a.HEAPU16=ir=new Uint16Array(r),a.HEAPU32=d=new Uint32Array(r),a.HEAPF32=br=new Float32Array(r),a.HEAPF64=wr=new Float64Array(r)}var Tr,Er=[],Cr=[],Rr=[],oe=!1,ue=0;function fe(){return ne||ue>0}function se(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)ve(a.preRun.shift());or(Er)}function le(){oe=!0,or(Cr)}function ce(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)pe(a.postRun.shift());or(Rr)}function ve(r){Er.unshift(r)}function de(r){Cr.unshift(r)}function pe(r){Rr.unshift(r)}var F=0,ar=null,V=null;function ge(r){F++,a.monitorRunDependencies&&a.monitorRunDependencies(F)}function he(r){if(F--,a.monitorRunDependencies&&a.monitorRunDependencies(F),F==0&&(ar!==null&&(clearInterval(ar),ar=null),V)){var e=V;V=null,e()}}function X(r){a.onAbort&&a.onAbort(r),r="Aborted("+r+")",j(r),nr=!0,tr=1,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw $(e),e}var _e="data:application/octet-stream;base64,";function Pr(r){return r.startsWith(_e)}var S;a.locateFile?(S="mozjpeg_enc.wasm",Pr(S)||(S=Yr(S))):S=new URL("mozjpeg_enc.wasm",import.meta.url).href;function $r(r){try{if(r==S&&D)return new Uint8Array(D);if(er)return er(r);throw"both async and sync fetching of the wasm failed"}catch(e){X(e)}}function me(r){return!D&&(_r||q)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+r+"'";return e.arrayBuffer()}).catch(function(){return $r(r)}):Promise.resolve().then(function(){return $r(r)})}function Fr(r,e,n){return me(r).then(function(t){return WebAssembly.instantiate(t,e)}).then(function(t){return t}).then(n,function(t){j("failed to asynchronously prepare wasm: "+t),X(t)})}function ye(r,e,n,t){return!r&&typeof WebAssembly.instantiateStreaming=="function"&&!Pr(e)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(function(i){var o=WebAssembly.instantiateStreaming(i,n);return o.then(t,function(f){return j("wasm streaming compile failed: "+f),j("falling back to ArrayBuffer instantiation"),Fr(e,n,t)})}):Fr(e,n,t)}function be(){var r={a:In};function e(t,i){var o=t.exports;return a.asm=o,G=a.asm.B,Ar(),Tr=a.asm.H,de(a.asm.C),he("wasm-instantiate"),o}ge("wasm-instantiate");function n(t){e(t.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(r,e)}catch(t){j("Module.instantiateWasm callback failed with error: "+t),$(t)}return ye(D,S,r,n).catch($),{}}function we(r){this.name="ExitStatus",this.message="Program terminated with exit("+r+")",this.status=r}function or(r){for(;r.length>0;)r.shift()(a)}function Ae(r){this.excPtr=r,this.ptr=r-24,this.set_type=function(e){d[this.ptr+4>>2]=e},this.get_type=function(){return d[this.ptr+4>>2]},this.set_destructor=function(e){d[this.ptr+8>>2]=e},this.get_destructor=function(){return d[this.ptr+8>>2]},this.set_refcount=function(e){_[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,C[this.ptr+12>>0]=e},this.get_caught=function(){return C[this.ptr+12>>0]!=0},this.set_rethrown=function(e){e=e?1:0,C[this.ptr+13>>0]=e},this.get_rethrown=function(){return C[this.ptr+13>>0]!=0},this.init=function(e,n){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(n),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=_[this.ptr>>2];_[this.ptr>>2]=e+1},this.release_ref=function(){var e=_[this.ptr>>2];return _[this.ptr>>2]=e-1,e===1},this.set_adjusted_ptr=function(e){d[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return d[this.ptr+16>>2]},this.get_exception_ptr=function(){var e=zr(this.get_type());if(e)return d[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var Te=0,Ee=0;function Ce(r,e,n){var t=new Ae(r);throw t.init(e,n),Te=r,Ee++,r}var J={};function Sr(r){for(;r.length;){var e=r.pop(),n=r.pop();n(e)}}function K(r){return this.fromWireType(_[r>>2])}var O={},U={},Y={},Re=48,Pe=57;function $e(r){if(r===void 0)return"_unknown";r=r.replace(/[^a-zA-Z0-9_]/g,"$");var e=r.charCodeAt(0);return e>=Re&&e<=Pe?"_"+r:r}function Fe(r,e){return r=$e(r),{[r]:function(){return e.apply(this,arguments)}}[r]}function ur(r,e){var n=Fe(e,function(t){this.name=e,this.message=t;var i=new Error(t).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var Ur=void 0;function Wr(r){throw new Ur(r)}function kr(r,e,n){r.forEach(function(u){Y[u]=e});function t(u){var s=n(u);s.length!==r.length&&Wr("Mismatched type converter count");for(var l=0;l<r.length;++l)R(r[l],s[l])}var i=new Array(e.length),o=[],f=0;e.forEach((u,s)=>{U.hasOwnProperty(u)?i[s]=U[u]:(o.push(u),O.hasOwnProperty(u)||(O[u]=[]),O[u].push(()=>{i[s]=U[u],++f,f===o.length&&t(i)}))}),o.length===0&&t(i)}function Se(r){var e=J[r];delete J[r];var n=e.rawConstructor,t=e.rawDestructor,i=e.fields,o=i.map(f=>f.getterReturnType).concat(i.map(f=>f.setterArgumentType));kr([r],o,f=>{var u={};return i.forEach((s,l)=>{var v=s.fieldName,c=f[l],p=s.getter,y=s.getterContext,E=f[l+i.length],W=s.setter,w=s.setterContext;u[v]={read:L=>c.fromWireType(p(y,L)),write:(L,vr)=>{var rr=[];W(w,L,E.toWireType(rr,vr)),Sr(rr)}}}),[{name:e.name,fromWireType:function(s){var l={};for(var v in u)l[v]=u[v].read(s);return t(s),l},toWireType:function(s,l){for(var v in u)if(!(v in l))throw new TypeError('Missing field:  "'+v+'"');var c=n();for(v in u)u[v].write(c,l[v]);return s!==null&&s.push(t,c),c},argPackAdvance:8,readValueFromPointer:K,destructorFunction:t}]})}function Ue(r,e,n,t,i){}function fr(r){switch(r){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+r)}}function We(){for(var r=new Array(256),e=0;e<256;++e)r[e]=String.fromCharCode(e);jr=r}var jr=void 0;function g(r){for(var e="",n=r;h[n];)e+=jr[h[n++]];return e}var Ir=void 0;function m(r){throw new Ir(r)}function R(r,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=e.name;if(r||m('type "'+t+'" must have a positive integer typeid pointer'),U.hasOwnProperty(r)){if(n.ignoreDuplicateRegistrations)return;m("Cannot register type '"+t+"' twice")}if(U[r]=e,delete Y[r],O.hasOwnProperty(r)){var i=O[r];delete O[r],i.forEach(o=>o())}}function ke(r,e,n,t,i){var o=fr(n);e=g(e),R(r,{name:e,fromWireType:function(f){return!!f},toWireType:function(f,u){return u?t:i},argPackAdvance:8,readValueFromPointer:function(f){var u;if(n===1)u=C;else if(n===2)u=I;else if(n===4)u=_;else throw new TypeError("Unknown boolean type size: "+e);return this.fromWireType(u[f>>o])},destructorFunction:null})}var sr=[],b=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Or(r){r>4&&--b[r].refcount===0&&(b[r]=void 0,sr.push(r))}function je(){for(var r=0,e=5;e<b.length;++e)b[e]!==void 0&&++r;return r}function Ie(){for(var r=5;r<b.length;++r)if(b[r]!==void 0)return b[r];return null}function Oe(){a.count_emval_handles=je,a.get_first_emval=Ie}var H={toValue:r=>(r||m("Cannot use deleted val. handle = "+r),b[r].value),toHandle:r=>{switch(r){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var e=sr.length?sr.pop():b.length;return b[e]={refcount:1,value:r},e}}}};function He(r,e){e=g(e),R(r,{name:e,fromWireType:function(n){var t=H.toValue(n);return Or(n),t},toWireType:function(n,t){return H.toHandle(t)},argPackAdvance:8,readValueFromPointer:K,destructorFunction:null})}function Me(r,e){switch(e){case 2:return function(n){return this.fromWireType(br[n>>2])};case 3:return function(n){return this.fromWireType(wr[n>>3])};default:throw new TypeError("Unknown float type: "+r)}}function De(r,e,n){var t=fr(n);e=g(e),R(r,{name:e,fromWireType:function(i){return i},toWireType:function(i,o){return o},argPackAdvance:8,readValueFromPointer:Me(e,t),destructorFunction:null})}function Ve(r,e,n,t,i,o){var f=e.length;f<2&&m("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=e[1]!==null&&n!==null,s=!1,l=1;l<e.length;++l)if(e[l]!==null&&e[l].destructorFunction===void 0){s=!0;break}var v=e[0].name!=="void",c=f-2,p=new Array(c),y=[],E=[];return function(){arguments.length!==c&&m("function "+r+" called with "+arguments.length+" arguments, expected "+c+" args!"),E.length=0;var W;y.length=u?2:1,y[0]=i,u&&(W=e[1].toWireType(E,this),y[1]=W);for(var w=0;w<c;++w)p[w]=e[w+2].toWireType(E,arguments[w]),y.push(p[w]);var L=t.apply(null,y);function vr(rr){if(s)Sr(E);else for(var M=u?1:2;M<e.length;M++){var Vn=M===1?W:p[M-2];e[M].destructorFunction!==null&&e[M].destructorFunction(Vn)}if(v)return e[0].fromWireType(rr)}return vr(L)}}function xe(r,e,n){if(r[e].overloadTable===void 0){var t=r[e];r[e]=function(){return r[e].overloadTable.hasOwnProperty(arguments.length)||m("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+r[e].overloadTable+")!"),r[e].overloadTable[arguments.length].apply(this,arguments)},r[e].overloadTable=[],r[e].overloadTable[t.argCount]=t}}function Ne(r,e,n){a.hasOwnProperty(r)?((n===void 0||a[r].overloadTable!==void 0&&a[r].overloadTable[n]!==void 0)&&m("Cannot register public name '"+r+"' twice"),xe(a,r,r),a.hasOwnProperty(n)&&m("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),a[r].overloadTable[n]=e):(a[r]=e,n!==void 0&&(a[r].numArguments=n))}function Le(r,e){for(var n=[],t=0;t<r;t++)n.push(d[e+t*4>>2]);return n}function ze(r,e,n){a.hasOwnProperty(r)||Wr("Replacing nonexistant public symbol"),a[r].overloadTable!==void 0&&n!==void 0?a[r].overloadTable[n]=e:(a[r]=e,a[r].argCount=n)}function Be(r,e,n){var t=a["dynCall_"+r];return n&&n.length?t.apply(null,[e].concat(n)):t.call(null,e)}var Z=[];function Hr(r){var e=Z[r];return e||(r>=Z.length&&(Z.length=r+1),Z[r]=e=Tr.get(r)),e}function qe(r,e,n){if(r.includes("j"))return Be(r,e,n);var t=Hr(e).apply(null,n);return t}function Ge(r,e){var n=[];return function(){return n.length=0,Object.assign(n,arguments),qe(r,e,n)}}function x(r,e){r=g(r);function n(){return r.includes("j")?Ge(r,e):Hr(e)}var t=n();return typeof t!="function"&&m("unknown function pointer with signature "+r+": "+e),t}var Mr=void 0;function Dr(r){var e=Lr(r),n=g(e);return P(e),n}function Xe(r,e){var n=[],t={};function i(o){if(!t[o]&&!U[o]){if(Y[o]){Y[o].forEach(i);return}n.push(o),t[o]=!0}}throw e.forEach(i),new Mr(r+": "+n.map(Dr).join([", "]))}function Je(r,e,n,t,i,o,f){var u=Le(e,n);r=g(r),i=x(t,i),Ne(r,function(){Xe("Cannot call "+r+" due to unbound types",u)},e-1),kr([],u,function(s){var l=[s[0],null].concat(s.slice(1));return ze(r,Ve(r,l,null,i,o,f),e-1),[]})}function Ke(r,e,n){switch(e){case 0:return n?function(i){return C[i]}:function(i){return h[i]};case 1:return n?function(i){return I[i>>1]}:function(i){return ir[i>>1]};case 2:return n?function(i){return _[i>>2]}:function(i){return d[i>>2]};default:throw new TypeError("Unknown integer type: "+r)}}function Ye(r,e,n,t,i){e=g(e),i===-1&&(i=4294967295);var o=fr(n),f=c=>c;if(t===0){var u=32-8*n;f=c=>c<<u>>>u}var s=e.includes("unsigned"),l=(c,p)=>{},v;s?v=function(c,p){return l(p,this.name),p>>>0}:v=function(c,p){return l(p,this.name),p},R(r,{name:e,fromWireType:f,toWireType:v,argPackAdvance:8,readValueFromPointer:Ke(e,o,t!==0),destructorFunction:null})}function Ze(r,e,n){var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=t[e];function o(f){f=f>>2;var u=d,s=u[f],l=u[f+1];return new i(u.buffer,l,s)}n=g(n),R(r,{name:n,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function Qe(r,e){e=g(e);var n=e==="std::string";R(r,{name:e,fromWireType:function(t){var i=d[t>>2],o=t+4,f;if(n)for(var u=o,s=0;s<=i;++s){var l=o+s;if(s==i||h[l]==0){var v=l-u,c=yr(u,v);f===void 0?f=c:(f+="\0",f+=c),u=l+1}}else{for(var p=new Array(i),s=0;s<i;++s)p[s]=String.fromCharCode(h[o+s]);f=p.join("")}return P(t),f},toWireType:function(t,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var o,f=typeof i=="string";f||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||m("Cannot pass non-string to std::string"),n&&f?o=ae(i):o=i.length;var u=cr(4+o+1),s=u+4;if(d[u>>2]=o,n&&f)ie(i,s,o+1);else if(f)for(var l=0;l<o;++l){var v=i.charCodeAt(l);v>255&&(P(s),m("String has UTF-16 code units that do not fit in 8 bits")),h[s+l]=v}else for(var l=0;l<o;++l)h[s+l]=i[l];return t!==null&&t.push(P,u),u},argPackAdvance:8,readValueFromPointer:K,destructorFunction:function(t){P(t)}})}function rn(r,e){for(var n="",t=0;!(t>=e/2);++t){var i=I[r+t*2>>1];if(i==0)break;n+=String.fromCharCode(i)}return n}function en(r,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var t=e,i=n<r.length*2?n/2:r.length,o=0;o<i;++o){var f=r.charCodeAt(o);I[e>>1]=f,e+=2}return I[e>>1]=0,e-t}function nn(r){return r.length*2}function tn(r,e){for(var n=0,t="";!(n>=e/4);){var i=_[r+n*4>>2];if(i==0)break;if(++n,i>=65536){var o=i-65536;t+=String.fromCharCode(55296|o>>10,56320|o&1023)}else t+=String.fromCharCode(i)}return t}function an(r,e,n){if(n===void 0&&(n=2147483647),n<4)return 0;for(var t=e,i=t+n-4,o=0;o<r.length;++o){var f=r.charCodeAt(o);if(f>=55296&&f<=57343){var u=r.charCodeAt(++o);f=65536+((f&1023)<<10)|u&1023}if(_[e>>2]=f,e+=4,e+4>i)break}return _[e>>2]=0,e-t}function on(r){for(var e=0,n=0;n<r.length;++n){var t=r.charCodeAt(n);t>=55296&&t<=57343&&++n,e+=4}return e}function un(r,e,n){n=g(n);var t,i,o,f,u;e===2?(t=rn,i=en,f=nn,o=()=>ir,u=1):e===4&&(t=tn,i=an,f=on,o=()=>d,u=2),R(r,{name:n,fromWireType:function(s){for(var l=d[s>>2],v=o(),c,p=s+4,y=0;y<=l;++y){var E=s+4+y*e;if(y==l||v[E>>u]==0){var W=E-p,w=t(p,W);c===void 0?c=w:(c+="\0",c+=w),p=E+e}}return P(s),c},toWireType:function(s,l){typeof l!="string"&&m("Cannot pass non-string to C++ string type "+n);var v=f(l),c=cr(4+v+e);return d[c>>2]=v>>u,i(l,c+4,v+e),s!==null&&s.push(P,c),c},argPackAdvance:8,readValueFromPointer:K,destructorFunction:function(s){P(s)}})}function fn(r,e,n,t,i,o){J[r]={name:g(e),rawConstructor:x(n,t),rawDestructor:x(i,o),fields:[]}}function sn(r,e,n,t,i,o,f,u,s,l){J[r].fields.push({fieldName:g(e),getterReturnType:n,getter:x(t,i),getterContext:o,setterArgumentType:f,setter:x(u,s),setterContext:l})}function ln(r,e){e=g(e),R(r,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:function(){},toWireType:function(n,t){}})}var cn={};function vn(r){var e=cn[r];return e===void 0?g(r):e}function Vr(){if(typeof globalThis=="object")return globalThis;function r(e){e.$$$embind_global$$$=e;var n=typeof $$$embind_global$$$=="object"&&e.$$$embind_global$$$==e;return n||delete e.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof __global$=="object"&&r(__global$)?$$$embind_global$$$=__global$:typeof self=="object"&&r(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function dn(r){return r===0?H.toHandle(Vr()):(r=vn(r),H.toHandle(Vr()[r]))}function pn(r){r>4&&(b[r].refcount+=1)}function gn(r,e){var n=U[r];return n===void 0&&m(e+" has unknown type "+Dr(r)),n}function hn(r){var e=new Array(r+1);return function(n,t,i){e[0]=n;for(var o=0;o<r;++o){var f=gn(d[t+o*4>>2],"parameter "+o);e[o+1]=f.readValueFromPointer(i),i+=f.argPackAdvance}var u=new(n.bind.apply(n,e));return H.toHandle(u)}}var xr={};function _n(r,e,n,t){r=H.toValue(r);var i=xr[e];return i||(i=hn(e),xr[e]=i),i(r,n,t)}function mn(){X("")}function yn(r,e,n){h.copyWithin(r,e,e+n)}function bn(){return 2147483648}function wn(r){var e=G.buffer;try{return G.grow(r-e.byteLength+65535>>>16),Ar(),1}catch{}}function An(r){var e=h.length;r=r>>>0;var n=bn();if(r>n)return!1;let t=(s,l)=>s+(l-s%l)%l;for(var i=1;i<=4;i*=2){var o=e*(1+.2/i);o=Math.min(o,r+100663296);var f=Math.min(n,t(Math.max(r,o),65536)),u=wn(f);if(u)return!0}return!1}var lr={};function Tn(){return gr||"./this.program"}function N(){if(!N.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:Tn()};for(var n in lr)lr[n]===void 0?delete e[n]:e[n]=lr[n];var t=[];for(var n in e)t.push(n+"="+e[n]);N.strings=t}return N.strings}function En(r,e,n){for(var t=0;t<r.length;++t)C[e++>>0]=r.charCodeAt(t);n||(C[e>>0]=0)}var Nr={varargs:void 0,get:function(){Nr.varargs+=4;var r=_[Nr.varargs-4>>2];return r},getStr:function(r){var e=yr(r);return e}};function Cn(r,e){var n=0;return N().forEach(function(t,i){var o=e+n;d[r+i*4>>2]=o,En(t,o),n+=t.length+1}),0}function Rn(r,e){var n=N();d[r>>2]=n.length;var t=0;return n.forEach(function(i){t+=i.length+1}),d[e>>2]=t,0}function Pn(r){tr=r,fe()||(a.onExit&&a.onExit(r),nr=!0),hr(r,new we(r))}function $n(r,e){tr=r,Pn(r)}var Fn=$n;function Sn(r){return 52}function Un(r,e,n,t,i){return 70}var Wn=[null,[],[]];function kn(r,e){var n=Wn[r];e===0||e===10?((r===1?ee:j)(mr(n,0)),n.length=0):n.push(e)}function jn(r,e,n,t){for(var i=0,o=0;o<n;o++){var f=d[e>>2],u=d[e+4>>2];e+=8;for(var s=0;s<u;s++)kn(r,h[f+s]);i+=u}return d[t>>2]=i,0}Ur=a.InternalError=ur(Error,"InternalError"),We(),Ir=a.BindingError=ur(Error,"BindingError"),Oe(),Mr=a.UnboundTypeError=ur(Error,"UnboundTypeError");var In={k:Ce,m:Se,p:Ue,x:ke,w:He,h:De,e:Je,c:Ye,a:Ze,i:Qe,d:un,n:fn,b:sn,y:ln,g:Or,z:dn,l:pn,j:_n,f:mn,t:yn,q:An,r:Cn,s:Rn,A:Fn,u:Sn,o:Un,v:jn},Bn=be(),On=function(){return(On=a.asm.C).apply(null,arguments)},cr=function(){return(cr=a.asm.D).apply(null,arguments)},P=function(){return(P=a.asm.E).apply(null,arguments)},Lr=a.___getTypeName=function(){return(Lr=a.___getTypeName=a.asm.F).apply(null,arguments)},Hn=a.__embind_initialize_bindings=function(){return(Hn=a.__embind_initialize_bindings=a.asm.G).apply(null,arguments)},Mn=function(){return(Mn=a.asm.__errno_location).apply(null,arguments)},zr=function(){return(zr=a.asm.I).apply(null,arguments)},Dn=a.dynCall_jiji=function(){return(Dn=a.dynCall_jiji=a.asm.J).apply(null,arguments)},Q;V=function r(){Q||Br(),Q||(V=r)};function Br(){if(F>0||(se(),F>0))return;function r(){Q||(Q=!0,a.calledRun=!0,!nr&&(le(),k(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),ce()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),r()},1)):r()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return Br(),a.ready}})(),qr=xn;var Gr={quality:75,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:3,quant_table:3,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75};function Xr(A,z){let a;return z&&(a=(k,$)=>{let B=new WebAssembly.Instance(z,k);return $(B),B.exports}),A({noInitialRun:!0,instantiateWasm:a})}var dr;async function Nn(A){dr=Xr(qr,A)}async function Ln(A,z={}){dr||Nn();let a=await dr,k={...Gr,...z};return a.encode(A.data,A.width,A.height,k).buffer}export{Ln as default,Nn as init};
//# sourceMappingURL=encode.js.map