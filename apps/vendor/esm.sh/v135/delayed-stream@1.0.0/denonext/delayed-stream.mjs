/* esm.sh - esbuild bundle(delayed-stream@1.0.0) denonext production */
import * as __0$ from "node:stream";
import * as __1$ from "node:util";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"stream":return e(__0$);case"util":return e(__1$);default:throw new Error("module \""+n+"\" not found");}};
var x=Object.create;var h=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var f=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),v=(e,t)=>{for(var r in t)h(e,r,{get:t[r],enumerable:!0})},o=(e,t,r,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of S(t))!z.call(e,s)&&s!==r&&h(e,s,{get:()=>t[s],enumerable:!(u=y(t,s))||u.enumerable});return e},n=(e,t,r)=>(o(e,t,"default"),r&&o(r,t,"default")),p=(e,t,r)=>(r=e!=null?x(E(e)):{},o(t||!e||!e.__esModule?h(r,"default",{value:e,enumerable:!0}):r,e));var d=b((I,c)=>{var m=f("stream").Stream,D=f("util");c.exports=a;function a(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}D.inherits(a,m);a.create=function(e,t){var r=new this;t=t||{};for(var u in t)r[u]=t[u];r.source=e;var s=e.emit;return e.emit=function(){return r._handleEmit(arguments),s.apply(e,arguments)},e.on("error",function(){}),r.pauseStream&&e.pause(),r};Object.defineProperty(a.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});a.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};a.prototype.resume=function(){this._released||this.release(),this.source.resume()};a.prototype.pause=function(){this.source.pause()};a.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]};a.prototype.pipe=function(){var e=m.prototype.pipe.apply(this,arguments);return this.resume(),e};a.prototype._handleEmit=function(e){if(this._released){this.emit.apply(this,e);return}e[0]==="data"&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e)};a.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}});var i={};v(i,{create:()=>g,default:()=>q});var _=p(d());n(i,p(d()));var{create:g}=_,{default:l,...k}=_,q=l!==void 0?l:k;export{g as create,q as default};
//# sourceMappingURL=delayed-stream.mjs.map